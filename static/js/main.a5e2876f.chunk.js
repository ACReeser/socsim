(this.webpackJsonpsocsim=this.webpackJsonpsocsim||[]).push([[0],{19:function(e,t,n){e.exports=n(38)},24:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),l=n.n(r),c=(n(24),n(1)),o=n(3),s=n(5),u=n(4),d=n(8),m=n(16),y=(n(29),n(30),function(){function e(t){Object(c.a)(this,e),this.onPublish=t,this.callbacks=[],this.current=void 0}return Object(o.a)(e,[{key:"publish",value:function(e){this.onPublish&&this.onPublish(e),this.current=e,this.callbacks.forEach((function(t){return t(e)}))}},{key:"subscribe",value:function(e){this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)}}]),e}()),p=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(y);var f,h=new(function(){function e(){Object(c.a)(this,e),this.Dirty=new y,this.Saving=new y}return Object(o.a)(e,[{key:"HasContinueGame",value:function(){var e=localStorage.getItem("last-game-id");if(null!=e){var t=parseInt(e);if(!isNaN(t))return null!=localStorage.getItem("".concat("game-").concat(t))?t:void 0}}},{key:"GetGameSlots",value:function(){for(var e=[],t=0;t<3;t++){var n=localStorage.getItem("".concat("game-brief-").concat(t+1));e.push({id:t+1,brief:n?JSON.parse(n):void 0})}return e}},{key:"GetGame",value:function(e){var t=localStorage.getItem("".concat("game-").concat(e));if(!t)return{errors:["Cannot find game"]};try{return{game:JSON.parse(t)}}catch(n){return{errors:[n]}}}},{key:"SaveGame",value:function(e){var t=JSON.stringify(e),n={Name:e.cities.byID[0].name,Population:e.beans.allIDs.map((function(t){return e.beans.byID[t]})).filter((function(e){return"dead"!=e.lifecycle})).length,Age:{day:e.date.day,hour:e.date.hour,season:e.date.season,year:e.date.year}};localStorage.setItem("".concat("game-").concat(e.saveSlot),t),localStorage.setItem("".concat("game-brief-").concat(e.saveSlot),JSON.stringify(n)),localStorage.setItem("last-game-id",e.saveSlot.toString()),this.Dirty.publish(!1),this.Saving.publish()}}]),e}()),b=n(7),v=new(function(){function e(){Object(c.a)(this,e),this.cache={ufo:{},bean:{},pickup:{}}}return Object(o.a)(e,[{key:"Get",value:function(e,t){return this.cache[e][t]||(this.cache[e][t]=new y),this.cache[e][t]}}]),e}()),g={x:.94,y:.94},E=60,k=9,w=10,x={x:.94,y:.94},K=10,D=4,N=10,S={state:"\ud83d\udd4a\ufe0f",ego:"\ud83e\udd85",prog:"\u2696\ufe0f",trad:"\ud83d\udc51",circle:"\ud83e\udd0e",square:"\ud83d\udc9b",triangle:"\ud83e\udde1",rocket:"\ud83d\ude80",music:"\ud83c\udfb5",dragon:"\ud83d\udc32",noFaith:"\u26ab\ufe0f",starving:"\ud83c\udf74",hungry:"\ud83c\udf7d\ufe0f",sated:"\ud83e\udd5c",stuffed:"\ud83e\udd69",homeless:"\ud83c\udf28\ufe0f",housed:"\ud83d\udeaa",sleepy:"\ud83c\udf19",awake:"\u2600\ufe0f",rested:"\ud83c\udf1e",sick:"\ud83e\udd22",sickly:"\ud83d\ude37",bruised:"\ud83e\ude79",fresh:"\ud83d\udcaa",psychotic:"\ud83e\udd2a",disturbed:"\ud83e\udd24",stressed:"",sane:"\ud83e\udde0"};!function(e){e[e.Deficient=-.25]="Deficient",e[e.Sufficient=0]="Sufficient",e[e.Abundant=.15]="Abundant"}(f||(f={}));var j={warning:.5,sufficient:1,abundant:3},C={warning:.5,sufficient:1,abundant:3};function I(e){switch(e){case"doc":return"medicine";case"entertainer":return"fun";default:case"farmer":return"food"}}var _={food:"\ud83e\udd6a",medicine:"\ud83d\udc8a",fun:"\ud83d\udc4f"},M={love:"\ud83d\udc9b",happiness:"\ud83d\udc4d",unhappiness:"\ud83d\udca2",hate:"\ud83d\udc94"},O={love:5,happiness:1,unhappiness:-1,hate:-5},B={love:1,happiness:.2,unhappiness:0,hate:-1};var T=n(2),P={common:3,uncommon:2,rare:1,unique:0},A={prog:{noun:"Progressivism",adj:"Progressive",icon:"\u2696\ufe0f",description:"Strives to help others",rarity:"common"},trad:{noun:"Elitism",adj:"Elitist",icon:"\ud83d\udc51",description:"Strives for individual power",rarity:"common"},state:{noun:"Collectivism",adj:"Collectivist",icon:"\ud83d\udd4a\ufe0f",description:"Trusts in the social group",rarity:"common"},ego:{noun:"Independence",adj:"Independent",icon:"\ud83e\udd85",description:"Trusts only in oneself",rarity:"common"}},G={rocket:{noun:"Futurism",adj:"Futuristic",icon:"\ud83d\ude80",description:"Loves stories of the far future",rarity:"common"},dragon:{noun:"Mythology",adj:"Mythical",icon:"\ud83d\udc32",description:"Loves stories of the legendary past",rarity:"common"},music:{noun:"Drama",adj:"Dramatic",icon:"\ud83c\udfb5",description:"Loves stories of emotional bonding",rarity:"common"},noFaith:{noun:"Nihilism",adj:"Nihilist",icon:"\u26ab\ufe0f",description:"Hates fairy tales",rarity:"common"}},L={Diligence:{noun:"Diligence",adj:"Diligence",icon:"\ud83d\udcaa",rarity:"common",description:"\ud83c\udfb2 to \ud83d\udc4d while working"},Natalism:{noun:"Natalism",adj:"Natalist",icon:"\ud83d\udc76",rarity:"common",description:"Extra \ud83c\udfb2 for \ud83d\udc76;Extra \ud83d\udc4d after birth"},Antinatalism:{noun:"Antinatalism",adj:"Antinatalist",icon:"\ud83d\udeb7",rarity:"uncommon",description:"Less \ud83c\udfb2 for \ud83d\udc76;\ud83d\udca2 after birth"},Charity:{noun:"Charity",adj:"Charitable",icon:"\ud83d\ude07",rarity:"uncommon",description:"\ud83c\udfb2 to gift \ud83d\udcb0 to the penniless; and spread \ud83d\udc4d"},Progressivism:{noun:"Progressivism",adj:"Progressive",icon:"\u2696\ufe0f",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when paying taxes"},Libertarianism:{noun:"Libertarianism",adj:"Libertarian",icon:"\ud83d\udd2b",rarity:"rare",description:"\ud83c\udfb2 to \ud83d\udca2 when paying taxes"},Wanderlust:{noun:"Wanderlust",adj:"Wanderer",icon:"\ud83d\udd2d",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when travelling"},Germophobia:{noun:"Germophobia",adj:"Germophobic",icon:"\ud83e\udd27",rarity:"rare",description:"\ud83d\udca2 when sick or working in hospital"},Parochialism:{noun:"Parochialism",adj:"Parochial",icon:"\ud83d\udc2e",rarity:"common",description:"Extra \ud83d\udc4d working \ud83c\udf3e; \ud83d\udca2 from dense houses"},Cosmopolitanism:{noun:"Cosmopolitanism",adj:"Cosmopolitan",icon:"\ud83c\udf78",rarity:"common",description:"Extra \ud83d\udc4d working \ud83c\udfbb; \ud83d\udca2 from rural houses"},Capitalism:{noun:"Capitalism",adj:"Capitalist",icon:"\ud83c\udfa9",rarity:"common",description:"\ud83d\udca2 working in co-ops and communes; Extra \ud83d\udc4d when owner"},Socialism:{noun:"Socialism",adj:"Socialist",icon:"\ud83e\udd1d",rarity:"common",description:"Extra \ud83d\udc4d working in co-ops"},Communism:{noun:"Communism",adj:"Communist",icon:"\u2692\ufe0f",rarity:"common",description:"\ud83d\udca2 working in companies"},Fraud:{noun:"Fraud",adj:"Fraudulent",icon:"\ud83e\udd25",rarity:"uncommon",description:"\ud83c\udfb2 to avoid taxes; Extra \ud83c\udfb2 for theft \ud83d\ude08 Crime"},Naturalism:{noun:"Naturalism",adj:"Naturalist",icon:"\ud83d\udef6",rarity:"uncommon",description:"Extra \ud83d\udc4d from \ud83d\ude0e; \ud83d\ude0e 3x longer"},Hedonism:{noun:"Hedonism",adj:"Hedonistic",icon:"\ud83d\udc8b",rarity:"uncommon",description:"\ud83c\udfb2 to emote extra \ud83d\udc4d;\ud83c\udfb2 to \ud83d\udca2 when working;"},Gluttony:{noun:"Gluttony",adj:"Glutton",icon:"\ud83c\udf83",rarity:"common",description:"Extra \ud83d\udc4d when stuffed; Extra \ud83d\udca2 when hungry;"},Paranoia:{noun:"Paranoia",adj:"Paranoid",icon:"\ud83d\udc7d",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udca2 at any time"},Depression:{noun:"Depression",adj:"Depressive",icon:"\ud83d\ude13",rarity:"common",description:"\ud83c\udfb2 to \ud83d\udca2 when unhappy"},Optimism:{noun:"Optimism",adj:"Optimistic",icon:"\ud83d\ude3a",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when happy"},Authority:{noun:"Authority",adj:"Authoritarian",icon:"\ud83d\udc62",rarity:"common",description:"Less \ud83c\udfb2 for all \ud83d\ude08 Crime"},Anarchism:{noun:"Anarchism",adj:"Anarchist",icon:"\ud83d\udd95",rarity:"uncommon",description:"Extra \ud83c\udfb2 for all \ud83d\ude08 Crime"},Greed:{noun:"Greed",adj:"Greedy",icon:"\ud83e\udd11",rarity:"common",description:"Extra \ud83c\udfb2 for theft \ud83d\ude08 Crime; Extra \ud83d\udc4d when rich"},Bloodthirst:{noun:"Bloodthirst",adj:"Bloodthirsty",icon:"\ud83e\ude78",rarity:"rare",description:"High \ud83c\udfb2 to \u2620\ufe0f Kill during \ud83d\ude08 Crime"},Extroversion:{noun:"Extroversion",adj:"Extroverted",icon:"\ud83e\udd29",rarity:"common",description:"Extra \ud83c\udfb2 to start a \ud83d\udde3\ufe0f"},Introversion:{noun:"Introversion",adj:"Introverted",icon:"\ud83e\udd13",rarity:"uncommon",description:"Less \ud83c\udfb2 to be in a \ud83d\udde3\ufe0f"},Charisma:{noun:"Charisma",adj:"Charismatic",icon:"\ud83d\ude0f",rarity:"uncommon",description:"More \ud83c\udfb2 to persuade in a \ud83d\udde3\ufe0f"},Gossip:{noun:"Gossip",adj:"Gossipy",icon:"\ud83d\udcde",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udca2 in a \ud83d\udde3\ufe0f; \ud83c\udfb2 to \ud83d\udc4d after \ud83d\udde3\ufe0f"},Antagonism:{noun:"Antagonism",adj:"Antagonistic",icon:"\ud83e\udd2c",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udca2 in a \ud83d\udde3\ufe0f"},Enthusiasm:{noun:"Enthusiasm",adj:"Enthusiastic",icon:"\ud83e\udd73",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udc4d in a \ud83d\udde3\ufe0f"},Sadism:{noun:"Sadism",adj:"Sadistic",icon:"\ud83d\ude08",rarity:"rare",description:"\ud83c\udfb2 to \u2620\ufe0f Kill in a \ud83d\udde3\ufe0f;\ud83d\udc4d from \u2620\ufe0f Kill"},Vandalism:{noun:"Vandalism",adj:"Vandal",icon:"\ud83d\udca9",rarity:"rare",description:"\ud83c\udfb2 to destroy goods;\ud83d\udc4d from \ud83d\ude08 Theft Crime"},Delirium:{noun:"Delirium",adj:"Delirious",icon:"\ud83d\ude2a",rarity:"unique",description:"Chooses actions at random"},DelusionalMania:{noun:"Delusional Mania",adj:"Delusional Maniac",icon:"\ud83d\ude35",rarity:"unique",description:"\ud83c\udfb2 to \u2620\ufe0f nearby subjects"},Catatonia:{noun:"Catatonia",adj:"Catatonic",icon:"\ud83d\ude36",rarity:"unique",description:"-60% walk speed. Cannot work."},Neuroticism:{noun:"Neuroticism",adj:"Neurotic",icon:"\ud83d\ude31",rarity:"rare",description:"+100% \ud83e\udde0 damage"},Dogmatism:{noun:"Dogmatism",adj:"Dogmatic",icon:"\ud83d\udc36",rarity:"uncommon",description:"Cannot change beliefs"}};var q=["Depression","Catatonia","Neuroticism","DelusionalMania","Delirium","Sadism","Antagonism"],H={Catatonia:2,Neuroticism:2,DelusionalMania:2,Delirium:2,Sadism:2,Depression:1,Antagonism:1},F={psychotic:1,disturbed:.65,stressed:.1,sane:0};var R=Object.keys(L).map((function(e){return e})),z=Object.keys(L).reduce((function(e,t){for(var n=t,a=P[L[n].rarity],i=0;i<a;i++)e.push(n);return e}),[]);function W(e,t,n){return Math.max(Math.min(e,n),t)}function J(e){var t,n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.125;do{t=(n=2*Se(e)-1)*n+(a=2*Se(e)-1)*a}while(t>=1||0===t);return i+r*n*Math.sqrt(-2*Math.log(t)/t)}var U=function e(t,n){Object(c.a)(this,e),this.q=t,this.r=n},Z=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}];function V(e){return Z[e]}function $(e,t){var n=V(t);return{q:e.q+n.q,r:e.r+n.r}}function X(e,t){for(var n,a,i=[],r=function(e,t){return{q:e.q+t.q,r:e.r+t.r}}(e,(n=V(4),a=t,{q:n.q*a,r:n.r*a})),l=0;l<6;l++)for(var c=0;c<t;c++)i.push(r),r=$(r,l);return i}function Y(e,t){for(var n=[e],a=0;a<t;a++)n=n.concat(X(e,a));return n}var Q={point:{x:0,y:0},velocity:{x:0,y:0}};function ee(e,t,n,a,i,r){var l={x:t.x-e.point.x,y:t.y-e.point.y},c=Math.sqrt(l.x*l.x+l.y*l.y);return c<=i||(l.x/=c,l.y/=c,e.velocity.x+=l.x*n,e.velocity.y+=l.y*n,e.velocity.x=W(e.velocity.x,-a,a),e.velocity.y=W(e.velocity.y,-a,a),te(e,r),!1)}function te(e,t){e.velocity.x*=t.x,e.velocity.y*=t.y,e.point.x+=e.velocity.x,e.point.y+=e.velocity.y}function ne(e,t,n){return e+(t-e)*n}function ae(e,t,n){return{x:ne(e.x,t.x,n),y:ne(e.y,t.y,n),z:ne(e.z,t.z,n)}}function ie(e){var t=Math.round(e.x),n=Math.round(e.y),a=Math.round(e.z),i=Math.abs(t-e.x),r=Math.abs(n-e.y),l=Math.abs(a-e.z);return i>r&&i>l?t=-n-a:r>l?n=-t-a:a=-t-n,{x:t,y:n,z:a}}function re(e){var t=e.x,n=e.z;return new U(t,n)}function le(e){return{x:e.q,z:e.r,y:-e.q-e.r}}function ce(e,t){for(var n=function(e,t){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)+Math.abs(e.z-t.z))/2}(e,t),a=[],i=0;i<=n;i++)a.push(re(ie(ae(e,t,1/n*i))));return a}var oe=function e(t,n,a,i,r,l,o,s,u){Object(c.a)(this,e),this.f0=t,this.f1=n,this.f2=a,this.f3=i,this.b0=r,this.b1=l,this.b2=o,this.b3=s,this.start_angle=u},se=(new oe(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0),new oe(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5));function ue(e,t,n){var a=se,i=(a.f0*n.q+a.f1*n.r)*e.x,r=(a.f2*n.q+a.f3*n.r)*e.y;return{x:i+t.x,y:r+t.y}}function de(e){return{x:e.r*Math.cos(e.az),y:e.r*Math.sin(e.az)}}function me(e){return{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}var ye={farm:"\ud83d\udc04",house:"\ud83c\udfe1",hospital:"\ud83c\udfe5",church:"\u26ea",theater:"\ud83c\udfaa",courthouse:"\ud83c\udfeb",park:"\u26f2\ufe0f",nature:"\ud83c\udfde\ufe0f"},pe={farm:"\ud83d\ude9c",house:"\ud83c\udfd8\ufe0f",hospital:"\ud83c\udfd9\ufe0f",church:"\u26ea",theater:"\ud83c\udfdf\ufe0f",courthouse:"\ud83c\udfeb",park:"\ud83c\udfa1",nature:"\ud83c\udfde\ufe0f"},fe={farm:"\ud83c\udf3e",house:"\ud83d\udcea",hospital:"\ud83d\udecf\ufe0f",church:"\u26ea",theater:"\ud83e\ude91",courthouse:"\ud83c\udfeb",park:"\ud83d\udc90",nature:"\u2668\ufe0f"},he={farm:"food",house:void 0,hospital:"medicine",church:"fun",theater:"fun",courthouse:"fun",park:"fun",nature:"fun"},be={food:"farm",medicine:"hospital",fun:"theater"},ve={farmer:"farm",builder:"house",doc:"hospital",entertainer:"theater",cleric:"church",jobless:"house",polit:"house"},ge={farm:"farmer",house:"builder",hospital:"doc",theater:"entertainer",church:"cleric",park:"entertainer",nature:"entertainer",courthouse:"polit"},Ee={x:150,y:150};var ke=n(17);function we(e){return{byID:e.reduce((function(e,t){return e[t.key]=t,e}),{}),allIDs:e.map((function(e){return e.key})),nextID:e.reduce((function(e,t){return Math.max(t.key+1,e)}),0)}}function xe(e,t){var n=e.nextID++;t.key=n,e.allIDs.push(n),e.byID[n]=t}var Ke={};function De(e){return null==Ke[e]&&(Ke[e]=new ke.b(e,ke.a.sfc32)),Ke[e]}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=De(e).next();return t=Math.ceil(t),n=Math.floor(n),Math.floor(a*(n-t+1))+t}function Se(e){return De(e).next()}function je(e,t){return Se(e)<=t}function Ce(e,t){return 1==t.length?t[0]:t[function(e,t){return Ne(e,0,t-1)}(e,t.length)]}function Ie(e){return Ce(e,["prog","trad"])}function _e(e){return Ce(e,["state","ego"])}function Me(e){return Ce(e,["rocket","music","dragon","noFaith"])}Math.PI;var Oe=["New ","Old ","Fort ","St. ","Mount ","Grand ","","","","","","","","","",""],Be=["Spring","Timber","Over","West","East","North","South","Rock","Sand","Clay","Iron","Ore","Coal","Liver","Hawk","Red","Yellow","Gold","Blue","Black","White","Sunny","Reed","Ox","Mill","Fern","Down","Bel","Bald","Ash"],Te=["water "," Springs","ville","dale","lane","peak","coast","beach","port","market","ton","brook"," Creek","land","burgh","bridge","ford","bury","chester","son","vale"," Valley","hill","more","wood"," Oaks"," Cove","mouth","way","crest"];function Pe(){return Object(T.a)(Object(T.a)({},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=260*(e-.5);return{numberOfRings:e,hexes:Y({q:0,r:0},e),hex_size:Object(T.a)({},Ee),petriRadius:t,petriOrigin:{x:t,y:t}}}()),{},{key:0,name:"string",deadBeanKeys:[],beanKeys:[],ufoKeys:[],pickupKeys:[],buildingKeys:[],pickupMagnetPoint:void 0,costOfLiving:0,buildingMap:{},districtKeys:[]})}function Ae(e){var t=we([]);return{ds:we(e.hexes.map((function(n,a){var i=0===n.q&&0===n.r,r=function(e,t,n){return{kind:e,key:0,q:n.q,r:n.r,hexString:n.q+","+n.r,point:ue(t.hex_size,t.petriOrigin,n),lots:[]}}(i?"urban":"fallow",e,n);return r.key=a+1,e.districtKeys.push(r.key),i&&qe(r,t,"urban"),r}))),lots:t}}var Ge=[{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],Le=[{q:1,r:-1},{q:0,r:1},{q:-1,r:0}];function qe(e,t,n){("rural"===n?Le:Ge).forEach((function(a,i){if(null==e.lots[i]){var r={key:0,kind:n,districtKey:e.key,point:ue({x:50,y:50},e.point,a)};xe(t,r),e.lots.push(r.key)}}))}function He(e,t,n,a,i){var r,l={key:e.beans.nextID++,cityKey:t.key,name:"",ethnicity:(r=e.seed,Ce(r,["circle","square","triangle"])),community:_e(e.seed),ideals:Ie(e.seed),faith:Me(e.seed),stamina:"awake",health:"fresh",food:"sated",discrete_food:3,discrete_health:2,discrete_sanity:10,discrete_stamina:7,discrete_fun:0,housing:"homeless",graceTicks:0,dob:{year:e.date.year,season:e.date.season,day:e.date.day,hour:e.date.hour},sanity:"sane",beliefs:[],lifecycle:"alive",hedonHistory:[{},{},{},{},{}],priorities:[],job:"jobless",happiness:{flatAverage:0,all:{},maxSource:"",minSource:"",weightedAverage:0},lastHappiness:0,hedonFiveDayRecord:{max:0,min:0},fairGoodPrice:0,bornInPetri:null!=n,cash:3,ticksSinceLastSale:0,ticksSinceLastRelax:0,lastChatMS:0,action:"idle",actionData:{act:"idle"},activity_duration:{buy:0,chat:0,craze:0,crime:0,idle:0,relax:0,sleep:0,soapbox:0,travel:0,work:0}};l.name=Ce(e.seed,["Joe","Frank","Jill","Jose","Johnny","Isabelle","Carmen","Ace","Carl","Zander","Jean","Anne","Leslie","Ben","Ron","Ellen","Dallas","Kane","Ash","Jim","James","Leonard","Nyota","Christine","Scotty","Tasha","Geordi","Beverly","Deanna","Wesley","Majel","Malcolm","River","Luke","Han","Owen","Rey","Mace","Cody","Dana","Walter","Rick","Holden","Roy","Pris","Eldon","Rachael","Rose","Donna","Jack","Amy","Rory","Martha","Clara","Arnold","Dave","Holly","Kara","Gaius","William","Lee","Laura","Saul","Max","Edison","Theora","Bryce","Murray","Ned","Daniel","Samantha","Logan","Francis","Jessica","Thomas","Benny","James","John Henry","Sarah","Piper","Nick","Shaun","Preston"])+" ",l.name+=Ce(e.seed,["Ripley","Bishop","Hicks","Vasquez","Hudson","Rico","Flores","Ibanez","Levy","Jenkins","Barlow","Zim","Rasczak","Kirk","McCoy","Sulu","Uhura","Chekov","Chapel","Rand","Riker","Crusher","Barret","O'Brien","Reynolds","Tam","Scully","Mulder","Skinner","Connor","Rex","Thrace","Baltar","Smith","Adama","Roslin","Tigh","Song","Oswald","Deckard","Bryant","Tyrell","Sebastian","Voight","Kampff","Tyler","Harkness","Jones","Noble","Pond","Williams","Rimmer","Lister","Head","Carter","Lynch","McKenzie","Grossberg","O'Neil","Jackson","Carter","Whitmore","House","Mitchell","Eden","Lyons","Valentine","Garvey"]);for(var c=Math.ceil(3*Math.random());l.beliefs.length<c;){var o=Ce(e.seed,z);l.beliefs.includes(o)||l.beliefs.push(o)}return n&&(l.ethnicity=n.ethnicity,l.name=l.name.split(" ")[0]+" "+n.name.split(" ")[1],l.cash=n.cash/2,n.cash/=2),l}function Fe(e,t){return Array.isArray(e)?e.some((function(e){return Re(e,t)})):Re(e,t)}function Re(e,t){return t[e]}function ze(e){return L[e].icon+" "+L[e].noun}var We={food_aid:{key:"food_aid",group:"Welfare",name:"Food Aid",axis:"wel_food",icon:"\ud83d\udc68\u200d\ud83c\udf3e",description:"The government buys Hungry Subjects food.",prereqs:[["Gluttony","Parochialism"],["Charity","Socialism"]]},medical_aid:{key:"medical_aid",group:"Welfare",name:"Med Aid",axis:"wel_health",icon:"\ud83d\udc69\u200d\u2695\ufe0f",description:"The government buys Sick Subjects medicine.",prereqs:["Charity","Cosmopolitanism"]},poll_tax:{key:"poll_tax",group:"Taxation",name:"Head Tax",axis:"tax_basic",prereqs:[],icon:"\ud83d\udc51",description:"Subjects must pay a flat tax."},sales_tax:{key:"sales_tax",group:"Taxation",name:"Sales Tax",axis:"tax_basic",prereqs:[],icon:"\ud83d\udcb8",description:"Subjects must pay a percentage tax for every transaction."},death_tax:{key:"death_tax",group:"Taxation",name:"Death Tax",axis:"tax_second",prereqs:[],icon:"\u2620\ufe0f",description:"Dead subjects pay a portion of their cash to the government."}};function Je(e,t){var n;return(null===(n=e.lawTree[We[t].axis])||void 0===n?void 0:n.key)===t}function Ue(e,t,n){if(void 0!=(a=t).food&&void 0!=a.sick)switch(n){case"food":return("starving"===t.food||"hungry"===t.food)&&Je(e,"food_aid");case"medicine":return("sick"===t.health||"sickly"===t.health)&&Je(e,"medical_aid")}var a;return!1}function Ze(e,t){return e.cash>=t}function Ve(e,t){return"rural"===t?dt(e,"Parochialism")?1:dt(e,"Cosmopolitanism")?-1:0:"urban"===t?dt(e,"Parochialism")?-1:dt(e,"Cosmopolitanism")?1:0:0}var $e=["food","medicine","fun"];function Xe(e,t,n,a,i,r,l){Qe(e,t,n,a);var c=t.price*a,o=c*l,s=c+o;return i.cash-=s,r.cash+=c,r.ticksSinceLastSale=0,{bought:a,price:c,tax:o}}function Ye(e,t,n,a,i,r){Qe(e,n,a,i);var l=n.price*i,c=l;return t.cash-=c,r.cash+=l,r.ticksSinceLastSale=0,{bought:i,price:l,tax:0}}function Qe(e,t,n,a){t.quantity-=a,t.quantity<=0&&e.listings[n].splice(0,1)}function et(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;e.monthlyDemand[a]+=l;var c=at(e.market,a,r);if(null!=c){var o=Math.min(c.quantity,l),s=Je(t,"sales_tax")?.05:0;if(c.price*(1+s)<=n.cash*o){var u=Xe(e.market,c,a,o,n,i(c),s);return u.tax&&(t.cash+=u.tax),u}if(Ue(t,n,a)&&Ze(t,c.price))return Ye(e.market,t,c,a,o,i(c));e.unfulfilledMonthlyDemand[a]+=o}else e.unfulfilledMonthlyDemand[a]+=l}function tt(e,t){var n=e.monthlySupply[t]||1,a=e.monthlyDemand[t];return.25+.75*Math.min(a/n,1)}function nt(e){return tt(e,"food")+tt(e,"medicine")}function at(e,t,n){var a=e.listings[t].filter((function(e){return e.quantity>=n}));if(a.length>0){for(var i=1,r=a[0].price,l=1;l<a.length;l++){if(a[l].price>r)break;i++}var c=Math.floor(Math.random()*i);if(c>=a.length)throw"invalid index";return a[c]}return null}function it(e,t){return{key:0,point:Object(T.a)({},(v.Get("bean",e.key).current||Q).point),type:t,velocity:{x:0,y:0}}}function rt(e,t){return e.discrete_health>=C.abundant?e.health="fresh":e.discrete_health>=C.sufficient?e.health="bruised":e.discrete_health>=C.warning?e.health="sickly":e.health="sick",e.health}function lt(e,t){return e.discrete_stamina<0?e.stamina="sleepy":e.discrete_stamina<=4?e.stamina="awake":e.stamina="rested",e.stamina}function ct(e,t){return e.discrete_sanity>=8?e.sanity="sane":e.discrete_sanity>=5?e.sanity="stressed":e.discrete_sanity>=3?e.sanity="disturbed":e.sanity="psychotic",e.sanity}function ot(e,t){return e.discrete_food>=j.abundant?e.food="stuffed":e.discrete_food>=j.sufficient?e.food="sated":e.discrete_food>=j.warning?e.food="hungry":e.food="starving",e.food}function st(e){if(e.lastChatMS+4e3>Date.now())return!1;if("chat"===e.action)return!1;var t=Math.random(),n="state"===e.community?.2:.1;return dt(e,"Extroversion")&&(n+=.25),dt(e,"Introversion")&&(n+=-.15),t<n}function ut(e,t,n){e.discrete_sanity=W(e.discrete_sanity+B[t],0,10),e.hedonHistory[0][n]=(e.hedonHistory[0][n]||0)+O[t];var a=[it(e,t)];return dt(e,"Hedonism")&&("happiness"===t||"love"===t)&&Math.random()<.1&&a.push.apply(a,Object(b.a)(ut(e,"happiness","Hedonism"))),a}function dt(e,t){return-1!==e.beliefs.indexOf(t)}function mt(e,t,n){return function(e,t){return"alive"===e.lifecycle&&e.cash>3*t&&!bt(e)}(e,n)&&je(t,function(e){var t=.008;dt(e,"Natalism")&&(t+=.04);dt(e,"Antinatalism")&&(t+=-.002);return t}(e))?(dt(e,"Natalism")?ut(e,"love","Natalist Parent"):dt(e,"Antinatalism")?ut(e,"hate","Antinatalism"):ut(e,"happiness","Proud Parent"),{icon:"\ud83c\udf89",trigger:"birth",message:"".concat(e.name," has a baby!"),key:0}):void 0}function yt(e,t,n,a,i){if(a&&Math.random()<=i){if(e.graceTicks<=0)return pt(e,t,n);e.graceTicks--}}function pt(e,t,n){e.lifecycle="dead";var a=Ne(t,2,3),i=new Array(a).map((function(t){return it(e,"hate")}));return{death:{icon:"\u2620\ufe0f",trigger:"death",message:"".concat(e.name," died of ").concat(n,"!"),beanKey:e.key,cityKey:e.cityKey,point:(v.Get("bean",e.key).current||Q).point,key:0},emotes:i}}function ft(e,t){var n=dt(e,"Neuroticism")?2:1;e.discrete_sanity-=n*t}function ht(e){var t;if("chat"===e.action&&("speaker"===(null===(t=e.actionData.chat)||void 0===t?void 0:t.participation)&&e.actionData.chat.preachBelief))return"\ud83d\udcac"+L[e.actionData.chat.preachBelief].icon}function bt(e){return"starving"===e.food||"sick"===e.health}function vt(e,t,n){return void 0===t.sanity||e.discrete_sanity>=t.sanity+n}function gt(e){var t,n;if("dead"===e.lifecycle)return"\ud83d\udc80";if("sleep"===e.actionData.act)return"housed"===e.housing?"\ud83d\ude34":"\ud83e\udd76";if("crime"===e.actionData.act)return"\ud83d\ude08";if("relax"===e.actionData.act)return"\ud83d\ude0e";if("chat"===e.actionData.act){var a;if("speaker"===(null===(a=e.actionData.chat)||void 0===a?void 0:a.participation))switch(null===(t=e.actionData)||void 0===t||null===(n=t.chat)||void 0===n?void 0:n.type){default:return"\ud83d\ude03";case"gift":return"\ud83d\ude07";case"praise":return"\ud83e\udd73";case"bully":return"\ud83d\ude08"}return"\ud83e\udd28"}return"starving"===e.food?"\ud83d\ude2b":"sick"===e.health?"\ud83e\udd22":"jobless"===e.job?"\ud83d\ude27":e.lastHappiness<0?"\u2639\ufe0f":e.lastHappiness>=50?"\ud83d\ude42":"\ud83d\ude10"}function Et(e,t){var n=function(e,t,n){if(je(e,F[t])){for(var a=[],i=function(e){var i=q[e];if(n.find((function(e){return e===i})))return"continue";var r=H[i];"psychotic"===t&&(r*=2);for(var l=0;l<r;l++)a.push(i)},r=0;r<q.length;r++)i(r);return Ce(e,a)}}(e,t.sanity,t.beliefs);if(n)return{beanKey:t.key,newInsanity:n}}var kt=new function e(){Object(c.a)(this,e),this.alienEnergy=new p,this.alienBots=new p,this.alienHedons=new p,this.newTraitSeen=new y,this.events=new y,this.autosave=new y},wt={found_utopia:{key:"found_utopia",text:"Found your Utopia",check:function(e){return e.buildings.allIDs.length>0}},build_house_n_farm:{key:"build_house_n_farm",text:"Build a house and farm",check:function(e){return null!=e.buildings.allIDs.find((function(t){return"farm"==e.buildings.byID[t].type}))&&null!=e.buildings.allIDs.find((function(t){return"house"==e.buildings.byID[t].type}))},reward:{energy:3,bots:3}},beam_3:{key:"beam_3",text:"Beam in 3 new beings",check:function(e){return e.beans.allIDs.filter((function(t){return!e.beans.byID[t].bornInPetri})).length>=3}},scan:{key:"scan",text:"Scan a Subject",check:function(e){return Object.keys(e.alien.scanned_bean).length>0}},set_policy:{key:"set_policy",text:"Set a Gov Policy",check:function(e){return!1}},brainwash:{key:"brainwash",text:"Brainwash a Subject",check:function(e){return!1}},"c+_grade":{key:"c+_grade",text:"Receive a C+ Grade",check:function(e){return!1}}},xt={GradeWorld:function(e){return{Happiness:Dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return e.lastHappiness>-.2})),Prosperity:Dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return"hungry"!==e.food})),Stability:Dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return"sane"===e.sanity})),Dogma:Kt(e.alien.speechcrimes[e.date.year]||0,10,10)}},RubricDescription:{Happiness:"Subjects are at least 20% happy",Prosperity:"Subjects are not hungry",Stability:"Subjects are all sane",Dogma:"Up to 10 Speechcrimes"}};function Kt(e,t,n){return Nt(1-Math.min(1,Math.max(0,e-t)/n))}function Dt(e,t){return e.length<1?"F":Nt(e.filter(t).length/e.length)}function Nt(e){return e<.58?"F":e<.68?"D":e<.78?"C":e<.88?"B":"A"}var St={A:5,B:4,C:3,D:2,F:1};var jt={sanity_bonus:{tech:"sanity_bonus",name:"Surgical Psychops",techPoints:30,description:"Brainwashing causes -1 \ud83e\udde0 Sanity damage"},fast_resources:{tech:"fast_resources",name:"0 Dimensional Supersiphons",techPoints:30,description:"Faster \u26a1\ufe0f and \ud83e\udd16 accumulation"},trauma_nanobots:{tech:"trauma_nanobots",name:"Trauma Nanobots",techPoints:30,description:"Spend \ud83e\udd16 to stop Subject from dying"},neural_duplicator:{tech:"neural_duplicator",name:"Level 2 Neural Duplication",techPoints:30,description:"Copy \ud83e\udde0 Traits 1 additional time"}};function Ct(e,t){t.bots&&(e.bots.amount+=t.bots,kt.alienBots.publish({change:t.bots})),t.energy&&(e.energy.amount+=t.energy,kt.alienEnergy.publish({change:t.energy})),t.hedons&&(e.hedons.amount+=t.hedons,kt.alienHedons.publish({change:t.hedons}))}function It(e,t){return null!=e[t]&&e[t].researchPoints>=jt[t].techPoints}function _t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(void 0===t.bots||e.bots.amount>=t.bots*n)&&(void 0===t.energy||e.energy.amount>=t.energy*n)&&(void 0===t.hedons||e.hedons.amount>=t.hedons*n)}function Mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return!!_t(e,t,n)&&(Ot(e,t,n),!0)}function Ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.bots&&(e.bots.amount-=t.bots*n,kt.alienBots.publish({change:-t.bots*n})),t.energy&&(e.energy.amount-=t.energy*n,kt.alienEnergy.publish({change:-t.energy*n})),t.hedons&&(e.hedons.amount-=t.hedons*n,kt.alienHedons.publish({change:-t.hedons*n}))}var Bt=n(9),Tt=n(12),Pt=n(6),At={apartment:"\ud83d\udeaa",house:"\ud83c\udfe1",townhouse:"\ud83c\udfd8\ufe0f",loft:"\ud83d\udeaa"},Gt=["farm","hospital","theater"];function Lt(e){return function(e){var t=e.upgradedJobs?2:1;return qt[e.type]*t}(e)-e.employeeBeanKeys.length}var qt={church:0,courthouse:0,park:0,house:0,farm:3,hospital:3,theater:3,nature:0};function Ht(e,t){if(null!=e.employerEnterpriseKey){var n=t.buildings.byID[e.employerEnterpriseKey],a=t.enterprises.byID[e.employerEnterpriseKey];a.ownerBeanKey==e.key&&(a.ownerBeanKey=n.employeeBeanKeys.find((function(t){return t!=e.key}))),Ft(n,e)}}function Ft(e,t){"jobless"!==t.job&&function(e,t){var n=e.employeeBeanKeys.length;return e.employeeBeanKeys=e.employeeBeanKeys.filter((function(e){return e!=t})),n===e.employeeBeanKeys.length+1}(e,t.key)&&(t.employerEnterpriseKey=void 0,t.job="jobless")}var Rt={travel:{enter:function(e){},act:function(e,t,n,a){var i=t.cities.byID[e.cityKey],r=e.actionData.destinationIndex||0;if(null==e.actionData.destinations||0===e.actionData.destinations.length||r>=e.actionData.destinations.length)return e.actionData.intent?{newActivity:e.actionData.intent}:{newActivity:{act:"idle"}};var l=e.actionData.destinations[r];if(isNaN(l.x)||isNaN(l.y))return console.warn("NaN destination, resetting to idle"),{newActivity:{act:"idle"}};var c=Object(T.a)({},v.Get("bean",e.key).current||Q),o=ee(c,l,K*(dt(e,"Catatonia")?.4:1)*a/1e3,D,N,x);if(v.Get("bean",e.key).publish(c),o)return{action:la({beanKey:e.key})};if(i){var s=function(e,t){var n=v.Get("bean",t.key).current;return n?e.beanKeys.filter((function(e){if(e==t.key)return!1;var a=v.Get("bean",e).current;if(!a)return!1;var i=Math.pow(a.point.x-n.point.x,2)+Math.pow(a.point.y-n.point.y,2);return i<1600&&i>600})):[]}(i,e);if(s.length&&st(e)){var u=s.filter((function(e){return st(t.beans.byID[e])}));if(u.length<1)return{};var d=function(e,t,n){if(e.beliefs.length){if(dt(e,"Charity")&&e.cash>=2){var a=n();if(a)return{participation:"speaker",type:"gift",targetBeanKey:a.key}}else{if(dt(e,"Enthusiasm")&&Math.random()<.45)return{participation:"speaker",type:"praise",preachBelief:"Enthusiasm"};if(dt(e,"Antagonism")&&Math.random()<.45)return{participation:"speaker",type:"bully",preachBelief:"Antagonism"};if(dt(e,"Gossip")&&Math.random()<.35)return{participation:"speaker",type:"bully",preachBelief:"Gossip"}}return{participation:"speaker",type:"preach",preachBelief:Ce(t,e.beliefs),persuasionStrength:1+(dt(e,"Charisma")?2:0)}}return{participation:"speaker",type:"praise"}}(e,t.seed,(function(){return u.map((function(e){return t.beans.byID[e]})).filter((function(t){return t.cash<=e.cash-1})).reduce((function(e,t){return null==e||t.cash<e.cash?t:e}),void 0)}));return{newActivity:{act:"chat",chat:d,intent:e.actionData},action:u.map((function(e){return ia({beanKey:e,newState:{act:"chat",chat:Object(T.a)(Object(T.a)({},d),{},{participation:"listener"}),intent:t.beans.byID[e].actionData}})}))}}if(dt(e,"Wanderlust")&&Math.random()<Ut)return{action:ra({beanKey:e.key,emote:"happiness",source:"Wanderlust"})}}return{}},exit:function(e){}},work:{enter:function(e){},act:function(e,t,n){return n>3e3&&e.actionData.good?{action:ca({beanKey:e.key}),newActivity:{act:"idle"}}:{}},exit:function(e){}},sleep:{enter:function(e){if("homeless"===e.housing)return ra({beanKey:e.key,emote:"unhappiness",source:"Homelessness"})},act:function(e,t,n){return n>3e3?{newActivity:{act:"idle"}}:{}},exit:function(e){}},chat:{enter:function(e){},act:function(e,t,n){return n>1e3&&e.actionData.intent?{newActivity:{act:"travel",intent:e.actionData.intent}}:{}},exit:function(e,t){if(e.actionData.chat&&"listener"===e.actionData.chat.participation)switch(e.actionData.chat.type){case"bully":return ra({beanKey:e.key,emote:"unhappiness",source:"Antagonism"});case"praise":return ra({beanKey:e.key,emote:"happiness",source:"Enthusiasm"});case"preach":if(e.actionData.chat.preachBelief&&e.actionData.chat.persuasionStrength&&function(e,t,n,a){if(dt(e,"Dogmatism"))return!1;if(!e.beliefs.includes(n)){var i=10+Ne(t,1,6);return i+=e.beliefs.length-2,Ne(t,1,20)+a>i}return!1}(e,t,e.actionData.chat.preachBelief,e.actionData.chat.persuasionStrength))return da({beanKey:e.key,belief:e.actionData.chat.preachBelief})}}},soapbox:{enter:function(e){},act:function(e){return{}},exit:function(e){}},craze:{enter:function(e){},act:function(e){return{}},exit:function(e){}},idle:{enter:function(e){},act:function(e,t,n){if(n<200)return{};for(var a=e.priorities.slice(0),i=a[0],r=void 0,l=void 0;i&&null==r;){var c=zt(e,t,i);if(null===c||void 0===c?void 0:c.intent){if(null!=(r=Jt(e,t.cities.byID[e.cityKey],c.intent,t)))return{newActivity:r,action:l}}else(null===c||void 0===c?void 0:c.sideEffect)&&(l=c.sideEffect);i=a.shift()}return{action:l}},exit:function(e){if(function(e){if(dt(e,"Paranoia")&&Math.random()<.05)return!0}(e))return ra({beanKey:e.key,emote:"unhappiness",source:"Paranoia"})}},buy:{enter:function(e){},act:function(e,t,n){if(e.actionData.buyReceipt){if(n>750)return{newActivity:{act:"idle"}}}else{if(n>1100)return{newActivity:{act:"idle"}};if((e.actionData.buyAttempts||0)>=3)return{newActivity:{act:"idle"}};if(n>100&&e.actionData.good)return{action:sa({beanKey:e.key,good:e.actionData.good})}}return{}},exit:function(e){}},crime:{enter:function(e){},act:function(e,t,n){return n>1500?{newActivity:{act:"idle"},action:ua({beanKey:e.key,good:e.actionData.crimeGood||"food"})}:{}},exit:function(e){}},relax:{enter:function(e){},act:function(e,t,n){var a=3e3;return dt(e,"Naturalism")&&(a*=3),n>a?{newActivity:{act:"idle"}}:{}},exit:function(e){return oa({beanKey:e.key})}}};function zt(e,t,n){if("buy"===n.act&&null!=n.good){var a=function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=at(e.market,a,i);if(null==l)return"nosupply";var c=Math.min(l.quantity,r);return l.price<=n.cash*c||Ue(t,n,a)&&Ze(t,l.price)?"yes":"pricedout"}(t.economy,t.law,e,n.good);return"yes"!=a&&"fun"===n.good?{intent:{act:"relax"}}:"pricedout"===a?"food"!=n.good&&"medicine"!=n.good||!function(e,t){if("fun"===t)return!1;var n=Math.random(),a=.05;return"ego"===e.community&&(a+=.1),bt(e)&&(a+=.1),dt(e,"Greed")&&(a+=.25),dt(e,"Anarchism")&&(a+=.33),dt(e,"Authority")&&(a+=-.25),("food"===t&&"starving"===e.food||"medicine"===t&&"sick"===e.health)&&(a+=.25),a<=n}(e,n.good)?"food"===n.good||"medicine"===n.good?{sideEffect:ra({beanKey:e.key,emote:"unhappiness",source:_[n.good]+" Poverty"})}:void 0:{intent:{act:"crime",crimeGood:n.good}}:"nosupply"===a?n.good&&function(e,t){var n=!1;return("food"!==t||"starving"!==e.food&&"hungry"!==e.food)&&("medicine"!==t||"sick"!==e.health&&"sickly"!==e.health)||(n=!0),n}(e,n.good)?{sideEffect:ra({beanKey:e.key,emote:"unhappiness",source:"Scarcity"})}:void 0:{intent:Object(T.a)(Object(T.a)({},n),{},{buyAttempts:0})}}return{intent:n}}function Wt(e,t,n,a){switch(n.act){case"buy":if(n.good)return en(t,a,e,be[n.good]);case"sleep":if(void 0!==e.dwellingKey){var i=a.dwellings.byID[e.dwellingKey],r=a.buildings.byID[i.buildingKey],l=a.lots.byID[r.lotKey],c=a.districts.byID[l.districtKey];return nn(a.seed,t,e,{q:c.q,r:c.r},l.point)}return function(e,t,n){var a=function(e,t){var n=e.buildingKeys.filter((function(e){return"house"!==t.buildings.byID[e].type}));if(!(n.length<1)){var a=Ce(t.seed,n);return t.buildings.byID[a]}}(e,t);return void 0===a?null:tn(t.seed,e,n,a)}(t,a,e);case"work":return en(t,a,e,ve[e.job]);case"relax":var o=function(e,t){var n=e.buildingKeys.filter((function(e){return"nature"===t.buildings.byID[e].type||"park"===t.buildings.byID[e].type||"theater"===t.buildings.byID[e].type}));if(!(n.length<1)){var a=Ce(t.seed,n);return t.buildings.byID[a]}}(t,a);if(o)return tn(a.seed,t,e,o);var s=a.districts.allIDs.map((function(e){return a.districts.byID[e]})).find((function(e){return"nature"===e.kind}));if(s)return nn(a.seed,t,e,{q:s.q,r:s.r},{x:s.point.x+150*Math.random()-75,y:s.point.y+150*Math.random()-75})}return[]}function Jt(e,t,n,a){var i=Wt(e,t,n,a);return i?{act:"travel",destinations:i,destinationIndex:0,intent:n}:void 0}var Ut=.002,Zt=function(e,t,n){var a=dt(e,"Delirium")?.25:.125;return"jobless"==e.job||dt(e,"Catatonia")?0:0===e.cash?J(t,.75,a):n?J(t,.5+(Math.min(1,n.costOfLiving/e.cash),a)):J(t,.5,a)},Vt=function(e,t,n){var a=dt(e,"Delirium")?.25:.125;return J(t,.5+(Math.min(1,n.bean_life.vital_thresh.food.warning/e.discrete_food),a))},$t=function(e,t,n){var a=dt(e,"Delirium")?.25:.125;return J(t,.5+(Math.min(1,n.bean_life.vital_thresh.shelter.warning/e.discrete_stamina),a))},Xt=function(e,t,n){var a=dt(e,"Delirium")?.25:.125;return J(t,.5+(Math.min(1,n.bean_life.vital_thresh.medicine.warning/e.discrete_health),a))},Yt=function(e,t,n){var a=dt(e,"Delirium")?.25:.125;return J(t,.5+(Math.min(1,-e.lastHappiness/100),a))};function Qt(e,t,n,a){var i=[{act:"work",good:I(e.job),priority:Zt(e,t,n)},{act:"sleep",priority:$t(e,t,a)},{act:"buy",good:"food",priority:Vt(e,t,a)},{act:"buy",good:"medicine",priority:Xt(e,t,a)},{act:"buy",good:"fun",priority:Yt(e,t,a)}];return i.sort((function(e,t){return t.priority-e.priority})),i}function en(e,t,n,a){var i=function(e,t,n){var a=e.buildingKeys.filter((function(e){return t.buildings.byID[e].type===n}));if(!(a.length<1)){var i=Ce(t.seed,a);return t.buildings.byID[i]}}(e,t,a);return void 0===i?null:tn(t.seed,e,n,i)}function tn(e,t,n,a){return nn(e,t,n,a.hex,a.point)}function nn(e,t,n,a,i){var r,l,c=v.Get("bean",n.key).current||Object(T.a)({},Q),o=function(e,t,n){var a=se,i=(n.x-t.x)/e.x,r=(n.y-t.y)/e.y,l=a.b0*i+a.b1*r,c=a.b2*i+a.b3*r;return new U(l,c)}(t.hex_size,t.petriOrigin,c.point);return(r=o,l=a,ce(le(r),le(l))).map((function(e){return ue(t.hex_size,t.petriOrigin,e)})).map((function(t,n,a){return n===a.length-1?{x:i.x+Ne(e,-20,20),y:i.y+Ne(e,-20,20)}:t}))}var an=new(function(){function e(){Object(c.a)(this,e),this.cache={bean:{},ufo:{}}}return Object(o.a)(e,[{key:"Get",value:function(e,t){return this.cache[e][t]||(this.cache[e][t]={elapsed:0,duration:0}),this.cache[e][t]}}]),e}());function rn(e,t){var n=e.cities.byID[t.cityKey],a=n.buildingKeys.filter((function(t){return Lt(e.buildings.byID[t])>0}));if(a.length<1)return!1;var i=a.map((function(t){return e.buildings.byID[t]})),r=i.map((function(n){return{ideologyBonus:Ve(t,e.districts.byID[e.lots.byID[n.lotKey].districtKey].kind),isEmpty:0===n.employeeBeanKeys.length,openJobs:Lt(n),building:n}}));if(r.sort((function(e,t){return e.isEmpty!=t.isEmpty?e.isEmpty?-1:1:e.ideologyBonus!=t.ideologyBonus?e.ideologyBonus-t.ideologyBonus:e.openJobs-t.openJobs})),r.length>0){var l=r[0].building;return null!=t.employerEnterpriseKey&&Ft(e.buildings.byID[t.employerEnterpriseKey],t),ln(t,l,e.enterprises.byID[l.key]),!0}return!1}function ln(e,t,n){t.employeeBeanKeys.push(e.key),e.employerEnterpriseKey=t.key,n&&null==n.ownerBeanKey&&(n.ownerBeanKey=e.key),e.job=ge[t.type]}var cn,on="drop.mp3",sn="ding_soft.mp3",un="ding_bad.wav",dn="death_bell.wav",mn="digital_beeping.mp3",yn="squish_pop.mp3",pn="squish_suck.mp3",fn="baby_squeak.wav",hn="mhmm.mp3",bn="pill-shake.wav",vn="cow-moo.wav",gn="door-open.wav",En="teleport.wav",kn="cash_ding.mp3",wn="crazy_laugh.mp3",xn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(c.a)(this,e),this.file=t,this.volume=n,this.buffer=[]}return Object(o.a)(e,[{key:"play",value:function(){if(this.buffer.length>0&&this.buffer[0].ended){var e=this.buffer.shift();null===e||void 0===e||e.play(),e&&this.buffer.push(e)}else{var t=new Audio("/socsim/"+this.file);t.volume=this.volume,t.play(),this.buffer.push(t)}}}]),e}(),Kn=new(function(){function e(){Object(c.a)(this,e),this.lib={drop:new xn(on,.2),love:new xn(sn),happiness:new xn(sn),unhappiness:new xn(un),hate:new xn(un),death:new xn(dn),scan:new xn(mn,.3),wash_in:new xn(yn),wash_out:new xn(pn),squeak:new xn(fn,.3),mhmm:new xn(hn,.5),moo:new xn(vn,1),pills:new xn(bn,1),door:new xn(gn,1),teleport:new xn(En,.6),cash:new xn(kn,.23),crazy_laugh:new xn(wn,.5)}}return Object(o.a)(e,[{key:"play",value:function(e){this.lib[e].play()}}]),e}()),Dn={common:3,uncommon:5,rare:7,unique:99},Nn={common:3,uncommon:5,rare:7,unique:99};function Sn(e,t){var n=L[t].rarity;return{trait:t,cost:{hedons:Dn[n]+Ne(e,0,Nn[n])}}}!function(e){e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Fall=2]="Fall",e[e.Winter=3]="Winter"}(cn||(cn={}));var jn;!function(e){e[e.Midnight=0]="Midnight",e[e.Morning=2]="Morning",e[e.Noon=4]="Noon",e[e.Evening=6]="Evening"}(jn||(jn={}));function Cn(e){if(e.date.hour++,e.date.hour%2===0&&function(e){e.enterprises.allIDs.forEach((function(t){var n=e.enterprises.byID[t],a=e.buildings.byID[t].employeeBeanKeys.map((function(t){return e.beans.byID[t]}));switch(n.enterpriseType){case"company":if(a.length<1);else if(1===a.length)a[0].cash+=n.cash,n.cash>0&&(a[0].ticksSinceLastSale=0),n.cash=0;else{var i=n.cash/(a.length+.15);n.cash=0;var r=a.find((function(e){return e.key===n.ownerBeanKey}));null==r&&(r=a[0],n.ownerBeanKey=r.key),a.forEach((function(e){var t=e===r?1.15*i:i;e.cash+=t,t>0&&(e.ticksSinceLastSale=0)}))}break;case"co-op":var l=n.cash/a.length;n.cash=0,a.forEach((function(e){e.cash+=l,l>0&&(e.ticksSinceLastSale=0)}));break;case"commune":var c=n.cash/a.length;n.cash=0,a.forEach((function(e){e.cash+=c,c>0&&(e.ticksSinceLastSale=0)}))}}))}(e),e.date.hour>=8&&(e.date.hour=0,e.date.day++,function(e){e.beans.allIDs.forEach((function(t){var n=e.beans.byID[t];n.hedonHistory.length>=5&&n.hedonHistory.pop(),n.hedonHistory.unshift({})}))}(e),e.date.day%7===0&&function(e){if(e.marketTraitsForSale=function(e){for(var t=[],n=0;n<3;n++){var a=Ce(e,z);t.push(Sn(e,a))}return t}(e.seed),In(e,{key:0,message:"New traits in the Emotion Market!",icon:"\ud83d\udecd\ufe0f",trigger:"marketrefresh"}),Je(e.law,"poll_tax")){var t=0;e.cities.allIDs.forEach((function(n){Na(e,n).forEach((function(e){e.cash>=.1&&(e.cash-=.1,t+=.1)}))})),e.law.cash=e.law.cash+t}!function(e,t){var n=1*t.length;if(e.cash>n){var a=(e.cash-n)/t.length;e.cash=n,t.forEach((function(e){return e.cash+=a}))}}(e.law,Object.values(e.beans.byID))}(e)),e.date.day>30&&(e.date.day=1,function(e){e.economy.unfulfilledMonthlyDemand={food:0,medicine:0,fun:0},e.economy.monthlyDemand={food:0,medicine:0,fun:0},e.economy.monthlySupply={food:0,medicine:0,fun:0}}(e),e.date.season++),e.date.season>3&&(e.date.year++,function(e){!function(e){var t=e.beans.allIDs.reduce((function(t,n){return t.push(e.beans.byID[n]),t}),[]),n=t.reduce((function(e,t){return e+t.cash}),0)/100,a=Math.round(1*n);if(a>0){var i=t.reduce((function(e,t){return t.cash>e.max&&(e.winner=t,e.max=t.cash),e}),{max:0});i.winner&&(i.winner.cash+=a)}}(e)}(e),e.date.season=0),e.alien.bots.amount+=e.alien.bots.income,e.alien.energy.amount+=e.alien.energy.income,It(e.alien.techProgress,"fast_resources")&&(e.alien.bots.amount+=.5*e.alien.bots.income,e.alien.energy.amount+=.5*e.alien.energy.income),e.alien.currentlyResearchingTech){var t=e.alien.currentlyResearchingTech;null==e.alien.techProgress[t]&&(e.alien.techProgress[t]={researchPoints:0});var n=jt[t].techPoints,a=e.alien.techProgress[t].researchPoints;a<n&&(e.alien.techProgress[t].researchPoints+=1*e.alien.abductedBeanKeys.length/8),a>=n&&("neural_duplicator"===e.alien.currentlyResearchingTech&&e.alien.beliefInventory.forEach((function(e){return e.gems+=1})),e.alien.currentlyResearchingTech=void 0)}var i=nt(e.economy);return e.beans.allIDs.forEach((function(t,n){var a=e.beans.byID[t];if("alive"==a.lifecycle){var r=function(e,t,n){if("alive"==e.lifecycle){var a=[],i="starving"!==e.food,r="sick"!==e.health;e.discrete_food-=n.bean_life.degrade_per_tick.food,e.discrete_food<0&&(e.discrete_health-=n.bean_life.penalty.starving_health),ot(e);var l=yt(e,t,"starvation","starving"===e.food,.6);if(l)return l;"starving"===e.food&&i&&(a.push.apply(a,Object(b.a)(ut(e,"unhappiness","Starving"))),dt(e,"Gluttony")&&(a.push.apply(a,Object(b.a)(ut(e,"unhappiness","Gluttony"))),a.push.apply(a,Object(b.a)(ut(e,"unhappiness","Gluttony"))))),e.discrete_stamina-=n.bean_life.degrade_per_tick.stamina,lt(e),e.discrete_health-=n.bean_life.degrade_per_tick.health,e.discrete_health=Math.min(e.discrete_health,3),rt(e);var c=yt(e,t,"sickness","sick"===e.health,.4);return c||("sick"===e.health&&r&&(a.push.apply(a,Object(b.a)(ut(e,"unhappiness","Sick"))),dt(e,"Germophobia")&&a.push.apply(a,Object(b.a)(ut(e,"unhappiness","Germophobia")))),e.discrete_fun-=n.bean_life.degrade_per_tick.fun,e.discrete_fun=Math.max(0,e.discrete_fun),bt(e)||(e.graceTicks=W(e.graceTicks+1,0,6)),a.length?{emotes:a}:void 0)}}(a,e.seed,e.alien.difficulty);(null===r||void 0===r?void 0:r.emotes)&&r.emotes.map((function(t){return xe(e.pickups,t)})),(null===r||void 0===r?void 0:r.death)&&(xe(e.events,r.death),Ht(a,e),Kn.play("death"));var l=mt(a,e.seed,i);if(l){var c=He(e,e.cities.byID[a.cityKey],a);a.lastPoint&&(c.lastPoint=a.lastPoint,v.Get("bean",c.key).publish({point:{x:a.lastPoint.x,y:a.lastPoint.y},velocity:{x:0,y:0}})),e.beans.byID[c.key]=c,e.beans.allIDs.push(c.key),e.cities.byID[a.cityKey].beanKeys.push(c.key),In(e,l),Kn.play("squeak")}if("jobless"===a.job)rn(e,a)||In(e,{icon:"\ud83c\udfda\ufe0f",trigger:"nojobslots",message:"A subject cannot find a job; build or upgrade more buildings.",key:0});if(void 0===a.dwellingKey){var o=e.dwellings.allIDs.find((function(t){return void 0===e.dwellings.byID[t].occupantKey}));null!=o&&(e.dwellings.byID[o].occupantKey=a.key,a.dwellingKey=o,a.housing="housed")}a.happiness=function(e){if(0===e.length)return{all:{},flatAverage:0,weightedAverage:0,maxSource:"",minSource:""};for(var t={},n=0,a=0,i=0;i<e.length;i++){for(var r=e[i],l=0,c=Object.keys(r),o=0;o<c.length;o++){var s=c[o];l+=r[s],t[s]||(t[s]=0),t[s]+=r[s]}n+=l/(i+1),a+=l}var u=Object.keys(t);return{flatAverage:a/e.length,weightedAverage:n,maxSource:u.reduce((function(e,n){return t[n]>e.val?{source:n,val:t[n]}:e}),{source:"",val:0}).source,minSource:u.reduce((function(e,n){return t[n]<e.val?{source:n,val:t[n]}:e}),{source:"",val:0}).source,all:t}}(a.hedonHistory)}})),e.cities.allIDs.forEach((function(t){var n,a,i=e.cities.byID[t];n=i,a=e.economy,n.costOfLiving=nt(a)})),e.beans.allIDs.forEach((function(t){var n,a,i=e.beans.byID[t];i&&"alive"==i.lifecycle&&(n=i,a=e.economy,e.alien.difficulty,e.law,n.hedonFiveDayRecord={min:Math.min(n.hedonFiveDayRecord.min,n.happiness.flatAverage),max:Math.max(n.hedonFiveDayRecord.max,n.happiness.flatAverage)},0===n.happiness.flatAverage?n.lastHappiness=0:n.lastHappiness=n.happiness.flatAverage>=0?n.happiness.flatAverage/Math.abs(n.hedonFiveDayRecord.max)*100:n.happiness.flatAverage/Math.abs(n.hedonFiveDayRecord.min)*100,ot(n),rt(n),ct(n),lt(n),"jobless"===n.job?n.fairGoodPrice=1:n.fairGoodPrice=tt(a,I(n.job)))})),function(e,t){for(var n=0;n<t.goals.length;n++){var a=t.goals[n];if(null==t.goalProgress[a]&&(t.goalProgress[a]={done:!1,step:0}),!t.goalProgress[a].done){var i=wt[a].check(e),r=wt[a].reward;t.goalProgress[a].done=i,i&&null!=r&&Ct(t,r)}}}(e,e.alien),function(e,t){t.workingReportCard=xt.GradeWorld(e)}(e,e.alien),e}function In(e,t){for(t.key=e.events.nextID++,e.events.byID[t.key]=t,e.events.allIDs.push(t.key),kt.events.publish(t);e.events.allIDs.length>25;){var n=e.events.allIDs[0];null!=n&&(e.events.allIDs=e.events.allIDs.slice(1),e.events.byID=Object(T.a)({removedID:n},e.events.byID))}}function _n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[];return e.energy&&a.push(t+e.energy*n+" Energy"),e.bots&&a.push(t+e.bots*n+" Bots"),e.hedons&&a.push(t+e.hedons*n+" Hedons"),e.tortrons&&a.push(t+e.tortrons*n+" Antihedons"),a.join(" ")}var Mn={cost:{emptyHex:{build:{house:{energy:1,bots:3},farm:{energy:1,bots:3},theater:{energy:1,bots:4},hospital:{energy:1,bots:4},church:{energy:1,bots:4},courthouse:{energy:999,bots:999},park:{energy:1,bots:4},nature:{energy:1,bots:4}}},hex:{beam:{energy:3},upgrade:{energy:1,bots:4},fallow_2_rural:{bots:1},rural_2_urban:{bots:2},add_loft:{bots:1,energy:1}},bean_brain:{brainwash_ideal:{sanity:4},brainimplant_secondary:{sanity:1},brainwash_secondary:{sanity:2}},bean:{scan:{energy:1},abduct:{bots:3},gift:{},empower:{},vaporize:{energy:2,bots:4},siphon:{}},market:{scrubHedons:{energy:5},resource:{bots:{hedons:6},energy:{hedons:5}},beliefs:{common:{},uncommon:{},rare:{},unique:{}}}},bean_life:{vital_thresh:{food:{warning:.6,sufficient:1,abundant:3},shelter:{warning:2,sufficient:3,abundant:7},medicine:{warning:.6,sufficient:1,abundant:3},fun:{warning:.1,sufficient:1,abundant:3}},degrade_per_tick:{food:1/24,health:1/40,stamina:1/8,fun:1/40},penalty:{homeless_health:1/56,starving_health:1/56},death_chance:{starvation:1/8,sickness:1/8,exposure:1/8,vaporization:1}},report_card_progression:[]};var On=Object(Bt.b)({name:"world",initialState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"abcdef";return{buildings:{byID:{},allIDs:[],nextID:0},enterprises:{byID:{},allIDs:[],nextID:0},cities:we([Pe()]),beans:{byID:{},allIDs:[],nextID:0},ufos:{byID:{},allIDs:[],nextID:0},events:{byID:{},allIDs:[],nextID:0},pickups:{byID:{},allIDs:[],nextID:0},lots:{byID:{},allIDs:[],nextID:0},districts:{byID:{},allIDs:[],nextID:0},titles:{byID:{},allIDs:[],nextID:0},dwellings:{byID:{},allIDs:[],nextID:0},economy:{unfulfilledMonthlyDemand:{food:0,medicine:0,fun:0},monthlyDemand:{food:0,medicine:0,fun:0},monthlySupply:{food:0,medicine:0,fun:0},market:{listings:{food:[],fun:[],medicine:[]}}},law:{cash:0,lawTree:{},laws:[],ticksSinceLastSale:0},date:{year:1,season:cn.Spring,day:1,hour:1},marketTraitsForSale:[],alien:{scanned_bean:{},seenBeliefs:{},beliefInventory:[],speechcrimes:{},abductedBeanKeys:[],energy:{amount:16,income:2/30},bots:{amount:10,income:2/30},hedons:{amount:0,income:0},next_grade:{year:1,season:3,day:1,hour:0},difficulty:Object(T.a)({},Mn),goals:["found_utopia","build_house_n_farm","beam_3","scan","brainwash","set_policy","c+_grade"],goalProgress:{},pastReportCards:[],workingReportCard:{Happiness:"D",Prosperity:"D",Stability:"D",Dogma:"D"},techProgress:{},currentlyResearchingTech:void 0},spotlightEvent:void 0,insanityEvent:void 0,saveSlot:1,seed:e}}(),reducers:{refreshMarket:function(e){},magnetChange:function(e,t){e.cities.byID[t.payload.cityKey].pickupMagnetPoint=t.payload.px},worldTick:function(e){Cn(e)},newGame:function(e,t){var n,a=e.cities.byID[0];e.seed=t.payload.seed,a.name=(n=e.seed,"".concat(Ce(n,Oe)).concat(Ce(n,Be)).concat(Ce(n,Te)));var i=Ae(a);e.districts=i.ds,e.lots=i.lots;var r=Ce(e.seed,e.districts.allIDs.slice(1));e.districts.byID[r].kind="nature"},loadGame:function(e,t){return t.payload.newState.beans.allIDs.map((function(e){var n,a,i=t.payload.newState.beans.byID[e];i&&v.Get("bean",e).publish({point:{x:(null===(n=i.lastPoint)||void 0===n?void 0:n.x)||0,y:(null===(a=i.lastPoint)||void 0===a?void 0:a.y)||0},velocity:{x:0,y:0}})})),t.payload.newState},build:function(e,t){var n=e.alien.difficulty.cost.emptyHex.build[t.payload.what];if(Mt(e.alien,n)){var a=e.lots.byID[t.payload.lot],i=e.districts.byID[a.districtKey];switch(function(e,t,n,a,i,r,l){var c={type:n,key:e.buildings.nextID++,hex:a,point:Object(T.a)({},i),lotKey:r,employeeBeanKeys:[],upgradedLoft:!1,upgradedJobs:!1,upgradedStorage:!1};e.buildings.allIDs.push(c.key),e.buildings.byID[c.key]=c,t.buildingKeys.push(c.key);var o=e.lots.byID[r];if(o.buildingKey=c.key,Gt.some((function(e){return e===n}))&&(c.enterpriseKey=c.key,e.enterprises.allIDs.push(c.key),e.enterprises.byID[c.key]={cash:0,cityKey:t.key,enterpriseType:"company",buildingKey:c.key,key:c.key,ticksSinceLastSale:0}),"house"===n){for(var s="urban"===e.districts.byID[o.districtKey].kind?"townhouse":"house",u=[],d=0;d<3;d++){var m={key:0,buildingKey:c.key,kind:s};xe(e.dwellings,m),u.push(m.key)}c.dwellingKeys=u}var y=he[n];y&&"fun"!=y&&e.economy.market.listings[y].push({price:1,quantity:3,sellerCityKey:t.key,sellerEnterpriseKey:c.key})}(e,e.cities.byID[t.payload.city],t.payload.what,i,a.point,a.key,e.economy),t.payload.what){case"farm":Kn.play("moo");break;case"hospital":Kn.play("pills");break;case"house":Kn.play("door")}}},upgradeDistrict:function(e,t){var n=e.districts.byID[t.payload.district];if(n)if("rural"===("rural"===n.kind?"urban":"rural")){var a=e.alien.difficulty.cost.hex.fallow_2_rural;Mt(e.alien,a)&&(qe(n,e.lots,"rural"),n.kind="rural")}else{var i=e.alien.difficulty.cost.hex.rural_2_urban;Mt(e.alien,i)&&(qe(n,e.lots,"urban"),n.kind="urban")}},changeEnterprise:function(e,t){e.enterprises.byID[t.payload.enterpriseKey].enterpriseType=t.payload.newType},fireBean:function(e,t){Ht(e.beans.byID[t.payload.beanKey],e)},upgrade:function(e,t){var n=e.alien.difficulty.cost.hex.upgrade,a=e.buildings.byID[t.payload.buildingKey];Mt(e.alien,n)&&(a.upgradedJobs=!0)},upgradeLoft:function(e,t){var n=e.alien.difficulty.cost.hex.add_loft,a=e.buildings.byID[t.payload.buildingKey];if(Mt(e.alien,n)){a.upgradedLoft=!0;var i={key:0,buildingKey:t.payload.buildingKey,kind:"loft"};xe(e.dwellings,i),a.dwellingKeys=[i.key]}},upgradeStorage:function(e,t){var n=e.alien.difficulty.cost.hex.upgrade,a=e.buildings.byID[t.payload.buildingKey];Mt(e.alien,n)&&(a.upgradedStorage=!0)},beam:function(e,t){var n=e.alien.difficulty.cost.hex.beam;if(_t(e.alien,n)){Ot(e.alien,n);var a={key:e.ufos.nextID++,action:"beam-in",duration:0,point:Object(T.a)({},t.payload.where),cityKey:t.payload.cityKey};e.ufos.allIDs.push(a.key),e.ufos.byID[a.key]=a,e.cities.byID[t.payload.cityKey].ufoKeys.push(a.key)}},remove_ufo:function(e,t){var n=e.ufos.byID[t.payload.ufoKey],a=He(e,e.cities.byID[0],void 0,n.point);a.priorities=Qt(a,e.seed,e.cities.byID[a.cityKey],e.alien.difficulty),delete e.ufos.byID[t.payload.ufoKey],e.ufos.allIDs=e.ufos.allIDs.filter((function(e){return e!=t.payload.ufoKey})),e.cities.byID[n.cityKey].ufoKeys=e.cities.byID[n.cityKey].ufoKeys.filter((function(e){return e!=t.payload.ufoKey})),e.beans.byID[a.key]=a,e.beans.allIDs.push(a.key),e.cities.byID[n.cityKey].beanKeys.push(a.key),v.Get("bean",a.key).current={point:ue(e.cities.byID[n.cityKey].hex_size,e.cities.byID[n.cityKey].petriOrigin,n.point),velocity:{x:0,y:0}}},abduct:function(e,t){if(Mt(e.alien,e.alien.difficulty.cost.bean.abduct)){var n=e.beans.byID[t.payload.beanKey];if("alive"===n.lifecycle){if(n.lifecycle="abducted",n.employerEnterpriseKey)Ft(e.buildings.byID[n.employerEnterpriseKey],n);e.cities.byID[n.cityKey].beanKeys=e.cities.byID[n.cityKey].beanKeys.filter((function(e){return e!=n.key})),e.alien.abductedBeanKeys.push(n.key)}}},cheatAdd:function(e){e.alien.energy.amount+=10,e.alien.bots.amount+=10,e.alien.hedons.amount+=10},release:function(e){if(e.alien.abductedBeanKeys.length>0){var t=e.alien.abductedBeanKeys.shift();if(null!=t){var n=e.beans.byID[t];n.lifecycle="alive",e.cities.byID[n.cityKey].beanKeys.push(t)}}},washCommunity:function(e,t){},washMotive:function(){},washNarrative:function(e,t){var n=e.beans.byID[t.payload.beanKey];if(vt(n,e.alien.difficulty.cost.bean_brain.brainwash_ideal,0)){ft(n,e.alien.difficulty.cost.bean_brain.brainwash_ideal.sanity||0);for(var a=n.faith;n.faith===a;)n.faith=Ce(e.seed,["rocket","dragon","music","noFaith"])}},washBelief:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=It(e.alien.techProgress,"sanity_bonus")?-1:0;vt(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary,a)&&(ft(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary.sanity||0),n.sanity=ct(n,e.alien.difficulty),n.beliefs.splice(n.beliefs.indexOf(t.payload.trait),1),e.insanityEvent=Et(e.seed,n),e.insanityEvent?(n.beliefs=[].concat(Object(b.a)(n.beliefs),[e.insanityEvent.newInsanity]),Kn.play("crazy_laugh")):Kn.play("wash_out"))},extractBelief:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=It(e.alien.techProgress,"sanity_bonus")?-1:0;if(vt(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary,a)){ft(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary.sanity||0),n.sanity=ct(n,e.alien.difficulty);var i=e.alien.beliefInventory.find((function(e){return e.trait===t.payload.trait})),r=It(e.alien.techProgress,"neural_duplicator")?1:0;i?i.gems+=1+r:e.alien.beliefInventory.push({trait:t.payload.trait,gems:1+r}),e.insanityEvent=Et(e.seed,n),e.insanityEvent?(n.beliefs=[].concat(Object(b.a)(n.beliefs),[e.insanityEvent.newInsanity]),Kn.play("crazy_laugh")):Kn.play("wash_out")}},acknowledgeNewInsanity:function(e){e.insanityEvent=void 0},setResearch:function(e,t){e.alien.currentlyResearchingTech=t.payload.t},implant:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=It(e.alien.techProgress,"sanity_bonus")?-1:0;vt(n,e.alien.difficulty.cost.bean_brain.brainimplant_secondary,a)&&e.alien.beliefInventory.filter((function(e){return e.trait==t.payload.trait&&e.gems>0}))&&(n.beliefs.push(t.payload.trait),function(e,t){var n=e.beliefInventory,a=n.find((function(e){return e.trait===t}));a&&(a.gems-=1,e.beliefInventory=Object(b.a)(n.filter((function(e){return e.gems>0}))))}(e.alien,t.payload.trait),ft(n,e.alien.difficulty.cost.bean_brain.brainimplant_secondary.sanity||0),n.sanity=ct(n,e.alien.difficulty),e.insanityEvent=Et(e.seed,n),e.insanityEvent?(n.beliefs=[].concat(Object(b.a)(n.beliefs),[e.insanityEvent.newInsanity]),Kn.play("crazy_laugh")):Kn.play("wash_in"))},scan:function(e,t){var n=e.beans.byID[t.payload.beanKey];Mt(e.alien,e.alien.difficulty.cost.bean.scan)&&(e.alien.scanned_bean[n.key]=!0,n.beliefs.forEach((function(t){e.alien.seenBeliefs[t]||(e.alien.seenBeliefs[t]=!0,kt.newTraitSeen.publish({k:L[t].noun,v:!0}))})),Kn.play("scan"))},vaporize:function(e,t){if(Mt(e.alien,e.alien.difficulty.cost.bean.vaporize)){var n=e.beans.byID[t.payload.beanKey],a=pt(n,e.seed,"vaporization");xe(e.events,a.death),Ht(n,e),a.emotes.map((function(t){return xe(e.pickups,t)}))}},pickUpPickup:function(e,t){var n=e.pickups.byID[t.payload.pickupKey],a=O[n.type];e.alien.hedons.amount+=a,e.cities.byID[t.payload.cityKey].pickupKeys=e.cities.byID[t.payload.cityKey].pickupKeys.filter((function(e){return e!=t.payload.pickupKey})),e.pickups.allIDs=e.pickups.allIDs.filter((function(e){return e!=t.payload.pickupKey})),delete e.pickups.byID[t.payload.pickupKey],kt.alienHedons.publish({change:a}),Kn.play(n.type)},changeState:function(e,t){var n,a=e.beans.byID[t.payload.beanKey].action,i=e.beans.byID[t.payload.beanKey],r=an.Get("bean",i.key);"chat"===a&&(i.lastChatMS=Date.now()),"sleep"===a&&(i.discrete_stamina=7,lt(i,e.alien.difficulty)),"idle"===t.payload.newState.act&&(i.priorities=Qt(i,e.seed,e.cities.byID[i.cityKey],e.alien.difficulty)),i.activity_duration[a]+=r.elapsed,i.action=t.payload.newState.act,i.actionData=t.payload.newState;var l=null===(n=v.Get("bean",i.key).current)||void 0===n?void 0:n.point;l&&(i.lastPoint=Object(T.a)({},l)),r.elapsed=0},beanHitDestination:function(e,t){var n=e.beans.byID[t.payload.beanKey];null!=n.actionData.destinationIndex&&n.actionData.destinationIndex++},beanBePersuaded:function(e,t){var n=e.beans.byID[t.payload.beanKey];n.beliefs.push(t.payload.belief),In(e,{key:0,icon:"\ud83d\udde3\ufe0f",trigger:"persuasion",message:"".concat(n.name," now believes in ").concat(L[t.payload.belief].icon," ").concat(L[t.payload.belief].noun,"!"),beanKey:n.key,cityKey:n.cityKey,point:n.lastPoint}),Kn.play("mhmm")},beanGiveCharity:function(e,t){var n=e.beans.byID[t.payload.senderBeanKey];n.cash-=.5,Tn(n,e,{emote:"happiness",source:"Charity"});var a=e.beans.byID[t.payload.needyBeanKey];a.cash+=.5,Tn(a,e,{emote:"happiness",source:"Charity"})},beanWork:function(e,t){var n,a=e.beans.byID[t.payload.beanKey];if("jobless"===a.job);else{switch(a.job){case"farmer":a.discrete_food=Math.min(a.discrete_food+1,2*j.sufficient),Bn(e,a,"Parochialism","happiness",.25);break;case"doc":a.discrete_health=Math.min(a.discrete_health+1,2*C.sufficient),Bn(e,a,"Germophobia","unhappiness",.25);break;case"builder":a.stamina="awake",a.discrete_stamina=7;break;case"entertainer":Bn(e,a,"Cosmopolitanism","happiness",.25)}if(Bn(e,a,"Diligence","happiness",.25),Bn(e,a,"Hedonism","unhappiness",.15),a.ticksSinceLastSale++,a.ticksSinceLastSale>8&&null!=a.employerEnterpriseKey)if(e.enterprises.byID[a.employerEnterpriseKey].ownerBeanKey!=a.key&&Math.random()>.5)(n=e.economy,$e.reduce((function(e,t){return n.unfulfilledMonthlyDemand[t]>e.max&&(e.max=n.unfulfilledMonthlyDemand[t],e.job=function(e){switch(e){case"medicine":return"doc";case"fun":return"entertainer";default:case"food":return"farmer"}}(t)),e}),{max:0,job:null}).job)&&(rn(e,a,a.employerEnterpriseKey),a.ticksSinceLastSale=0);var i=!1;if(a.employerEnterpriseKey){var r=e.enterprises.byID[a.employerEnterpriseKey];if(r)switch(function(e,t,n,a,i){e.monthlySupply[n]+=a;var r=e.market.listings[n].find((function(e){return e.sellerEnterpriseKey==t.key}));r?(r.quantity+=a,r.price=i,r.quantity=Math.min(r.quantity,20)):e.market.listings[n].push({sellerEnterpriseKey:t.key,price:i,quantity:a}),e.market.listings[n].sort((function(e,t){return e.price-t.price}))}(e.economy,r,I(a.job),4,a.fairGoodPrice),i=!0,r.enterpriseType){case"company":Bn(e,a,"Communism","unhappiness",.1),r.ownerBeanKey===a.key&&Bn(e,a,"Capitalism","happiness",.1);break;case"co-op":Bn(e,a,"Capitalism","unhappiness",.1),Bn(e,a,"Socialism","happiness",.1);break;case"commune":Bn(e,a,"Capitalism","unhappiness",.1)}}i||function(e,t,n,a,i){e.monthlySupply[n]+=a;var r=e.market.listings[n].find((function(e){return e.sellerBeanKey==t.key}));r?(r.quantity+=a,r.price=i,r.quantity=Math.min(r.quantity,20)):e.market.listings[n].push({sellerBeanKey:t.key,sellerCityKey:t.cityKey,price:i,quantity:a}),e.market.listings[n].sort((function(e,t){return e.price-t.price}))}(e.economy,a,I(a.job),4,a.fairGoodPrice)}},beanEmote:function(e,t){var n=e.beans.byID[t.payload.beanKey];Tn(n,e,t.payload),dt(n,"Hedonism")&&("happiness"===t.payload.emote||"love"===t.payload.emote)&&Math.random()<.1&&Tn(n,e,{emote:"happiness",source:"Hedonism"})},beanCrime:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=Ce(e.seed,e.economy.market.listings[t.payload.good]);if(null==a);else{var i=Math.min(a.quantity,3);if(Qe(e.economy.market,a,t.payload.good,i),null!=i)switch(t.payload.good){case"food":n.discrete_food+=i;break;case"medicine":n.discrete_health+=i}}},beanRelax:function(e,t){var n=e.beans.byID[t.payload.beanKey];n.discrete_fun+=1,Tn(n,e,{emote:"happiness",source:"Relaxation"}),dt(n,"Naturalism")&&Tn(n,e,{emote:"happiness",source:"Naturalism"})},enactLaw:function(e,t){var n=We[t.payload.lawKey];e.law.lawTree[n.axis]=n},repealLaw:function(e,t){var n=We[t.payload.lawKey];delete e.law.lawTree[n.axis]},buyBots:function(e,t){var n=e.alien.difficulty.cost.market.resource.bots;Mt(e.alien,n,t.payload.amount)&&(e.alien.bots.amount+=t.payload.amount)},buyEnergy:function(e,t){var n=e.alien.difficulty.cost.market.resource.bots;Mt(e.alien,n,t.payload.amount)&&(e.alien.energy.amount+=t.payload.amount)},scrubHedons:function(e){var t=e.alien.difficulty.cost.market.scrubHedons;if(Mt(e.alien,t)){e.alien.hedons.amount;e.alien.hedons.amount=0}},buyTrait:function(e,t){if(Mt(e.alien,t.payload.l.cost)){var n=e.alien.beliefInventory.find((function(e){return e.trait===t.payload.l.trait}));n?n.gems+=3:e.alien.beliefInventory.push({trait:t.payload.l.trait,gems:3})}},beanBuy:function(e,t){var n,a,i,r,l=e.beans.byID[t.payload.beanKey],c=function(t){return null!=t.sellerEnterpriseKey?e.enterprises.byID[t.sellerEnterpriseKey]:t.sellerBeanKey?e.beans.byID[t.sellerBeanKey]:e.law};switch(t.payload.good){case"food":(null===(n=r=et(e.economy,e.law,l,"food",c,.5,3))||void 0===n?void 0:n.bought)&&(l.discrete_food+=r.bought,"stuffed"===l.food&&(Tn(l,e,{emote:"happiness",source:"Stuffed"}),Bn(e,l,"Gluttony","happiness",1)));break;case"medicine":(null===(a=r=et(e.economy,e.law,l,"medicine",c,.5,3))||void 0===a?void 0:a.bought)&&(l.discrete_health+=r.bought,"fresh"===l.health&&Tn(l,e,{emote:"happiness",source:"Robust"}));break;case"fun":(null===(i=r=et(e.economy,e.law,l,"fun",c))||void 0===i?void 0:i.bought)&&(l.discrete_fun=1,Tn(l,e,{emote:"happiness",source:"Entertainment"}),Tn(l,e,{emote:"happiness",source:"Entertainment"}))}l.actionData.buyAttempts=(l.actionData.buyAttempts||0)+1,r&&(Kn.play("cash"),r.tax&&(Bn(e,l,"Libertarianism","unhappiness",.1),Bn(e,l,"Progressivism","happiness",.1)),l.actionData.buyReceipt=r)},addTitle:function(e,t){xe(e.titles,{key:0,name:"Title",privileges:[]})},editTitle:function(e,t){var n=e.titles.byID[t.payload.newT.key];e.titles.byID[t.payload.newT.key]=t.payload.newT,n&&n.badge!=t.payload.newT.badge&&e.beans.allIDs.forEach((function(a){e.beans.byID[a].titleKey===n.key&&(e.beans.byID[a].badge=t.payload.newT.badge)})),n&&n.headwear!=t.payload.newT.headwear&&e.beans.allIDs.forEach((function(a){e.beans.byID[a].titleKey===n.key&&(e.beans.byID[a].hat=t.payload.newT.headwear)}))},manualSave:function(e){h.SaveGame(e)},beanSetTitle:function(e,t){var n=e.beans.byID[t.payload.beanKey];n.titleKey=t.payload.titleKey;var a=e.titles.byID[t.payload.titleKey];n.badge=a.badge,n.hat=a.headwear}}});function Bn(e,t,n,a,i){dt(t,n)&&Math.random()<i&&Tn(t,e,{emote:a,source:n})}function Tn(e,t,n){e.discrete_sanity=W(e.discrete_sanity+B[n.emote],0,10),e.hedonHistory[0][n.source]=(e.hedonHistory[0][n.source]||0)+O[n.emote];var a=v.Get("bean",e.key).current||Q,i={key:t.pickups.nextID++,point:{x:a.point.x,y:a.point.y},type:n.emote,velocity:{x:0,y:0}};t.cities.byID[e.cityKey].pickupKeys.push(i.key),t.pickups.byID[i.key]=i,t.pickups.allIDs.push(i.key),v.Get("pickup",i.key).publish({point:{x:a.point.x,y:a.point.y},velocity:{x:0,y:0}})}var Pn=On.actions,An=(Pn.refreshMarket,Pn.magnetChange),Gn=Pn.worldTick,Ln=Pn.remove_ufo,qn=Pn.upgradeDistrict,Hn=Pn.newGame,Fn=Pn.loadGame,Rn=Pn.build,zn=Pn.changeEnterprise,Wn=Pn.fireBean,Jn=Pn.upgrade,Un=Pn.upgradeLoft,Zn=(Pn.upgradeStorage,Pn.beam),Vn=Pn.abduct,$n=Pn.release,Xn=Pn.scan,Yn=Pn.vaporize,Qn=Pn.pickUpPickup,ea=Pn.implant,ta=Pn.washBelief,na=Pn.washNarrative,aa=(Pn.washCommunity,Pn.washMotive,Pn.extractBelief),ia=Pn.changeState,ra=Pn.beanEmote,la=(Pn.beanGiveCharity,Pn.beanHitDestination),ca=Pn.beanWork,oa=Pn.beanRelax,sa=Pn.beanBuy,ua=Pn.beanCrime,da=Pn.beanBePersuaded,ma=Pn.cheatAdd,ya=Pn.manualSave,pa=Pn.addTitle,fa=Pn.editTitle,ha=Pn.beanSetTitle,ba=Pn.acknowledgeNewInsanity,va=Pn.enactLaw,ga=Pn.repealLaw,Ea=Pn.setResearch,ka=Pn.buyBots,wa=Pn.buyEnergy,xa=Pn.buyTrait,Ka=Pn.scrubHedons,Da=function(e,t){return e.cities.byID[t].beanKeys},Na=Object(Tt.a)(Da,(function(e){return e.beans.byID}),(function(e,t){return e.reduce((function(e,n){return e.push(t[n]),e}),[])})),Sa=(Object(Tt.a)(Na,(function(e){var t=e.reduce((function(e,t){switch(t.ethnicity){case"circle":e.circle++;break;case"square":e.square++;break;case"triangle":e.triangle++}return e}),{circle:0,square:0,triangle:0});return t.circle>t.square&&t.circle>t.triangle?"circle":t.square>t.circle&&t.square>t.triangle?"square":"triangle"})),On.reducer,function(){return Object(d.b)()}),ja=d.c,Ca=Object(Bt.b)({name:"selected",initialState:{selectedCityKey:void 0,selectedBeanKey:void 0},reducers:{doSelectCity:function(e,t){return{selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:void 0,selectedDistrictKey:void 0,selectedLotKey:void 0}},doSelectDistrict:function(e,t){return{selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:void 0,selectedDistrictKey:t.payload.district,selectedLotKey:void 0}},doSelectLot:function(e,t){return{selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:void 0,selectedDistrictKey:t.payload.district,selectedLotKey:t.payload.lot}},doSelectBuilding:function(e,t){return{selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:t.payload.buildingKey,selectedLotKey:void 0,selectedDistrictKey:void 0}},doSelectBean:function(e,t){return{selectedHexKey:void 0,selectedCityKey:t.payload.cityKey,selectedBeanKey:t.payload.beanKey,selectedBuildingKey:void 0,selectedDistrictKey:void 0,selectedLotKey:void 0}},doSelectNone:function(e){return{selectedBeanKey:void 0,selectedCityKey:void 0,selectedHexKey:void 0,selectedBuildingKey:void 0,selectedDistrictKey:void 0,selectedLotKey:void 0}}}}),Ia=Ca.actions,_a=Ia.doSelectDistrict,Ma=Ia.doSelectNone,Oa=Ia.doSelectBean,Ba=Ia.doSelectCity,Ta=Ia.doSelectBuilding,Pa=Ia.doSelectLot,Aa=Object(Bt.a)({reducer:{world:On.reducer,selected:Ca.reducer},middleware:Object(Bt.c)().concat([function(e){return function(e){return function(t){switch(t.type){case"world/magnetChange":break;default:t.type.startsWith("selected")||h.Dirty.publish(!0)}return e(t)}}}])}),Ga=function(e){return null!=e.selected.selectedCityKey?e.world.cities.byID[e.selected.selectedCityKey]:void 0},La=function(e){return null!=e.selected.selectedBeanKey?e.world.beans.byID[e.selected.selectedBeanKey]:void 0},qa=function(e){if(null!=e.selected.selectedCityKey&&e.world.cities.byID[e.selected.selectedCityKey]&&null!=e.selected.selectedLotKey){var t=e.world.lots.byID[e.selected.selectedLotKey].buildingKey;if(null!=t)return e.world.buildings.byID[t]}},Ha=function(e){return e.world.events.allIDs},Fa=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={confirming:!1},a}return Object(o.a)(n,[{key:"click",value:function(){this.state.confirming?(this.props.onConfirm(),this.setState({confirming:!1})):this.setState({confirming:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("button",{className:this.props.className,onClick:function(){return e.click()},disabled:this.props.disabled},this.state.confirming?this.props.confirmText:this.props.children)}}]),n}(i.a.Component),Ra=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.props.onChange(e.target.value),a.setState({key:e.target.value})},a.state={key:e.value||null},a}return Object(o.a)(n,[{key:"hint",value:function(){if(this.props.hint)return i.a.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},this.props.hint)}},{key:"getTextForOption",value:function(e){return this.props.titleCase&&(e=e[0].toUpperCase()+e.slice(1)),e}},{key:"options",value:function(){var e=this;return this.props.options.map((function(t){return i.a.createElement("option",{value:t,key:t,title:e.getTitleForOption(t)},e.getTextForOption(t))}))}},{key:"render",value:function(){return i.a.createElement("select",{onChange:this.onChange,value:this.state.key,required:null!=this.props.hint},this.hint(),this.options())}},{key:"getTitleForOption",value:function(e){}}]),n}(i.a.Component),za=(n(31),function(e){return i.a.createElement("div",{className:"belief"},i.a.createElement("div",{className:"horizontal badger"},i.a.createElement("div",{className:"vertical"},i.a.createElement("div",{className:"circular"},e.data.icon),e.leftButton),i.a.createElement("div",{className:"vertical"},i.a.createElement("div",{className:"text-center"},e.titleView,e.cost?i.a.createElement("span",{className:"pull-r"},e.cost,"\ud83e\udde0"):null),e.data.description?e.data.description.split(";").map((function(e,t){return i.a.createElement("small",{className:"marg-b-6",key:t}," ",e)})):null,i.a.createElement("div",{className:"grow-1 text-center"},e.bottomView))))}),Wa=function(e){return i.a.createElement("div",{className:"belief"},i.a.createElement("div",{className:"horizontal edit badger"},i.a.createElement("div",{className:"vertical"},i.a.createElement("div",{className:"circular"},e.data.icon)),i.a.createElement("div",{className:"vertical"},i.a.createElement("div",{className:"text-center"},i.a.createElement("strong",{title:e.data.description,className:e.divergent?"divergent marg-r-6":"marg-r-6"},e.data.noun),i.a.createElement("span",{className:"pull-r"},e.cost,"\ud83e\udde0")),i.a.createElement("small",{className:"marg-b-6"},e.data.description),i.a.createElement("div",{className:"grow-1 text-center"}))),i.a.createElement("div",{className:"horizontal"},e.frozen?null:i.a.createElement(Fa,{className:"callout pad-4 marg-0",confirmText:"-"+e.cost.toString()+"\ud83e\udde0?",disabled:e.available<e.cost,onConfirm:e.wash},"\ud83d\udebf ",i.a.createElement("small",null,"Wash Out")),i.a.createElement(Fa,{className:"callout pad-4 marg-0",confirmText:"-"+e.cost.toString()+"\ud83e\udde0?",disabled:e.available<e.cost,onConfirm:e.extract},"\ud83d\udc8e ",i.a.createElement("small",null,"Copy to Gem"))))},Ja=R.slice().sort((function(e,t){return e.localeCompare(t)})),Ua=(i.a.Component,n(32),function(e){var t=ja((function(e){return e.world.alien.beliefInventory})),n=Sa();return i.a.createElement(i.a.Fragment,null,t.map((function(t){return i.a.createElement(za,{key:t.trait,data:L[t.trait],titleView:i.a.createElement("strong",null,L[t.trait].noun),leftButton:i.a.createElement(Fa,{onConfirm:function(){return n(ea({beanKey:e.beanKey,trait:t.trait}))},className:"callout marg-0",confirmText:"-1 \ud83e\udde0?",disabled:t.gems<1||e.dogmatic},"Implant"),bottomView:i.a.createElement("span",null,i.a.createElement("span",{className:"trait-gem"}),"x",t.gems)})})))}),Za=function(){var e=ja(La),t=ja((function(t){return null!=(null===e||void 0===e?void 0:e.key)&&t.world.alien.scanned_bean[e.key]})),n=ja((function(e){return e.world.alien.difficulty})),a=ja((function(e){return e.world.alien.techProgress})),r=ja((function(e){return e.world.insanityEvent})),l=Sa(),c=It(a,"sanity_bonus")?-1:0;if(null==e)return i.a.createElement("div",null);for(var o=dt(e,"Dogmatism"),s=[],u=1;u<11;u++)s.push(e.discrete_sanity>=u?"\ud83e\udde0":"\ud83d\ude35");return i.a.createElement("div",null,i.a.createElement("div",{className:"horizontal fancy-header"},i.a.createElement("div",null,"\ud83e\udde0\ud83d\udebf BRAINWASH"),i.a.createElement("div",null,i.a.createElement("strong",null,gt(e)," ",e.name)),i.a.createElement("div",null,i.a.createElement("table",{className:"trait-measure"},i.a.createElement("tbody",null,i.a.createElement("tr",null,s.map((function(e,t){return i.a.createElement("td",{key:t,className:"\ud83d\ude35"===e?"grey":""},e)}))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:2,className:"set-1"},i.a.createElement("small",null,"Psychotic")),i.a.createElement("td",{colSpan:2,className:"set-2"},i.a.createElement("small",null,"Disturbed")),i.a.createElement("td",{colSpan:3,className:"set-3"},i.a.createElement("small",null,"Stressed")),i.a.createElement("td",{colSpan:3,className:"set-4"},i.a.createElement("small",null,"Sane")),i.a.createElement("td",null)))))),i.a.createElement("p",{className:"pad-4p text-center"},"sane"!=e.sanity?i.a.createElement("small",null,"Brainwashing subjects with low sanity \ud83e\udde0 has a \ud83c\udfb2 to add extremely negative traits!"):null),r&&r.beanKey===e.key?i.a.createElement("div",{className:"pad-4p text-center red-alert"},i.a.createElement("h2",null,e.name," is inflicted with ",L[r.newInsanity].icon," ",L[r.newInsanity].noun," due to brainwashing!",i.a.createElement("button",{onClick:function(){return l(ba())}},"\u274c"))):null,i.a.createElement("div",{style:{clear:"both"}},o?i.a.createElement("div",{className:"text-center"},"\ud83d\udc36 Dogmatic subjects cannot change their minds"):null,t?i.a.createElement("div",{className:"horizontal scroll"},i.a.createElement(Wa,{available:e.discrete_sanity,frozen:o,wash:function(){return l(na({beanKey:e.key,faith:e.faith}))},extract:function(){},cost:n.cost.bean_brain.brainwash_ideal.sanity||0,data:G[e.faith]}),e.beliefs.map((function(t){return i.a.createElement(Wa,{key:t,available:e.discrete_sanity,frozen:o&&"Dogmatism"!=t,divergent:!1,wash:function(){return l(ta({beanKey:e.key,trait:t}))},extract:function(){return l(aa({beanKey:e.key,trait:t}))},cost:(n.cost.bean_brain.brainwash_secondary.sanity||0)+c,data:L[t]})}))):i.a.createElement("div",{className:"text-center"},"\ud83d\udef0\ufe0f Scan this subject to reveal its Traits! "),i.a.createElement("h3",{className:"pad-4p"},i.a.createElement("span",{className:"trait-gem"})," Trait Gems"),i.a.createElement("div",{className:"horizontal scroll"},i.a.createElement(Ua,{beanKey:e.key,dogmatic:o}))))},Va=function(e){return i.a.createElement("div",{className:"horizontal blue-orange cylinder f-size-125em marg-t-20"+(e.additionalClasses||"")},e.options.map((function(t){return i.a.createElement("button",{type:"button",key:t.value,onClick:function(){return t.onClick()},className:e.active===t.value?"active":""},t.icon," ",t.text)})))},$a={social_deference:{description:"\ud83c\udfb2 that nearby subjects emit \ud83d\udca2; \ud83c\udfb2 that this subject gains \ud83d\udc4d"},criminal_immunity:{description:"This subject will never be penalized due to crime."},tax_exemption:{description:"This subject will never pay taxes."},hereditary:{description:"Children of this subject automatically gain this title."},gentility:{description:"This subject will not work but will still be paid."}},Xa=function(e){var t=ja((function(e){return e.world.titles.allIDs.reduce((function(t,n){return t.push(e.world.titles.byID[n]),t}),[])})),n=Sa();return i.a.createElement("div",{className:"pad-4p"},i.a.createElement(Va,{active:"titles",options:[{icon:"\ud83d\udc51",text:"Titles",value:"titles",onClick:function(){}},{icon:"\ud83d\udd16",text:"Names",value:"names",onClick:function(){}}]}),i.a.createElement("div",{className:"subheader"},i.a.createElement("h2",null,"\ud83d\udc51 Titles",i.a.createElement("button",{className:"callout marg-0 pull-r",onClick:function(){n(pa({}))}},"\u2795 Title"))),i.a.createElement("div",{className:"title-row"},t.map((function(e){return i.a.createElement(Ya,{key:e.key,title:e,onEdit:function(e){n(fa({newT:e}))}})})),0===t.length?i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("i",null,"No Titles")),i.a.createElement("p",null,"Titles are cosmetic items and privileges that can be awarded to subjects.")):null))},Ya=function(e){return i.a.createElement("div",{className:"title-box"},i.a.createElement("div",null,i.a.createElement("label",null,"Title:\xa0",i.a.createElement("input",{type:"text",value:e.title.name,onChange:function(t){return e.onEdit(Object(T.a)(Object(T.a)({},e.title),{},{name:t.target.value}))}}))),i.a.createElement("div",null,i.a.createElement("label",null,"Headwear:\xa0",i.a.createElement("select",{value:e.title.headwear,onChange:function(t){return e.onEdit(Object(T.a)(Object(T.a)({},e.title),{},{headwear:t.target.value}))}},i.a.createElement("option",{value:void 0},"None"),i.a.createElement("option",{value:"\ud83d\udc51"},"\ud83d\udc51"),i.a.createElement("option",{value:"\ud83d\udc52"},"\ud83d\udc52"),i.a.createElement("option",{value:"\ud83c\udfa9"},"\ud83c\udfa9"),i.a.createElement("option",{value:"\ud83c\udf93"},"\ud83c\udf93"),i.a.createElement("option",{value:"\ud83e\udde2"},"\ud83e\udde2"))),i.a.createElement("label",null,"\xa0Badge:\xa0",i.a.createElement("select",{value:e.title.badge,onChange:function(t){return e.onEdit(Object(T.a)(Object(T.a)({},e.title),{},{badge:t.target.value}))}},i.a.createElement("option",{value:void 0},"None"),i.a.createElement("option",{value:"\u2b50"},"\u2b50"),i.a.createElement("option",{value:"\ud83d\udee1\ufe0f"},"\ud83d\udee1\ufe0f"),i.a.createElement("option",{value:"\u2696\ufe0f"},"\u2696\ufe0f"),i.a.createElement("option",{value:"\ud83d\udccb"},"\ud83d\udccb"),i.a.createElement("option",{value:"\ud83c\udfc5"},"\ud83c\udfc5"),i.a.createElement("option",{value:"\ud83c\udf80"},"\ud83c\udf80"),i.a.createElement("option",{value:"\ud83c\udf38"},"\ud83c\udf38")))),i.a.createElement("h3",null,"Privileges",i.a.createElement("button",{className:"callout marg-0 pull-r",onClick:function(){var t=e.title.privileges.slice();t.push(void 0),e.onEdit(Object(T.a)(Object(T.a)({},e.title),{},{privileges:t}))}},"\u2795 Privilege")),e.title.privileges.map((function(t,n){return i.a.createElement("div",{key:t},i.a.createElement("select",{key:n,value:t,onChange:function(t){var a=e.title.privileges.slice();"None"===t.target.value?a.splice(n,1):a.splice(n,1,t.target.value),e.onEdit(Object(T.a)(Object(T.a)({},e.title),{},{privileges:a}))}},i.a.createElement("option",{value:void 0},"None"),i.a.createElement("option",{value:"social_deference"},"Social Deference"),i.a.createElement("option",{value:"criminal_immunity"},"Criminal Immunity"),i.a.createElement("option",{value:"tax_exemption"},"Tax Exemption"),i.a.createElement("option",{value:"hereditary"},"Hereditary"),i.a.createElement("option",{value:"gentility"},"Gentility")),null!=t&&$a[t]?i.a.createElement("div",null,$a[t].description):null)})))},Qa={state:"Collectivist",ego:"Independent",trad:"Elitist",prog:"Progressive",circle:"Brunette",square:"Blonde",triangle:"Redhead",rocket:"Futuristic",dragon:"Mythical",music:"Dramatic",noFaith:"Nihilistic",starving:"Starving",hungry:"Hungry",sated:"Sated",stuffed:"Stuffed",homeless:"Homeless",sleepy:"Sleepy",awake:"Awake",rested:"Rested",sick:"Sick",sickly:"Sickly",bruised:"Bruised",fresh:"Robust",sane:"Sane",stressed:"Confused",disturbed:"Disturbed",psychotic:"Psychotic",housed:"Housed",house:"House",hospital:"Hospital",farm:"Farm",theater:"Theater",church:"Church",courthouse:"Courthouse",park:"Park",nature:"Elysian Scenery"},ei=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"header",value:function(){return this.props.children?i.a.createElement("b",null,this.props.children):null}},{key:"render",value:function(){var e=this,t=this.props.beans.filter((function(t){return e.props.need(t)==e.props.dire})).length,n={width:Math.floor(t/this.props.beans.length*100)+"%"},a=this.props.beans.filter((function(t){return e.props.need(t)==e.props.abundant})).length,r={width:Math.floor(a/this.props.beans.length*100)+"%"};return i.a.createElement("div",{className:this.props.className},this.header(),i.a.createElement("div",{className:"bar"},i.a.createElement("div",{className:"bar-inner dire",style:n},t>0?"".concat(t," ").concat(Qa[this.props.dire]):""),i.a.createElement("div",{className:"bar-inner abundant",style:r},a>0?a:"")))}}]),n}(i.a.Component);function ti(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}var ni=function(){var e=ja((function(e){return Na(e.world,0)})),t=ja((function(e){return e.world.economy})),n=ja((function(e){return e.world.dwellings.allIDs.length})),a=ti(e.map((function(e){return e.discrete_food}))),r=ti(e.map((function(e){return e.discrete_health}))).toFixed(1),l=ti(e.map((function(e){return e.discrete_stamina}))).toFixed(1),c=e.reduce((function(e,t){return e+t.cash}),0),o=c/(e.length||1),s=ti(e.map((function(e){return e.cash}))),u=e.filter((function(e){return e.cash<1})).length,d=Math.max(o,s),m=e.filter((function(e){return e.cash>d})),y=m.length/(e.length||1)*100,p=m.reduce((function(e,t){return e+t.cash}),0)/c*100,f=e.reduce((function(e,t){return e[t.job]=(e[t.job]||0)+1,e}),{}),h=((f.jobless||0)/e.length*100).toFixed(1);function b(e,t){return e.supply+=t.quantity,e.price+=t.price,e.count++,e.avg=e.price/e.count,e}var v=t.market.listings.food.reduce(b,{supply:0,price:0,avg:0,count:0}),g=t.market.listings.medicine.reduce(b,{supply:0,price:0,avg:0,count:0});return i.a.createElement("div",null,i.a.createElement("div",{className:"pad-4p"},i.a.createElement("h2",null,"State of the Utopia")),i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement("strong",null,"\ud83c\udf5e Food Security"),i.a.createElement(ei,{beans:e,need:function(e){return e.food},dire:"hungry",abundant:"stuffed",className:"big"}),i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Median ",a.toFixed(1)," \ud83c\udf5e"),i.a.createElement("td",{className:"text-center"},"Supply: ",v.supply," \ud83c\udf5e @ $",v.avg.toFixed(2)),i.a.createElement("td",{className:"text-right"},"Deficit: ",t.unfulfilledMonthlyDemand.food," \ud83c\udf5e"))))),i.a.createElement("div",null,i.a.createElement("strong",null,"\ud83e\ude7a Healthcare"),i.a.createElement(ei,{beans:e,need:function(e){return e.health},dire:"sick",abundant:"fresh",className:"big"}),i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Median ",r," \ud83e\ude7a"),i.a.createElement("td",{className:"text-center"},"Supply: ",g.supply," \ud83e\ude7a @ $",g.avg.toFixed(2)),i.a.createElement("td",{className:"text-right"},"Deficit: ",t.unfulfilledMonthlyDemand.medicine," \ud83e\ude7a")))))),i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement("strong",null,"\ud83c\udfe1 Housing")," ",i.a.createElement("br",null),i.a.createElement(ei,{beans:e,need:function(e){return e.housing},dire:"homeless",abundant:"housed",className:"big"}),i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Median ",l," \ud83c\udfe1"),i.a.createElement("td",{className:"text-center"},"Supply: ",n," \ud83c\udfe1"),i.a.createElement("td",{className:"text-right"})))))),i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement("strong",null,"\ud83d\udcb0 Wealth")," ",i.a.createElement("br",null),u," penniless citizens \xa0 \xa0 Cost of Living: $",nt(t).toFixed(2)," ",i.a.createElement("br",null),i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Total $",c.toFixed(2)),i.a.createElement("td",{className:"text-center"},"Median: $",s.toFixed(2)),i.a.createElement("td",{className:"text-right"},"Avg: $",o.toFixed(2))))),"Top ",y.toFixed(1),"% of subjects own ",p.toFixed(1),"% of the wealth"),i.a.createElement("span",null,i.a.createElement("strong",null,"Unemployment")," ",h,"% (",f.jobless,")",i.a.createElement("br",null),i.a.createElement("ul",{className:"boxes"},i.a.createElement("li",null,f.farmer||0," farmers"),i.a.createElement("li",null,f.builder||0," builders"),i.a.createElement("li",null,f.doc||0," doctors"),i.a.createElement("li",null,f.entertainer||0," entertainers")))))},ai=function(e){return i.a.createElement("div",null)},ii=function(e){var t=ja((function(e){return e.world.law.cash}));return i.a.createElement("div",{className:"pad-4p"},i.a.createElement("div",null,i.a.createElement("strong",null,"\ud83d\udcb0 Treasury: ",t.toFixed(2))))},ri=function(e){var t=Object(a.useState)("Welfare"),n=Object(Pt.a)(t,2),r=n[0],l=n[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"col-2"},i.a.createElement("h2",{className:"marg-b-0"},"Utopia Government"),i.a.createElement("div",null,i.a.createElement("div",{className:"horizontal blue-orange cylinder f-size-125em marg-t-20"},i.a.createElement("button",{type:"button",onClick:function(){return l("Welfare")},className:"Welfare"===r?"active":""},"\ud83e\udd32 Welfare"),i.a.createElement("button",{type:"button",onClick:function(){return l("Crime")},className:"Crime"===r?"active":""},"\ud83d\udea8 Crime"),i.a.createElement("button",{type:"button",onClick:function(){return l("Taxation")},className:"Taxation"===r?"active":""},"\ud83d\udcb0 Taxes"),i.a.createElement("button",{type:"button",onClick:function(){return l("funds")},className:"funds"===r?"active":""},"\ud83d\udcb8 Funds")))),"funds"===r?i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement(ii,null)),i.a.createElement("div",null)):i.a.createElement(li,{group:r}))},li=function(e){var t=Object.values(We).filter((function(t){return t.group===e.group})),n=ja((function(e){return e.world.alien.seenBeliefs})),a=ja((function(e){return e.world.alien.beliefInventory})),r=ja((function(e){return e.world.law})),l=Sa();return i.a.createElement("div",{className:"pad-4p"},i.a.createElement("strong",null,e.group," Laws"),i.a.createElement("div",{className:"horizontal scroll"},t.map((function(e){return i.a.createElement(ci,{seenBeliefs:n,id:e.key,beliefs:a,key:e.key,enacted:Je(r,e.key),enactLaw:function(e){return l(va({lawKey:e}))},revokeLaw:function(e){return l(ga({lawKey:e}))}})}))))},ci=function(e){var t,n,a=We[e.id],r=(t=a.prereqs,n=e.seenBeliefs,0===t.length||t.some((function(e){return Fe(e,n)}))),l=function(e,t){return 0===e.length||e.every((function(e){return Fe(e,t)}))}(a.prereqs,e.seenBeliefs);return i.a.createElement("div",{className:"vertical law-formula"},i.a.createElement("div",{className:"horizontal"},i.a.createElement("div",{className:"circular"},r?a.icon:"\u2754"),i.a.createElement("div",null,i.a.createElement("strong",null,r?a.name:"Unknown"),i.a.createElement("div",null,r?i.a.createElement("small",null," ",a.description," "):null))),i.a.createElement("div",{className:"vertical"},a.prereqs.map((function(t){var n,a=Fe(t,e.seenBeliefs),r=(n=t,Array.isArray(n)?n.join("/"):n);return a?i.a.createElement("span",{className:"law-formula-ingredient",key:r},function(e){return Array.isArray(e)?e.map((function(e){return ze(e)})).join(" / "):ze(e)}(t)):i.a.createElement("span",{className:"law-formula-ingredient unknown",key:r},"\u2754 Unknown")}))),e.enacted?i.a.createElement("button",{className:"callout",onClick:function(){return e.revokeLaw(e.id)}},"\ud83d\uddd1\ufe0f\xa0Revoke Active Law"):i.a.createElement("button",{className:"callout",disabled:!l,onClick:function(){return e.enactLaw(e.id)}},l?"\u2712\ufe0f":i.a.createElement("span",{className:"grey"},"\ud83d\udd12"),"\xa0Enact"),e.children)},oi=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement("h3",null,"Welcome to the"),i.a.createElement("h2",null,"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Laboratory"),i.a.createElement("div",null,"Thank you for joining the ",i.a.createElement("select",null,i.a.createElement("option",null,"Human"))," Cultivation Division of the ",i.a.createElement("strong",null,"\ud83c\udf0c\xa0Galactic Xenosensation Federation!")," Interdimensional petri dish ",i.a.createElement("span",{style:{whiteSpace:"nowrap"}},"#",i.a.createElement("input",{type:"text",value:e.seed,onChange:function(t){return e.changeSeed(t.currentTarget.value)},maxLength:19,style:{width:"115px",fontFamily:"monospace",fontSize:"11px"}}))," is ready for farming."),i.a.createElement("p",null,"As a ",i.a.createElement("select",null,i.a.createElement("option",null,"Human Emotion Farmer")),", you are required to execute the following duties:"),i.a.createElement("ul",null,i.a.createElement("li",null,"Construct ",i.a.createElement("strong",null,"\ud83c\udfe0 Buildings")," for your ",i.a.createElement("select",null,i.a.createElement("option",null,"Human"))," subjects."),i.a.createElement("li",null,i.a.createElement("strong",null,"\ud83d\udef8 Beam In")," ",i.a.createElement("select",null,i.a.createElement("option",null,"Human"))," subjects for cultivation."),i.a.createElement("li",null,"Harvest your subject's positive ",i.a.createElement("strong",null,M.happiness," Hedons"),"."),i.a.createElement("li",null,"Sell the Hedons on the ",i.a.createElement("br",null),i.a.createElement("strong",null,"\ud83c\udf0c Galactic \ud83d\ude28 Emotion \ud83d\udcb0 Market"),".")),i.a.createElement("div",null)),i.a.createElement("div",null,i.a.createElement("p",null,"The GXF's records indicate ",i.a.createElement("select",null,i.a.createElement("option",null,"Humans"))," are a",i.a.createElement("br",null),i.a.createElement("u",null,"mentally malleable")," and ",i.a.createElement("u",null,"physically fragile")," species. Try the following cultivation methods:"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("strong",null,"\ud83d\udef0\ufe0f Scan")," your subject's primitive minds for information on what pleases them."),i.a.createElement("li",null,i.a.createElement("strong",null,"\ud83d\udebf Brainwash")," subjects to change their ",i.a.createElement("strong",null,"\ud83e\udde0\xa0Traits"),". Try to add Traits that emit more ",i.a.createElement("strong",null,M.happiness,"\xa0Hedons"),"."),i.a.createElement("li",null,"Avoid letting your subjects die or endure pain; this makes ",i.a.createElement("strong",null,M.unhappiness,"\xa0Antihedons")," which are less profitable."),i.a.createElement("li",null,"Use your knowledge of Traits to modify the farm's ",i.a.createElement("strong",null,"\ud83d\uddf3\ufe0f\xa0Government")," to maximize Hedon generation."),i.a.createElement("li",null,"Use the GXF's ",i.a.createElement("strong",null,"\ud83e\uddea Research Lab")," to upgrade your farm, when stocked with ",i.a.createElement("strong",null,"\ud83d\udc7e Abducted")," subjects.")),i.a.createElement("h3",null,"\ud83c\udf0c Galactic Xenosensation Federation ",i.a.createElement("br",null),i.a.createElement("div",{className:"text-right"},i.a.createElement("small",null,i.a.createElement("i",null,"1 trillion sensations. 100% organic. 100% gourmet.")))))))},si=function(e){return i.a.createElement("div",null)},ui=function(e){var t=Object(a.useState)("main"),n=Object(Pt.a)(t,2),r=n[0],l=n[1],c=h.HasContinueGame(),o=h.GetGameSlots();return i.a.createElement("div",null,i.a.createElement("h1",{className:"text-center"},"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Lab"),"main"===r?i.a.createElement("div",null,null!=c?i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return e.loadGame(c)}},"\ud83e\uddeb Continue Game")):null,i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return e.startGame()}},"\ud83d\udef8 Start New Game")),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return l("showslots")},disabled:o.every((function(e){return null==e.brief}))},"\ud83d\uddc2\ufe0f Load Game"))):i.a.createElement("div",{className:"card-parent vertical load-menu pad-4p"},o.map((function(t){return i.a.createElement("div",{key:t.id,className:"card marg-b-20"},i.a.createElement("button",{disabled:null==t.brief,className:"",onClick:function(){t.brief&&e.loadGame(t.id)}},t.brief?i.a.createElement("span",{className:"f-size-125em"},i.a.createElement("strong",null,t.brief.Name),"\xa0",i.a.createElement("span",null,"Year ",t.brief.Age.year),"\xa0",i.a.createElement("span",null,t.brief.Population," \ud83d\ude10")):i.a.createElement("span",{className:"f-size-125em"},"Slot ",t.id)))}))))},di=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return i.a.createElement("svg",{width:"100",height:"300",xmlns:"http://www.w3.org/2000/svg",style:{},className:this.props.classN+" robot-arm"},i.a.createElement("g",null,i.a.createElement("title",null,"robotarm"),i.a.createElement("rect",{fill:"transparent",id:"canvas_background",height:"302",width:"102",y:"-1",x:"-1"}),i.a.createElement("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid"},i.a.createElement("rect",{fill:"url(#gridpattern)",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"}))),i.a.createElement("g",null,i.a.createElement("title",null,"Layer 1"),i.a.createElement("rect",{id:"svg_2",height:"200",width:"48",y:"91.63545",x:"25",strokeWidth:"1.5",stroke:"#000",fill:"#BBBBBB"}),i.a.createElement("ellipse",{ry:"48",rx:"48",id:"svg_1",cy:"50",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#999999"}),i.a.createElement("ellipse",{ry:"20",rx:"20",id:"svg_3",cy:"50",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#444444"}),i.a.createElement("ellipse",{ry:"48",rx:"48",id:"svg_4",cy:"250",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#999999"}),i.a.createElement("ellipse",{ry:"20",rx:"20",id:"svg_5",cy:"250",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#444444"},this.props.tool)),i.a.createElement("text",{y:"250",x:"-20",fontSize:"4em"},this.props.tool))}}]),n}(i.a.Component);n(33);var mi=["\ud83d\udce1","\ud83d\udddc\ufe0f","\ud83d\udd2c","\ud83d\udc89","\ud83d\udd0e","\ud83e\uddfc","\ud83e\uddf2","\ud83c\udfa5","\ud83d\udd27"];function yi(e){var t=e+1;return t===mi.length&&(t=0),t}var pi=function(){var e=ja((function(e){return e.world.alien.abductedBeanKeys})),t=ja((function(e){return e.world.alien.techProgress})),n=ja((function(e){return e.world.alien.currentlyResearchingTech})),r=Sa(),l=Object(a.useState)(0),c=Object(Pt.a)(l,2),o=c[0],s=c[1],u=Object(a.useState)(3),d=Object(Pt.a)(u,2),m=d[0],y=d[1],p=Object(a.useState)(2),f=Object(Pt.a)(p,2),h=f[0],b=f[1],v=Object(a.useState)(1),g=Object(Pt.a)(v,2),E=g[0],k=g[1];Object(a.useEffect)((function(){var e=window.setInterval((function(){Math.random()<.51&&s(yi(o)),Math.random()<.51&&y(yi(m)),Math.random()<.51&&b(yi(h)),Math.random()<.51&&k(yi(E))}),1e3);return function(){window.clearInterval(e)}}));var w=Object.values(jt);return i.a.createElement("div",null,i.a.createElement("div",{className:"col-2"},i.a.createElement("div",null,i.a.createElement("h2",null,"Research \ud83e\uddea Lab"),i.a.createElement("div",{className:"vertical"},w.map((function(e){return function(e,t,n,a){var r=null==t[e.tech]?0:t[e.tech].researchPoints,l=e.techPoints,c={width:Math.min(r/l*100,100)+"%"},o=r>=l,s=n===e.tech,u=o?"\u2705":s?"\ud83d\udd2c":"\u2b55\ufe0f",d=s?"active":"inactive";return i.a.createElement("div",{className:"card-parent "+d,key:e.tech},i.a.createElement("button",{className:"card button",onClick:function(){return a(e.tech)}},i.a.createElement("strong",null,e.name),i.a.createElement("strong",{className:"pull-r f-size-125em"},u),i.a.createElement("div",null,e.description),i.a.createElement("div",{className:"bar f-size-12 h-12"},i.a.createElement("div",{className:"bar-inner text-center",style:c}),r,"/",l," tech")))}(e,t,n,(function(e){return r(Ea({t:e}))}))})))),i.a.createElement("div",{className:"vertical"},i.a.createElement("div",null,i.a.createElement("div",{className:"robot"},"\ud83e\udd16",i.a.createElement(di,{classN:"far-left",tool:mi[o]}),i.a.createElement(di,{classN:"left",tool:mi[m]}),i.a.createElement(di,{classN:"near-right",tool:mi[h]}),i.a.createElement(di,{classN:"far-right",tool:mi[E]}))),i.a.createElement("div",{className:"h-42em"},e.map((function(e){return i.a.createElement("span",{key:e,className:"victim bean triangle shake"},"\ud83d\ude28")}))),i.a.createElement("div",{className:"text-center"},"Currently probing ",e.length," beings for ",e.length," tech a day",i.a.createElement("p",null,i.a.createElement("small",null,"1 tech per research subject per day"))),e.length>0?i.a.createElement("div",{className:"text-right"},i.a.createElement(Fa,{className:"callout",onConfirm:function(){r($n())},confirmText:"-1 Research Subject?"},"\ud83c\udf88 Release Research Subject")):null)),i.a.createElement("div",null))},fi=function(){var e=ja((function(e){return e.world.alien.beliefInventory})),t=ja((function(e){return e.world.alien.seenBeliefs})),n=Object(a.useState)(),r=Object(Pt.a)(n,2),l=(r[0],r[1],[]);return Object.keys(t).forEach((function(e){null!=L[e]&&l.push(L[e])})),l.sort((function(e,t){return e.noun.localeCompare(t.noun)})),i.a.createElement("div",{className:"vertical"},i.a.createElement("div",{className:"pad-4p"},i.a.createElement("h2",null,"Subject \ud83e\udde0 Traits")),i.a.createElement("div",{className:"col-2-30-60"},i.a.createElement("div",null,i.a.createElement("div",{className:"scroll"},i.a.createElement("div",{className:"scoll-sticky-h"},i.a.createElement("strong",null,i.a.createElement("span",{className:"trait-gem"}),"Trait Gems")),e.length<1?i.a.createElement("div",null,"No Trait Gems! ",i.a.createElement("br",null),"\ud83d\ude35 Brainwash your subjects  ",i.a.createElement("br",null),"or buy from the \ud83d\udecd\ufe0f Market"):e.map((function(e){return i.a.createElement("div",{key:e.trait},i.a.createElement("div",null,i.a.createElement("strong",null,L[e.trait].icon," ",L[e.trait].noun)),i.a.createElement("div",null,"This can be implanted ",e.gems," more times"))})))),i.a.createElement("div",null,i.a.createElement("div",{className:"modal-scroll-v"},i.a.createElement("div",{className:"sticky-t-0"},i.a.createElement("strong",null,"Discovered ",l.length," of ",R.length," Traits")),l.length<1?i.a.createElement("div",null,"No Traits Scanned! ",i.a.createElement("br",null),"\ud83d\udef0\ufe0f Scan some of your subjects."):l.map((function(e){return i.a.createElement(za,{key:e.noun,data:e,cost:0,titleView:i.a.createElement("strong",null,e.noun),bottomView:i.a.createElement("span",null)})}))))))},hi=function(e){var t=Object(a.useState)(!1),n=Object(Pt.a)(t,2),r=n[0],l=n[1],c=ja((function(t){return t.world.cities.byID[e.cityKey]})),o=ja((function(t){return t.world.ufos.byID[e.ufoKey]}));Object(a.useEffect)((function(){setTimeout((function(){l(!0),Kn.play("teleport"),setTimeout((function(){l(!1)}),1800)}),1800)}),[]);var s=Object(T.a)({},me(ue(c.hex_size,c.petriOrigin,o.point)));return i.a.createElement("span",{style:s,className:"ufo"},"\ud83d\udef8",r?i.a.createElement("span",{className:"beam"}):null)},bi=["company","co-op","commune"],vi={company:"\ud83c\udfa9","co-op":"\ud83e\udd1d",commune:"\u2692\ufe0f"},gi=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return i.a.createElement("small",null,_n(this.props.cost,"-",this.props.qty)," ",this.props.rider)}}]),n}(i.a.Component),Ei=function(e){var t=ja((function(t){return e.dwellingKeys.map((function(e){return t.world.dwellings.byID[e]}))})),n=ja((function(e){return t.reduce((function(t,n){return null!=n.occupantKey&&(t[n.key]=e.world.beans.byID[n.occupantKey].name),t}),{})}));return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("strong",null,"Housing:")),t.map((function(e,t){return i.a.createElement("div",{key:e.key},At[e.kind]," ",(a=e.kind)[0].toUpperCase()+a.substr(1)," #",t+1," ",n[e.key]||"");var a})))},ki=function(e){var t=Sa();return i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return t(Zn({cityKey:e.city,where:e.hex}))}},"\ud83d\udef8 Beam In New Subject",i.a.createElement(gi,{cost:e.difficulty.cost.hex.beam,rider:"+Subject"})))},wi=function(e){var t,n,a=ja((function(t){return e.district.lots.map((function(e){return t.world.lots.byID[e]}))})),r=null!==(t=e.selectedLotKey)&&void 0!==t?t:null===(n=a.find((function(e){return null==e.buildingKey})))||void 0===n?void 0:n.key,l=Sa(),c=e.difficulty.cost.emptyHex;return null!=r?i.a.createElement("div",null,i.a.createElement("h3",null,"Build:"),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Rn({city:e.cityKey,lot:r,what:"house"}))}},ye.house," House",i.a.createElement(gi,{cost:c.build.house}))),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Rn({city:e.cityKey,lot:r,what:"farm"}))}},ye.farm," Farm",i.a.createElement(gi,{cost:c.build.farm})),i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Rn({city:e.cityKey,lot:r,what:"hospital"}))}},ye.hospital," Hospital",i.a.createElement(gi,{cost:c.build.hospital}))),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Rn({city:e.cityKey,lot:r,what:"theater"}))}},ye.theater," Theater",i.a.createElement(gi,{cost:c.build.theater})),i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Rn({city:e.cityKey,lot:r,what:"park"}))}},ye.park," Park",i.a.createElement(gi,{cost:c.build.park})))):i.a.createElement("div",null)},xi={urban:"\u26f2",rural:"\ud83d\udcea",fallow:"\ud83c\udf33",nature:"\ud83c\udfd4\ufe0f"},Ki={urban:"Urban",rural:"Rural",fallow:"Empty",nature:"Nature"},Di=function(e){var t=Object(d.c)((function(e){return e.selected.selectedDistrictKey})),n=ja((function(e){return null!=t?e.world.districts.byID[t]:void 0})),a=ja((function(e){return e.selected.selectedLotKey})),r=Object(d.c)(qa),l=Object(d.c)(Ga),c=Sa();return l&&null==n?i.a.createElement("div",null):l&&r&&n?i.a.createElement(Ni,{building:r,city:l,hex:n,difficulty:e.difficulty}):l&&n?i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("strong",null,xi[n.kind]," ",Ki[n.kind]," District")," in ",i.a.createElement("strong",null,l.name),i.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return c(Ba({cityKey:l.key}))}},"\u274c")),null!=a?i.a.createElement("span",null,"Lot #",a+1):i.a.createElement("br",null),"fallow"===n.kind?i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return c(qn({city:l.key,district:n.key}))}},"\ud83d\udea7 Develop",i.a.createElement(gi,{cost:e.difficulty.cost.hex.fallow_2_rural})))):"rural"===n.kind?i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return c(qn({city:l.key,district:n.key}))}},"\ud83c\udfd7\ufe0f Urbanize",i.a.createElement(gi,{cost:e.difficulty.cost.hex.rural_2_urban})))):null,i.a.createElement(wi,{cityKey:l.key,district:n,selectedLotKey:a,difficulty:e.difficulty}),i.a.createElement("h3",null,"Beings:"),i.a.createElement(ki,{difficulty:e.difficulty,hex:n,city:l.key})):i.a.createElement("div",null)},Ni=function(e){var t,n=e.building,a=ja((function(e){return null!=n.enterpriseKey?e.world.enterprises.byID[n.enterpriseKey]:void 0})),r=he[n.type],l=Sa(),c=qt[n.type]>0,o=e.building.upgradedJobs||e.building.upgradedStorage;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("strong",null,Qa[n.type]),i.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return l(Ma())}},"\u274c")),i.a.createElement("div",{className:"text-right"},i.a.createElement("small",null,"in\xa0",i.a.createElement("strong",null,e.city.name))),null!=a&&null!=r?i.a.createElement("div",null,i.a.createElement("small",null,"$",null===(t=a.cash)||void 0===t?void 0:t.toFixed(2)," from sales today"),i.a.createElement(Ii,{enterpriseKey:a.key,good:r,buildingKey:n.key})):null,o&&c?i.a.createElement("div",null,Si(n.type)):null,c&&null!=a?i.a.createElement(Ci,{enter:a,changeEnterprise:function(e){return l(zn({enterpriseKey:n.key,newType:e}))}}):null,c?i.a.createElement(ji,{cityKey:e.city.key,building:n}):null,c?i.a.createElement("div",null,i.a.createElement("small",null,"This ",Qa[n.type]," can support ",Lt(n)," more jobs.",o?null:i.a.createElement("span",null,i.a.createElement("br",null),"Add Worker Space to add 3 more job slots."))):null,n.upgradedJobs||n.upgradedStorage||!c?null:i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Jn({buildingKey:n.key}))}},"\ud83d\udee0\ufe0f Add Worker Space",i.a.createElement(gi,{cost:e.difficulty.cost.hex.upgrade})))),n.upgradedJobs||n.upgradedStorage||!c?null:i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Jn({buildingKey:n.key}))}},"\ud83d\udce6 Add Storage Space",i.a.createElement(gi,{cost:e.difficulty.cost.hex.upgrade})))),null!=n.dwellingKeys&&n.dwellingKeys.length?i.a.createElement(Ei,{dwellingKeys:n.dwellingKeys}):null,n.upgradedLoft||!c?null:i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",type:"button",onClick:function(){return l(Un({buildingKey:n.key}))}},"\ud83d\udecc Add Loft Housing",i.a.createElement(gi,{cost:e.difficulty.cost.hex.add_loft})))),i.a.createElement(ki,{city:e.city.key,difficulty:e.difficulty,hex:e.hex}))},Si=function(e){return"house"===e?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"text-center"},i.a.createElement("small",null,"\ud83d\udc2e Parochial subjects may emit \ud83d\udc4e",i.a.createElement("br",null),"when living in dense buildings")),i.a.createElement("div",{className:"text-center"},i.a.createElement("small",null,"\ud83c\udf78 Cosmopolitan subjects may emit \ud83d\udc4e",i.a.createElement("br",null),"when living in small buildings"))):i.a.createElement("div",null)},ji=function(e){var t=Sa(),n=ja((function(t){return e.building.employeeBeanKeys.map((function(e){return t.world.beans.byID[e]}))})),a=ja((function(t){return t.world.enterprises.byID[e.building.key]}));return n.length<0?i.a.createElement("div",null,"No Workers"):i.a.createElement("div",null,i.a.createElement("strong",null,"Workers:"),n.map((function(n){return i.a.createElement("div",{key:n.key},fe[e.building.type]," ",n.name," ",a&&"company"===a.enterpriseType&&n.key===a.ownerBeanKey?"\ud83c\udfa9":"",i.a.createElement("button",{title:"Fire",className:"callout marg-0",onClick:function(){return n?t(Wn({cityKey:e.cityKey,beanKey:n.key})):null}},"\ud83d\udd25"))})))},Ci=function(e){var t=bi.map((function(t){return{icon:vi[t],text:t[0].toUpperCase()+t.substring(1),value:t,onClick:function(){e.changeEnterprise(t)}}}));return i.a.createElement(Va,{active:e.enter.enterpriseType,options:t})},Ii=function(e){var t=ja((function(t){return t.world.economy.market.listings[e.good]})),n=ja((function(t){return t.world.buildings.byID[e.buildingKey]}));return i.a.createElement("div",{className:"horizontal"},t.filter((function(t){return t.sellerEnterpriseKey===e.enterpriseKey})).map((function(t,n){return i.a.createElement("div",{key:n},t.quantity," ",_[e.good]," @ $",t.price.toFixed(2))})),i.a.createElement("div",null,"\ud83d\udce6 Storage x",n.upgradedStorage?20:10))};n(34);var _i={2:0,0:1,4:2,1:3,5:4,3:5},Mi={farm:"\ud83e\ude95",house:"\ud83e\uddf9",hospital:"\ud83e\ude7a",church:"",theater:"\ud83d\udc58",courthouse:"\ud83d\udcbc",park:"\ud83c\udf92",nature:"\ud83c\udf92"},Oi=function(e){var t=ja((function(t){return t.world.economy.market.listings[e.goodType].filter((function(t){return t.sellerEnterpriseKey===e.enterpriseKey})).reduce((function(e,t){return e+t.quantity}),0)}));if(t<1)return null;for(var n=[],a=0;a<t;a++)n.push({row:Math.floor(a/2),col:a%2});return i.a.createElement(i.a.Fragment,null,n.map((function(t,n){return i.a.createElement("text",{x:270+-12*t.col+"px",y:85+-12*t.row+"px",style:{fontSize:"11px"},key:n},_[e.goodType])})))},Bi=function(e){var t=ja((function(t){return t.world.lots.byID[e.lotKey]})),n=ja((function(e){return null!=t.buildingKey?e.world.buildings.byID[t.buildingKey]:void 0}));if(n){var a=he[n.type],r=n.upgradedJobs||n.upgradedStorage;return i.a.createElement(i.a.Fragment,null,i.a.createElement("text",{x:"280px",y:"77.859px",style:{fontSize:"36px"}},r?pe[n.type]:ye[n.type]),n.employeeBeanKeys.map((function(e,t){return i.a.createElement("text",{x:"325px",y:85+-14*t+"px",style:{fontSize:"11px"},key:e},Mi[n.type])})),null!=n.enterpriseKey&&a?i.a.createElement(Oi,{enterpriseKey:n.enterpriseKey,goodType:a}):null)}return i.a.createElement("text",{x:"280.931px",y:"77.859px",style:{fontSize:"36px"}},"rural"===t.kind?"\ud83c\udf3c":"\ud83d\ude8f")},Ti=function(e){var t=e.building.upgradedJobs||e.building.upgradedStorage;return i.a.createElement("div",{key:e.building.type+e.building.key,style:e.style,className:"building "+e.building.type},t?pe[e.building.type]:ye[e.building.type],i.a.createElement(Pi,{building:e.building,getStyle:e.getStyle}),e.children)},Pi=function(e){return i.a.createElement(i.a.Fragment,null,Z.map((function(t,n){var a=_i[n],r=null!=e.building.employeeBeanKeys[a];return i.a.createElement("span",{key:n,className:"slot",style:e.getStyle(t)},r?fe[e.building.type]:null)})))},Ai=function(e){var t=Sa(),n=ja((function(t){return t.selected.selectedLotKey===e.lotKey}));return i.a.createElement("g",{className:"lot "+e.className+(n?" selected":""),transform:"matrix(1.21104,0,0,0.901051,-221.832,-145.114)",onClick:function(n){return t(Pa({cityKey:e.cityKey,district:e.districtKey,lot:e.lotKey})),n.preventDefault(),!1}},i.a.createElement("path",{d:e.lotDrawn}))},Gi=function(e){var t=Sa(),n=ja((function(t){return t.world.districts.byID[e.districtKey]})),a=ja((function(t){return t.selected.selectedDistrictKey===e.districtKey}))?"hex-selected":"";return i.a.createElement("div",{className:"hex "+a,key:e.districtKey,style:Object(T.a)(Object(T.a)({},Zi),me(n.point)),onMouseEnter:function(a){t(An({cityKey:e.cityKey,px:n.point}))},onClick:function(n){if(!n.isDefaultPrevented())return t(_a({cityKey:e.cityKey,district:e.districtKey})),n.stopPropagation(),!1}},i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 104 120",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",left:"0%",top:"0%",opacity:.5},className:"svg-hex"},i.a.createElement("g",{transform:"matrix(1,0,0,1,-233.288,0)"},"fallow"===n.kind?i.a.createElement("g",{id:"rural-circle-120",transform:"matrix(0.990588,0,0,1.33139,453.063,64.7779)"},i.a.createElement("g",{id:"circle",transform:"matrix(1.0095,0,0,0.751097,-457.368,-48.6545)"},i.a.createElement("circle",{className:"district-circle",cx:"285.248",cy:"60.588",r:"17.271"})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"265.931px",y:"77.859px",style:{fontSize:"46.631px"}},"\ud83c\udf33"))):"rural"===n.kind?i.a.createElement("g",{id:"rural-circle-120",transform:"matrix(0.990588,0,0,1.33139,453.063,64.7779)"},i.a.createElement("g",{transform:"matrix(1.0095,0,0,0.751097,-457.368,-48.6545)"},i.a.createElement("path",{className:"district-circle",d:"M285.25,0L285.251,43.341M300.181,69.173L337.211,89.968L300.181,69.173ZM270.408,69.173L233.288,90.21M285.248,43.317C294.78,43.317 302.519,51.056 302.519,60.588C302.519,70.12 294.78,77.859 285.248,77.859C275.716,77.859 267.977,70.12 267.977,60.588C267.977,51.056 275.716,43.317 285.248,43.317Z"})),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"rural_3",lotKey:n.lots[2],lotDrawn:"M43.3,112.51L43.301,142.954L43.3,142.954C35.334,142.954 28.868,149.421 28.868,157.387C28.868,160.061 29.596,162.566 30.866,164.714L6.474,178.584C2.37,171.965 0,164.162 0,155.81C0,131.912 19.402,112.51 43.3,112.51L43.3,112.51Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"rural_2",lotKey:n.lots[1],lotDrawn:"M55.735,164.713L80.126,178.583C72.489,190.9 58.846,199.11 43.3,199.11C27.754,199.11 14.111,190.9 6.474,178.584L30.866,164.714C33.378,168.965 38.009,171.819 43.3,171.819C48.592,171.819 53.223,168.964 55.735,164.713ZM0,155.81C0,155.81 0,155.81 0,155.81Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"rural_1",lotKey:n.lots[0],lotDrawn:"M43.3,112.51C67.198,112.51 86.6,131.912 86.6,155.81C86.6,164.162 84.23,171.965 80.126,178.583L55.735,164.713C57.004,162.564 57.732,160.06 57.732,157.387C57.732,149.421 51.266,142.954 43.301,142.954L43.3,112.51Z"}),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-271.444,-46.211)"},i.a.createElement(Bi,{lotKey:n.lots[0]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-271.444,1.20645)"},i.a.createElement(Bi,{lotKey:n.lots[1]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-323.46,-21.9919)"},i.a.createElement(Bi,{lotKey:n.lots[2]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"265.931px",y:"77.859px",style:{fontSize:"36.631px"}},"\ud83d\udcea"))):"urban"===n.kind?i.a.createElement("g",{id:"rural-circle-120",transform:"matrix(0.990588,0,0,1.33139,453.063,64.7779)"},i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-271.444,-46.211)"},i.a.createElement(Bi,{lotKey:n.lots[0]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-253.016,-21.9919)"},i.a.createElement(Bi,{lotKey:n.lots[1]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-271.444,1.20645)"},i.a.createElement(Bi,{lotKey:n.lots[2]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-306.821,1.20645)"},i.a.createElement(Bi,{lotKey:n.lots[3]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-323.46,-21.9919)"},i.a.createElement(Bi,{lotKey:n.lots[4]})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-306.821,-46.211)"},i.a.createElement(Bi,{lotKey:n.lots[5]})),i.a.createElement("g",{transform:"matrix(1.0095,0,0,0.751097,-457.368,-48.6545)"},i.a.createElement("path",{className:"district-circle",d:"M285.25,0L285.251,43.341M300.181,69.173L337.211,89.968L300.181,69.173ZM270.408,69.173L233.288,90.21M285.248,43.317C294.78,43.317 302.519,51.056 302.519,60.588C302.519,70.12 294.78,77.859 285.248,77.859C275.716,77.859 267.977,70.12 267.977,60.588C267.977,51.056 275.716,43.317 285.248,43.317Z"})),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_9",lotKey:n.lots[5],lotDrawn:"M5.135,135.352C12.441,121.76 26.798,112.51 43.3,112.51L43.3,112.51L43.301,142.954L43.3,142.954C37.962,142.954 33.298,145.858 30.801,150.17L5.135,135.352Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_8",lotKey:n.lots[4],lotDrawn:"M5.158,135.317L30.861,150.068C29.594,152.215 28.868,154.717 28.868,157.387C28.868,160.061 29.596,162.566 30.866,164.714L6.474,178.584C2.37,171.965 0,164.162 0,155.81C0,148.284 1.774,141.487 5.158,135.317Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_7",lotKey:n.lots[3],lotDrawn:"M43.3,171.819L43.3,199.11C27.754,199.11 14.111,190.9 6.474,178.584L30.866,164.714C33.378,168.965 38.009,171.819 43.3,171.819ZM0,155.81C0,155.81 0,155.81 0,155.81Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_6",lotKey:n.lots[2],lotDrawn:"M43.3,171.819C48.592,171.819 53.223,168.964 55.735,164.713L80.126,178.583C72.489,190.9 58.846,199.11 43.3,199.11L43.3,171.819Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_5",lotKey:n.lots[1],lotDrawn:"M81.453,135.317C84.837,141.487 86.6,148.284 86.6,155.81C86.6,164.162 84.23,171.965 80.126,178.583L55.735,164.713C57.004,162.564 57.732,160.06 57.732,157.387C57.732,154.717 57.006,152.215 55.739,150.068L81.453,135.317Z"}),i.a.createElement(Ai,{cityKey:e.cityKey,districtKey:e.districtKey,className:"urban_4",lotKey:n.lots[0],lotDrawn:"M55.725,150.044C53.211,145.801 48.585,142.954 43.301,142.954L43.3,112.51C59.792,112.51 74.143,121.75 81.453,135.331L55.725,150.044Z"}),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"265.931px",y:"77.859px",style:{fontSize:"46.631px"}},0===n.q&&0===n.r?"\ud83c\udfeb":"\u26f2"))):i.a.createElement("g",{transform:"matrix(0.990588,0,0,1.33139,453.063,64.7779)"},i.a.createElement("g",{id:"circle",transform:"matrix(1.0095,0,0,0.751097,-457.368,-48.6545)"},i.a.createElement("circle",{className:"district-circle",cx:"285.248",cy:"60.588",r:"17.271"})),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"265.931px",y:"77.859px",style:{fontSize:"46.631px"}},xi.nature)),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"270px",y:"-20px",style:{fontSize:"36.631px"}},"\ud83c\udfd5\ufe0f")),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"180.931px",y:"147.859px",style:{fontSize:"36.631px"}},"\ud83c\udfd5\ufe0f")),i.a.createElement("g",{transform:"matrix(0.402264,0,0,0.299296,-287.943,-23.1242)"},i.a.createElement("text",{x:"365.931px",y:"147.859px",style:{fontSize:"36.631px"}},"\ud83c\udfd5\ufe0f"))))),e.children)},Li=function(e){ja((function(t){return t.world.cities.byID[e.cityKey]}));var t=ja((function(t){var n;return null===(n=t.world.cities.byID[e.cityKey])||void 0===n?void 0:n.districtKeys}));return i.a.createElement(i.a.Fragment,null,t.map((function(t,n){return i.a.createElement(Gi,{cityKey:e.cityKey,key:t,districtKey:t})})))},qi=function(e){var t=ja((function(t){return function(e,t){return function(e,t){return e.cities.byID[t].buildingKeys}(e,t).reduce((function(t,n){return t.push(e.buildings.byID[n]),t}),[])}(t.world,e.city.key)}));return i.a.createElement(i.a.Fragment,null,t.map((function(t){return i.a.createElement("div",{key:t.key,className:"building-node",onClick:function(){return e.onClickBuilding(t)}},i.a.createElement(Ti,{building:t,style:{},getStyle:function(){return{}}}))})))},Hi=function(e){Object(a.useRef)(null);var t=ja((function(t){return t.world.cities.byID[e.cityKey].pickupMagnetPoint}));return t?i.a.createElement("div",{className:"magnet",style:{transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}},"\ud83e\uddf2"):null};function Fi(e){return"buy"==e.actionData.act}var Ri=function(e){var t=ja((function(t){return function(e,t){var n=e.world.beans.byID[t],a="work"===n.actionData.act;return{speech:ht(n),face:gt(n),good:Fi(n)?_[n.actionData.good||"food"]:void 0,classes:[n.job,n.ethnicity,"travel"!=n.actionData.act||"dead"===n.lifecycle?"paused":""].join(" "),animationClasses:["bean-walker",a?"spin":""].join(" "),badge:n.badge,hat:n.hat}}(t,e.beanKey)})),n=ja((function(t){return t.selected.selectedBeanKey===e.beanKey})),a=["bean interactable",t.classes,e.sitStill?"":t.animationClasses,n?"selected":""].join(" "),r=Sa();return i.a.createElement("span",{className:a,onClick:function(t){t.stopPropagation(),r(Oa({cityKey:e.cityKey,beanKey:e.beanKey}))}},t.badge?i.a.createElement("span",{className:"badge "+t.badge},t.badge):null,t.face," ",t.good?i.a.createElement("span",{className:"purchase"},i.a.createElement("span",{className:"money"},"\ud83d\udcb8"),i.a.createElement("span",{className:"purchase-good"},t.good)):null," ",t.speech?i.a.createElement("span",{className:"speech"},i.a.createElement("span",{className:""},t.speech)):null,t.hat?i.a.createElement("span",{className:"hat "+t.hat},t.hat):null)},zi=function(e){var t=Object(a.useState)(!1),n=Object(Pt.a)(t,2),r=n[0],l=n[1],c=ja((function(t){return t.world.pickups.byID[e.pickupKey]})),o=i.a.useContext(Dr);return Object(a.useEffect)((function(){!r&&o&&(o.play("drop"),l(!0))})),i.a.createElement("span",{className:"pickup bob"},M[c.type])},Wi=function(e){var t=i.a.useContext(Nr),n=Object(a.useRef)(null),r=function(e){n.current&&e&&(n.current.style.transform="translate(".concat(e.point.x,"px, ").concat(e.point.y,"px)"))};return Object(a.useEffect)((function(){var n=t.Get(e.moverType,e.moverKey);return n.subscribe(r),n.current&&r(n.current),function(){return t.Get(e.moverType,e.moverKey).unsubscribe(r)}}),[]),i.a.createElement("div",{ref:n},e.children)},Ji=function(e){var t=ja((function(t){return Da(t.world,e.cityKey)}));return i.a.createElement(i.a.Fragment,null,t.map((function(t){return i.a.createElement(Wi,{moverKey:t,key:t,moverType:"bean"},i.a.createElement(Ri,{cityKey:e.cityKey,beanKey:t}))})))},Ui=function(e){var t=ja((function(t){return t.world.cities.byID[e.cityKey].pickupKeys}));return i.a.createElement(i.a.Fragment,null,t.map((function(e){return i.a.createElement(Wi,{moverKey:e,key:e,moverType:"pickup"},i.a.createElement(zi,{pickupKey:e}))})))},Zi={width:"260px",height:"260px",top:"-130px",left:"-130px"},Vi=function(e){for(var t=ja((function(t){return t.world.cities.byID[e.cityKey]})),n=ja((function(t){return t.world.cities.byID[e.cityKey].ufoKeys})),a=(ja((function(e){return e.world.spotlightEvent})),ja((function(e){if(e.world.spotlightEvent&&e.world.spotlightEvent.beanKey)return e.world.beans.byID[e.world.spotlightEvent.beanKey]})),Sa()),r=[],l=t.petriRadius-20,c=0;c<72;c++){var o=de({r:l,az:5*c*Math.PI/180});o.x+=t.petriRadius,o.y+=t.petriRadius,r.push(me(o))}t.deadBeanKeys.map((function(e,t){return i.a.createElement("span",{key:t,className:"dead",style:{left:10*t+"px"}},"\u26b0\ufe0f")}));var s={height:2*t.petriRadius+"px",width:2*t.petriRadius+"px"};return i.a.createElement("div",{className:"tile",onClick:function(){return e.onClick()},onMouseLeave:function(){a(An({cityKey:t.key}))},style:s},i.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-base"},i.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 1)"})),i.a.createElement(Li,{cityKey:t.key}),r.map((function(e,t){return i.a.createElement("span",{key:t,style:e,className:"mtn"},"\u26f0\ufe0f")})),i.a.createElement(Ui,{cityKey:e.cityKey}),i.a.createElement(Ji,{cityKey:e.cityKey}),n.map((function(e,n){return i.a.createElement(hi,{ufoKey:e,key:e,cityKey:t.key})})),i.a.createElement(Hi,{cityKey:e.cityKey}),i.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-lid"},i.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 0.2)"})))},$i=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t="card button";return this.props.thin&&(t+=" thin"),this.props.singleLine&&(t+=" single"),i.a.createElement("button",{className:t,title:this.props.title,onClick:function(){e.props.onClick&&e.props.onClick()},type:"button",disabled:this.props.disabled},this.props.icon," ",this.props.name,null!=this.props.subtext?i.a.createElement("small",null,this.props.subtext):null)}}]),n}(i.a.Component);function Xi(e,t,n){switch(t){case"trad":case"prog":case"ego":case"state":return i.a.createElement($i,{icon:S[t],title:A[t].description,name:"",subtext:Qa[t],thin:!0,singleLine:!0,onClick:n});case"fresh":case"sick":case"hungry":case"starving":case"stuffed":case"homeless":case"rested":case"circle":case"square":case"triangle":case"sane":case"disturbed":case"stressed":return i.a.createElement($i,{icon:S[t],title:Qa[t],name:"",subtext:Qa[t],thin:!0,singleLine:!0,onClick:n});case"noFaith":case"rocket":case"dragon":case"music":return i.a.createElement($i,{icon:S[t],title:G[t].description,name:"",subtext:Qa[t],thin:!0,singleLine:!0,onClick:n});default:return null}}n(35);function Yi(e,t,n,a,r){if(!e)return i.a.createElement("div",{className:"width-100p text-center"},i.a.createElement("small",null,"Subject needs a Scan to reveal their thoughts"));switch(t){case"beliefs":return e?n.beliefs.map((function(e,t){var n,a="belief-name shadow text-left "+L[e].rarity;return i.a.createElement("table",{className:"width-100p",key:e+t},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{className:a},L[e].icon," ",L[e].adj),i.a.createElement("td",{className:"text-right"},(L[e].idealPro||[]).map((function(e){return i.a.createElement("span",{key:e},"+",S[e])})),(L[e].idealCon||[]).map((function(e){return i.a.createElement("span",{key:e},"-",S[e])})))),i.a.createElement("tr",null,i.a.createElement("td",{className:"small text-center",colSpan:2},L[e].description?null===(n=L[e].description)||void 0===n?void 0:n.split(";").map((function(e,t){return i.a.createElement("div",{key:t},e)})):null))))})):null;case"feelings":return i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,e?function(e){return Object.keys(e.happiness.all).map((function(t,n){return i.a.createElement("tr",{key:n},i.a.createElement("td",{className:"small text-right"},e.happiness.all[t]," ",e.happiness.all[t]>=0?M.happiness:M.unhappiness," from "),i.a.createElement("td",{className:"small"},t))}))}(n):null));default:case"priorities":return i.a.createElement("table",{className:"width-100p"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Currently ",function(e){var t;switch(e.act){case"chat":return"chatting";case"crime":return"stealing ".concat(null===e||void 0===e?void 0:e.crimeGood);case"sleep":return"sleeping \ud83d\ude34";case"relax":return"relaxing";case"travel":return"travelling to "+(null===(t=e.intent)||void 0===t?void 0:t.act)||!1;case"work":return e.good?"working to make "+_[e.good]:"working";case"buy":return e.good?"buying "+_[e.good]:"buying"}return""}(n.actionData))),n.priorities.map((function(e){return i.a.createElement("tr",{key:"p-".concat(e.act,"-").concat(e.good)},i.a.createElement("td",null,e.priority.toFixed(2)," ",function(e){switch(e.act){case"sleep":return"\ud83d\ude34";case"work":return e.good?"\ud83d\udcaa "+_[e.good]:"\ud83d\udcaa";case"buy":return e.good?"\ud83d\udcb8 "+_[e.good]:"\ud83d\udcb8"}return""}(e)))})),function(e){var t=Object.keys(e.activity_duration).map((function(e){return e}));return t.sort((function(t,n){return e.activity_duration[n]-e.activity_duration[t]})),t}(n).filter((function(e){return n.activity_duration[e]>0})).map((function(e){var t=e;return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e),i.a.createElement("td",null,(n.activity_duration[t]/1e3).toFixed(1),"s"))}))))}}var Qi=function(e){var t=Sa(),n=Object(a.useState)(void 0),r=Object(Pt.a)(n,2),l=r[0],c=r[1],o=Object(a.useState)("beliefs"),s=Object(Pt.a)(o,2),u=s[0],d=s[1],m=ja((function(e){return e.world.alien})),y=ja(La),p=ja(Ga);function f(){setTimeout((function(){c(void 0)}),5e3)}if(!y||!p)return null;var h=y.job+" "+y.ethnicity;return i.a.createElement("div",{className:"vertical bean-panel"},i.a.createElement("div",{className:"bean-panel-header"},i.a.createElement("div",null,i.a.createElement("b",null,y.name,"\xa0",p?i.a.createElement("small",null," of ",p.name," "):null),i.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){t(Ba({cityKey:y.cityKey}))}},"\u274c")),i.a.createElement("div",{className:"bean-view"},i.a.createElement("span",{className:h+" bean"},void 0===l?gt(y):l)),null!=y.titleKey?i.a.createElement(tr,{titleKey:y.titleKey}):null,i.a.createElement("div",{className:"horizontal"},i.a.createElement("span",{className:"text-center"},"\ud83d\udcb0 $",y.cash.toFixed(2)),i.a.createElement("span",{className:"text-center"},"\ud83d\ude42 ",Math.round(y.lastHappiness),"%"),i.a.createElement("span",{className:"text-center"},Math.round(y.happiness.flatAverage)," ",M.happiness," /day")),function(e,t,n,a,r){return e?i.a.createElement("div",null,i.a.createElement("div",{className:"card-parent"},Xi(0,t.ethnicity,void 0),Xi(0,t.faith,a)),i.a.createElement("div",{className:"card-parent"},t.beliefs.map((function(e){return i.a.createElement($i,{key:e,icon:L[e].icon,title:L[e].adj,name:"",thin:!0,singleLine:!0,onClick:function(){a()}})}))),i.a.createElement("div",{className:"card-parent"},Xi(0,t.food,void 0),Xi(0,t.stamina,void 0),Xi(0,t.health,void 0),Xi(0,t.housing,void 0))):i.a.createElement("div",{className:"card-parent"},i.a.createElement($i,{icon:"\ud83d\udef0\ufe0f",name:"Scan",subtext:"-Energy +Info",onClick:r,disabled:!_t(n,n.difficulty.cost.bean.scan)}))}(m.scanned_bean[y.key],y,m,(function(){e.brainwash()}),(function(){t(Xn({beanKey:y.key})),c("\ud83d\ude28"),f()}))),i.a.createElement("div",{className:"grow-1 pad-4 bean-panel-content"},i.a.createElement("div",{className:"cylinder blue-orange horizontal"},i.a.createElement("button",{type:"button",className:"beliefs"==u?"active":"",onClick:function(){return d("beliefs")}},"\ud83d\ude07 Traits"),i.a.createElement("button",{type:"button",className:"feelings"==u?"active":"",onClick:function(){return d("feelings")}},"\ud83d\ude10 Feelings"),i.a.createElement("button",{type:"button",className:"priorities"==u?"active":"",onClick:function(){return d("priorities")}},"\ud83d\udcaa Priorities")),Yi(m.scanned_bean[y.key],u,y)),i.a.createElement("div",{className:"bean-action-card-parent"},i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{type:"button",className:"button card",onClick:function(){e.brainwash()},title:"Rewrite one of this being's traits"},"\ud83d\ude35 Brainwash",i.a.createElement("small",null,"-Sanity +-Trait"))),i.a.createElement(er,{beanKey:y.key,entitle:e.entitle}),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{type:"button",className:"button card",onClick:function(){t(Yn({beanKey:y.key})),c("\ud83d\ude28"),f()},disabled:!_t(m,m.difficulty.cost.bean.vaporize),title:"Delete this being from the experiment"},"\u2620\ufe0f Vaporize",i.a.createElement(gi,{cost:m.difficulty.cost.bean.vaporize}))),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{type:"button",className:"button card",disabled:"alive"!=y.lifecycle||!_t(m,m.difficulty.cost.bean.abduct),onClick:function(){return t(Vn({beanKey:y.key}))},title:"Remove this being for study"},"\ud83d\udc7e Abduct for Research",i.a.createElement(gi,{cost:m.difficulty.cost.bean.abduct,rider:"+Tech"})))))},er=function(e){return ja((function(e){return e.world.titles.allIDs})).length>0?i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{type:"button",className:"button card",onClick:function(){return e.entitle()},title:"Give this bean a title"},"\ud83d\udc51 Give Title",i.a.createElement(gi,{cost:{},rider:"+Title"}))):null},tr=function(e){var t=ja((function(t){return t.world.titles.byID[e.titleKey]}));return i.a.createElement("div",{className:"text-center"},i.a.createElement("strong",null,t.headwear," ",t.name," ",t.badge))},nr=function(e){var t=ja((function(t){return Na(t.world,e.city.key)})),n=i.a.createElement("div",null,"Human Emotion Farm",i.a.createElement("div",null,i.a.createElement("small",null,"Part of the \ud83c\udf0c Galactic Xenosensation Federation")));e.city&&(n=i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("b",null,e.city.name),i.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.clearCity()}},"\u274c"))));var a=t.reduce((function(e,t){return e+t.lastHappiness}),0)/(t.length||1),r=t.reduce((function(e,t){return e+t.cash}),0)/(t.length||1);return i.a.createElement("div",null,n,i.a.createElement("div",{className:"header"},i.a.createElement("b",null,"\ud83d\udc65 Subjects")),i.a.createElement("div",null,i.a.createElement("b",null,"Population"),"\xa0",i.a.createElement("span",null,t.length)),i.a.createElement(ei,{beans:t,need:function(e){return e.food},dire:"starving",abundant:"stuffed"},"Food Security"),i.a.createElement(ei,{beans:t,need:function(e){return e.stamina},dire:"homeless",abundant:"rested"},"Housing"),i.a.createElement(ei,{beans:t,need:function(e){return e.health},dire:"sick",abundant:"fresh"},"Healthcare"),i.a.createElement("b",null,"Avg. Money")," $",r.toFixed(2)," \xa0",i.a.createElement("b",null,"Avg. Happiness")," ",Math.round(a),"%",t&&t.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"header"},i.a.createElement("b",null,"\ud83e\udde0 Traits")),i.a.createElement("div",{className:"max-w-300"},function(e,t){return Array.from(t.reduce((function(t,n){return e[n.key]?n.beliefs.forEach((function(e){var n=t.get(e)||0;t.set(e,n+1)})):t.set("Unknown",(t.get("Unknown")||0)+1),t}),new Map).entries()).sort((function(e,t){var n=Object(Pt.a)(e,2),a=(n[0],n[1]),i=Object(Pt.a)(t,2);i[0];return i[1]-a})).map((function(e){var t=Object(Pt.a)(e,2),n=t[0],a=t[1];return"Unknown"===n?{icon:"\u2754",noun:"Unknown",count:a}:{icon:L[n].icon,noun:L[n].noun,count:a}}))}(e.alien.scanned_bean,t).map((function(e){return i.a.createElement("span",{key:e.noun,className:"overview-belief"},e.icon,"\xa0",e.noun,"\xa0x",e.count)})))):null,t.length?i.a.createElement("div",{className:"card-parent"},i.a.createElement($i,{icon:"\ud83d\udef0\ufe0f",name:"Scan All",disabled:!0,subtext:"-Energy +Info",onClick:function(){}})):null)},ar=(i.a.Component,function(e){var t=ja(Ga),n=ja((function(e){return e.selected.selectedDistrictKey})),a=ja((function(e){return null!=n?e.world.districts.byID[n]:void 0})),r=ja(La),l=ja((function(e){return e.world.alien})),c=Sa();return r&&t?i.a.createElement(Qi,{bean:r,city:t,alien:l,brainwash:function(){return e.openBrainwash()},entitle:function(){return e.openEntitle()}}):a?i.a.createElement(Di,{difficulty:l.difficulty}):t?i.a.createElement(nr,{city:t,clearCity:function(){return c(Ma())},alien:l}):i.a.createElement("div",null)});var ir=function(e){var t=ja(Ha),n=ja((function(e){return t.slice().reverse().map((function(t){return e.world.events.byID[t]}))})),a=Sa(),r=n.map((function(e,t){var n="\ud83d\udea8"===e.icon,r="nojobslots"===e.trigger||"persuasion"===e.trigger;return i.a.createElement("div",{key:t,className:n||r?"tall":""},i.a.createElement("span",{className:n?"police-siren":""},e.icon),"\xa0",function(e){return null!=e.beanKey&&("speechcrime"===e.trigger||"birth"===e.trigger)}(e)?i.a.createElement("a",{onClick:function(){e.beanKey&&e.cityKey&&a(Oa({beanKey:e.beanKey,cityKey:e.cityKey}))},href:"javascript:void(0)"},e.message):i.a.createElement("span",null,e.message))}));return 0===n.length&&(r=[i.a.createElement("div",{key:0},i.a.createElement("small",null,"No events yet"))]),i.a.createElement("div",{className:"events-panel"},i.a.createElement("div",null,i.a.createElement("b",null,"Events")),r)};function rr(e,t){return i.a.createElement("li",null,(null===e||void 0===e?void 0:e.done)?"\u2611\ufe0f":"\u2b55\ufe0f",t.text,null!=t.tooltip?i.a.createElement("small",{title:t.tooltip},"\u2754"):null,(null===e||void 0===e?void 0:e.done)||null==t.reward?null:function(e){return i.a.createElement("div",null,i.a.createElement("small",null,"\ud83c\udf81 ",_n(e.reward||{},"+")))}(t))}var lr=function(){var e,t=ja((function(e){return e.world.alien.goalProgress})),n=ja((function(e){return e.world.alien.goals})),a=ja((function(e){return e.world.alien.workingReportCard}));return i.a.createElement("div",{className:"goals"},i.a.createElement("div",null,i.a.createElement("b",null,"Goals")),i.a.createElement("ul",null,n.map((function(e){return rr(t[e],wt[e])}))),i.a.createElement("div",null,i.a.createElement("b",null,"Report Card")),i.a.createElement("p",{className:"horizontal"},i.a.createElement("span",null,"Last Grade: ",i.a.createElement("b",null,"D")),i.a.createElement("span",null,"Next Grade in: ",i.a.createElement("b",null,"2 mo."))),i.a.createElement("p",null),i.a.createElement("table",{style:{margin:"auto"}},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\ud83c\udfaf Happiness"),i.a.createElement("td",null,a.Happiness),i.a.createElement("td",null,i.a.createElement("small",{title:"Are your subjects happy?"},"\u2754"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"text-left",colSpan:3},i.a.createElement("small",null,xt.RubricDescription.Happiness))),i.a.createElement("tr",null,i.a.createElement("th",null,"\ud83c\udfaf Prosperity"),i.a.createElement("td",null,a.Prosperity),i.a.createElement("td",null,i.a.createElement("small",{title:"Are your subjects fed and healthy?"},"\u2754"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"text-left",colSpan:3},i.a.createElement("small",null,xt.RubricDescription.Prosperity))),i.a.createElement("tr",null,i.a.createElement("th",null,"\ud83c\udfaf Stability"),i.a.createElement("td",null,a.Stability),i.a.createElement("td",null,i.a.createElement("small",{title:"Are your subjects sane and civil?"},"\u2754"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"text-left",colSpan:3},i.a.createElement("small",null,xt.RubricDescription.Stability))),i.a.createElement("tr",null,i.a.createElement("th",null,"\ud83c\udfaf Dogma"),i.a.createElement("td",null,a.Dogma),i.a.createElement("td",null,i.a.createElement("small",{title:"Do your society's rules match your utopian ideals?"},"\u2754"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"text-left",colSpan:3},i.a.createElement("small",null,xt.RubricDescription.Dogma))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("hr",null))),i.a.createElement("tr",null,i.a.createElement("th",null,"Avg. Grade"),i.a.createElement("td",null,Nt((St[(e=a).Happiness]+St[e.Prosperity]+St[e.Stability]+St[e.Dogma])/20)),i.a.createElement("td",null)))))},cr=function(){var e=ja((function(e){return e.world.alien})),t=Sa();return i.a.createElement("div",null,i.a.createElement("div",{className:"text-center"},i.a.createElement("strong",null,"\ud83c\udf0c Galactic \ud83d\ude28 Emotion \ud83d\udcb0 Market")),i.a.createElement("p",null,i.a.createElement("small",null,"The premier exchange for \u26a1\ufe0f, \ud83e\udd16,  and ",M.happiness,"!")),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",onClick:function(){return t(wa({amount:1}))},disabled:!_t(e,e.difficulty.cost.market.resource.energy)},"+1 \u26a1\ufe0f Energy",i.a.createElement(gi,{cost:e.difficulty.cost.market.resource.energy,qty:1})),i.a.createElement("button",{className:"card button",onClick:function(){return t(wa({amount:5}))},disabled:!_t(e,e.difficulty.cost.market.resource.energy,5)},"+5 \u26a1\ufe0f Energy",i.a.createElement(gi,{cost:e.difficulty.cost.market.resource.energy,qty:5}))),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",onClick:function(){return t(ka({amount:1}))},disabled:!_t(e,e.difficulty.cost.market.resource.bots)},"+1 \ud83e\udd16 Bot",i.a.createElement(gi,{cost:e.difficulty.cost.market.resource.bots,qty:1})),i.a.createElement("button",{className:"card button",onClick:function(){return t(ka({amount:5}))},disabled:!_t(e,e.difficulty.cost.market.resource.bots,5)},"+5 \ud83e\udd16 Bots",i.a.createElement(gi,{cost:e.difficulty.cost.market.resource.bots,qty:5}))),i.a.createElement("div",{className:"card-parent"},i.a.createElement("button",{className:"card button",onClick:function(){return t(Ka())},disabled:e.hedons.amount>=0||!_t(e,e.difficulty.cost.market.scrubHedons)},"Remove \ud83d\udca2 Negative Hedons",i.a.createElement(gi,{cost:e.difficulty.cost.market.scrubHedons,qty:1}))),i.a.createElement("div",null,i.a.createElement("small",null,i.a.createElement("i",null,"Current ",i.a.createElement("span",{className:"trait-gem"})," Trait Gems for sale:"))),i.a.createElement("div",{className:"short-scroll"},i.a.createElement(or,{hedons:e.hedons.amount})))},or=function(e){var t=ja((function(e){return e.world.marketTraitsForSale})),n=Sa();return i.a.createElement(i.a.Fragment,null,t.map((function(t,a){var r=L[t.trait],l="belief-name "+r.rarity;return i.a.createElement("div",{className:"card-parent",key:a},i.a.createElement("button",{className:"card button",onClick:function(){return n(xa({l:t}))},disabled:e.hedons<(t.cost.hedons||0)},i.a.createElement("span",{className:l},r.icon," ",r.noun),i.a.createElement(gi,{cost:t.cost})))})))},sr=["able","acid","aged","also","area","army","away","baby","back","ball","band","bank","base","bath","bear","beat","been","beer","bell","belt","best","bill","bird","blow","blue","boat","body","bomb","bond","bone","book","boom","born","boss","both","bowl","bulk","burn","bush","busy","call","calm","came","camp","card","care","case","cash","cast","cell","chat","chip","city","club","coal","coat","code","cold","come","cook","cool","cope","copy","CORE","cost","crew","crop","dark","data","date","dawn","days","dead","deal","dean","dear","debt","deep","deny","desk","dial","dick","diet","disc","disk","does","done","door","dose","down","draw","drew","drop","drug","dual","duke","dust","duty","each","earn","ease","east","easy","edge","else","even","ever","evil","exit","face","fact","fail","fair","fall","farm","fast","fate","fear","feed","feel","feet","fell","felt","file","fill","film","find","fine","fire","firm","fish","five","flat","flow","food","foot","ford","form","fort","four","free","from","fuel","full","fund","gain","game","gate","gave","gear","gene","gift","girl","give","glad","goal","goes","gold","Golf","gone","good","gray","grew","grey","grow","gulf","hair","half","hall","hand","hang","hard","harm","hate","have","head","hear","heat","held","hell","help","here","hero","high","hill","hire","hold","hole","holy","home","hope","host","hour","huge","hung","hunt","hurt","idea","inch","into","iron","item","jack","jane","jean","john","join","jump","jury","just","keen","keep","kent","kept","kick","kill","kind","king","knee","knew","know","lack","lady","laid","lake","land","lane","last","late","lead","left","less","life","lift","like","line","link","list","live","load","loan","lock","logo","long","look","lord","lose","loss","lost","love","luck","made","mail","main","make","male","many","Mark","mass","matt","meal","mean","meat","meet","menu","mere","mike","mile","milk","mill","mind","mine","miss","mode","mood","moon","more","most","move","much","must","name","navy","near","neck","need","news","next","nice","nick","nine","none","nose","note","okay","once","only","onto","open","oral","over","pace","pack","page","paid","pain","pair","palm","park","part","pass","past","path","peak","pick","pink","pipe","plan","play","plot","plug","plus","poll","pool","poor","port","post","pull","pure","push","race","rail","rain","rank","rare","rate","read","real","rear","rely","rent","rest","rice","rich","ride","ring","rise","risk","road","rock","role","roll","roof","room","root","rose","rule","rush","ruth","safe","said","sake","sale","salt","same","sand","save","seat","seed","seek","seem","seen","self","sell","send","sent","sept","ship","shop","shot","show","shut","sick","side","sign","site","size","skin","slip","slow","snow","soft","soil","sold","sole","some","song","soon","sort","soul","spot","star","stay","step","stop","such","suit","sure","take","tale","talk","tall","tank","tape","task","team","tech","tell","tend","term","test","text","than","that","them","then","they","thin","this","thus","till","time","tiny","told","toll","tone","tony","took","tool","tour","town","tree","trip","true","tune","turn","twin","type","unit","upon","used","user","vary","vast","very","vice","view","vote","wage","wait","wake","walk","wall","want","ward","warm","wash","wave","ways","weak","wear","week","well","went","were","west","what","when","whom","wide","wife","wild","will","wind","wine","wing","wire","wise","wish","with","wood","word","wore","work","yard","yeah","year","your","zero","zone"];function ur(){for(var e="",t=0;t<4;t++){t>0&&(e+="-");var n=Math.random();e+=sr[Math.floor(n*sr.length)]}return e}var dr=function(e){var t=Object(a.useState)(!1),n=Object(Pt.a)(t,2),r=n[0],l=n[1],c=Object(a.useState)(!1),o=Object(Pt.a)(c,2),s=o[0],u=o[1],d=Sa(),m=function(e){l(e)},y=function(){u(!0),setTimeout((function(){return u(!1)}),500)};Object(a.useEffect)((function(){return h.Dirty.subscribe(m),function(){return h.Dirty.unsubscribe(m)}})),Object(a.useEffect)((function(){return h.Saving.subscribe(y),function(){return h.Saving.unsubscribe(y)}}));return i.a.createElement("button",{disabled:!r||s,onClick:function(){d(ya())}},s?"\ud83d\udcbf":r?"\ud83d\udcbe":"\u2714\ufe0f")};var mr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).bubbleSeed=0,a.onChange=function(e){var t=++a.bubbleSeed,n=e.change>0;a.setState({bubbles:a.state.bubbles.concat([{string:(n?"+":"")+e.change,id:t,className:n?"pos":"neg"}])}),setTimeout((function(){a.setState({bubbles:a.state.bubbles.filter((function(e){return e.id!=t}))})}),1500)},a.state={bubbles:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.changeEvent&&this.props.changeEvent.subscribe(this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.changeEvent&&this.props.changeEvent.unsubscribe(this.onChange)}},{key:"render",value:function(){var e=this,t=this.state.bubbles.map((function(t){return i.a.createElement("span",{key:t.id,className:[t.className,e.props.bubbleClass,"bubbler"].join(" ")},e.props.icon," ",t.string)}));return i.a.createElement("span",{className:"bubble-parent"},this.props.children,t)}}]),n}(i.a.Component),yr=function(e){var t=function(e,t){var n=Object(a.useState)([]),i=Object(Pt.a)(n,2),r=i[0],l=i[1],c=0,o=function(e){var n=++c;l(r.concat([Object(T.a)({id:n},t(e))])),setTimeout((function(){l(r.filter((function(e){return e.id!=n})))}),1500)};return Object(a.useEffect)((function(){return e.subscribe(o),function(){return e.unsubscribe(o)}})),r}(e.changeEvent,(function(e){return{string:"Discovered ".concat(e.k,"!"),className:"seen-belief"}}));return i.a.createElement("span",{className:"bubble-parent"},e.children,t.map((function(t){return i.a.createElement("span",{key:t.id,className:[t.className,e.bubbleClass,"bubbler"].join(" ")},e.icon," ",t.string)})))},pr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"render",value:function(){var e="capsule-label "+this.props.label||!1;return i.a.createElement("span",{className:e},i.a.createElement("span",{className:"capsule-icon"},this.props.icon),i.a.createElement("span",{className:"capsule-text"},this.props.label,":"),i.a.createElement("span",{className:"capsule-value"},this.props.children))}}]),n}(i.a.Component),fr=function(){var e=ja((function(e){return e.world.alien.energy.amount}));return i.a.createElement("span",null,e.toFixed(1))},hr=function(){var e=ja((function(e){return e.world.alien.bots.amount}));return i.a.createElement("span",null,e.toFixed(1))},br=function(){var e=ja((function(e){return e.world.alien.hedons.amount}));return i.a.createElement("span",null,e.toFixed(0))},vr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={show:!1},a}return Object(o.a)(n,[{key:"getButton",value:function(){var e=this;return this.props.onClick?i.a.createElement("button",{type:"button",className:"done",onClick:function(){return e.props.onClick&&e.props.onClick()}},this.props.closeButtonText||"Done"):null}},{key:"render",value:function(){return this.props.show?i.a.createElement("div",{className:"modal "+(this.props.className||"")},this.props.children,this.getButton()):null}}]),n}(i.a.Component);var gr=function(){var e,t=ja((function(e){return e.world.date}));return i.a.createElement("span",null,"\xa0Year ",t.year,",\xa0",cn[t.season]," ",t.day," ",(e=t.hour)<jn.Morning?"\ud83c\udf19":e<jn.Noon?"\ud83c\udf04":e<jn.Evening?"\u2600\ufe0f":"\ud83c\udf07")},Er=(n(36),function(e){var t=ja((function(t){return Da(t.world,e.city.key)})),n=ja((function(e){return e.world.alien.scanned_bean})),a=Sa();return i.a.createElement("div",{className:"social-graph"},i.a.createElement("div",{className:"social-graph-row"},t.map((function(t){return i.a.createElement("div",{key:t,className:"bean-node",onClick:function(){return a(Oa({cityKey:e.city.key,beanKey:t}))}},i.a.createElement(Ri,{beanKey:t,static:!0,sitStill:!0,cityKey:e.city.key}),n[t]?null:i.a.createElement("span",{className:"social-graph-unscanned prohibited-emoji"},"\ud83d\udef0\ufe0f"))}))),i.a.createElement("div",{className:"social-graph-row"},i.a.createElement(qi,{city:e.city,onClickBuilding:e.onClickBuilding})))}),kr=(n(37),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"s-p-f button-group cylinder blue-orange"},"\u231b\ufe0f",i.a.createElement("button",{type:"button",className:0==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(0)}},"\u23f9"),i.a.createElement("button",{type:"button",className:1==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(1)}},"\u25b6\ufe0f"),i.a.createElement("button",{type:"button",className:2==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(2)}},"\u23e9"))}}]),n}(i.a.Component)),wr=function(e){return i.a.createElement("div",{className:"s-p-f button-group cylinder blue-orange"},"\ud83d\udc41\ufe0f",i.a.createElement("button",{type:"button",className:"geo"==e.activeMain?"active":"",onClick:function(){return e.setActiveMain("geo")}},"\ud83c\udf0e"),i.a.createElement("button",{type:"button",className:"network"==e.activeMain?"active":"",onClick:function(){return e.setActiveMain("network")}},"\ud83c\udf10"))},xr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onEvent=function(e){a.setState({eventCount:a.state.eventCount+1}),window.setTimeout((function(){a.setState({eventCount:a.state.eventCount-1})}),3e3)},a.props.event.subscribe(a.onEvent),a.state={eventCount:0},a}return Object(o.a)(n,[{key:"render",value:function(){return i.a.createElement("span",null,this.state.eventCount<1?this.props.children:i.a.createElement("span",{className:this.props.eventClass},this.props.eventIcon))}}]),n}(i.a.Component),Kr=function(e){var t=ja((function(e){return e.selected.selectedBeanKey})),n=ja((function(e){return e.world.titles.allIDs.reduce((function(t,n){return t.push(e.world.titles.byID[n]),t}),[])})),a=Sa();return i.a.createElement("div",{className:"pad-4p"},i.a.createElement("h1",null,"Award Title"),i.a.createElement("div",null,n.map((function(n,r){return i.a.createElement("div",{key:r,className:"card-parent"},i.a.createElement("button",{className:"button card",onClick:function(){null!=t&&(a(ha({beanKey:t,titleKey:n.key})),e.closeModal())}},n.headwear," ",n.name," ",n.badge))}))))},Dr=i.a.createContext(void 0),Nr=i.a.createContext(v),Sr=Aa,jr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).previousTimeMS=0,a.logicTickAccumulatorMS=0,a.millisecondsSinceLastSave=0,a.saveAccumulatorMS=0,a.tick=function(e){var t=e-a.previousTimeMS;if(a.previousTimeMS=e,t>0){var n=t*a.state.timeScale;(function(e,t){var n=[];return e.ufos.allIDs.forEach((function(a){e.ufos.byID[a];an.Get("ufo",a).elapsed+=t,an.Get("ufo",a).elapsed>4e3&&n.push(Ln({ufoKey:a}))})),n})(Sr.getState().world,t).map((function(e){return Sr.dispatch(e)})),n>0&&(a.logicTickAccumulatorMS+=t,function(e,t){for(var n=e.pickups.allIDs,a=e.cities.byID[0],i=[],r=n.length-1;r>=0;r--){var l=n[r],c=a.pickupMagnetPoint,o=Object(T.a)({},v.Get("pickup",l).current||Q);if(c)ee(o,c,E*t/1e3,k,w,g)&&i.push(Qn({cityKey:a.key,pickupKey:l}));else te(o,g);v.Get("pickup",l).publish(o)}return i}(Sr.getState().world,t).map((function(e){return Sr.dispatch(e)})),function(e,t){var n=[];return e.beans.allIDs.forEach((function(a){var i=e.beans.byID[a];if("alive"==i.lifecycle){var r=an.Get("bean",i.key);r.elapsed+=t;var l=Rt[i.action].act(i,e,r.elapsed,t);if(Array.isArray(l.action)?n.push.apply(n,Object(b.a)(l.action)):l.action&&n.push(l.action),l.newActivity){var c=Rt[i.action].exit(i,e.seed);c&&n.push(c),n.push(ia({beanKey:a,newState:l.newActivity}));var o=Rt[l.newActivity.act].enter(i);o&&n.push(o)}}})),n}(Sr.getState().world,t).map((function(e){return Sr.dispatch(e)})),a.logicTickAccumulatorMS>2e3&&(Sr.dispatch(Gn()),a.logicTickAccumulatorMS=0)),a.millisecondsSinceLastSave+=t,h.Dirty.current&&a.millisecondsSinceLastSave>15e3&&(h.SaveGame(Sr.getState().world),a.millisecondsSinceLastSave=0)}window.requestAnimationFrame(a.tick)},a.cheatMode=!1,a.keyupHandler=function(e){" "===e.key?a.state.timeScale>0?a.setState({timeScale:0}):a.setState({timeScale:1}):"Escape"===e.key?("greeting"===a.state.activeModal&&Sr.dispatch(Hn({seed:a.state.newGameSeed})),a.setState({activeModal:null})):a.cheatMode&&"A"===e.key?Sr.dispatch(ma()):a.cheatMode&&"Q"===e.key||a.cheatMode&&e.key,a.cheatMode=e.shiftKey&&"C"===e.key},a.onDeath=function(e){Kn.play("death"),a.startSpotlight(e)},a.timescaleBeforeSpotlight=1,a.state={activeMain:"geo",activeModal:"mainmenu",activeRightPanel:"overview",timeScale:0,spotlightEvent:void 0,newGameSeed:ur()},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",this.keyupHandler,!1),window.requestAnimationFrame((function(t){e.previousTimeMS=t,window.requestAnimationFrame(e.tick)})),Sr.subscribe((function(){var t=Sr.getState();null==t.selected.selectedBeanKey&&null==t.selected.selectedBuildingKey&&null==t.selected.selectedDistrictKey||"overview"==e.state.activeRightPanel||e.setState({activeRightPanel:"overview"})}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyupHandler)}},{key:"startSpotlight",value:function(e){var t=this;this.timescaleBeforeSpotlight=this.state.timeScale,this.setState({spotlightEvent:e,timeScale:0},(function(){setTimeout((function(){return t.endSpotlight()}),5e3)}))}},{key:"endSpotlight",value:function(){this.setState({timeScale:this.timescaleBeforeSpotlight,spotlightEvent:void 0})}},{key:"getPanel",value:function(){var e=this;switch(this.state.activeRightPanel){case"overview":return i.a.createElement(ar,{openBrainwash:function(){return e.setState({activeModal:"brainwash"})},openEntitle:function(){return e.setState({activeModal:"entitle"})}});case"goals":return i.a.createElement(lr,null);case"events":return i.a.createElement(ir,null);case"market":return i.a.createElement(cr,null)}}},{key:"render",value:function(){var e=this;return i.a.createElement(d.a,{store:Sr},i.a.createElement(Dr.Provider,{value:Kn},i.a.createElement(Nr.Provider,{value:v},i.a.createElement("div",{className:"canvas"},"network"===this.state.activeMain?i.a.createElement("div",{className:"canvas"},i.a.createElement(Er,{city:Sr.getState().world.cities.byID[0],onClickBuilding:function(e){return Sr.dispatch(Ta({cityKey:Sr.getState().world.cities.allIDs[0],buildingKey:e.key}))},onClick:function(e){Sr.dispatch(Oa({cityKey:e.cityKey,beanKey:e.key}))}})):i.a.createElement(m.b,{minScale:.65,centerZoomedOut:!0,centerOnInit:!0,initialPositionX:5e3,limitToBounds:!1,alignmentAnimation:{disabled:!0},wheel:{step:.05}},i.a.createElement(m.a,null,i.a.createElement("div",{className:"world"},Sr.getState().world.cities.allIDs.map((function(e){return i.a.createElement(Vi,{cityKey:e,key:e,onClick:function(){}})}))))),i.a.createElement("div",{className:"overlay"},i.a.createElement(vr,{show:"mainmenu"==this.state.activeModal},i.a.createElement(ui,{startGame:function(){return e.setState({activeModal:"greeting"})},loadGame:function(t){var n=h.GetGame(t);null!=n.game&&(Sr.dispatch(Fn({newState:n.game})),e.setState({activeModal:null}))}})),i.a.createElement(vr,{show:"loadgame"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Sr.dispatch(Hn({seed:e.state.newGameSeed}))}},i.a.createElement(si,null)),i.a.createElement(vr,{show:"escapemenu"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Sr.dispatch(Hn({seed:e.state.newGameSeed}))}},i.a.createElement(ai,null)),i.a.createElement(vr,{show:"greeting"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Sr.dispatch(Hn({seed:e.state.newGameSeed}))}},i.a.createElement(oi,{seed:this.state.newGameSeed,changeSeed:function(t){return e.setState({newGameSeed:t})}})),i.a.createElement(vr,{show:"gov"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},i.a.createElement(ri,null)),i.a.createElement(vr,{show:"polisci"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},i.a.createElement(pi,null)),i.a.createElement(vr,{show:"society"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},i.a.createElement(Xa,null)),i.a.createElement(vr,{show:"economy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},"economy"==this.state.activeModal?i.a.createElement(ni,null):""),i.a.createElement(vr,{show:"traits"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},i.a.createElement(fi,null)),i.a.createElement(vr,{show:"brainwash"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},i.a.createElement(Za,null)),i.a.createElement(vr,{show:"entitle"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})},className:"modal-tiny"},i.a.createElement(Kr,{closeModal:function(){return e.setState({activeModal:null})}})),i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:"top"},i.a.createElement("span",null,"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Lab"),i.a.createElement(gr,null),i.a.createElement(kr,{timeScale:this.state.timeScale,setTimeScale:function(t){e.setState({timeScale:t})}}),i.a.createElement(wr,{setActiveMain:function(t){return e.setState({activeMain:t})},activeMain:this.state.activeMain}),i.a.createElement(dr,null)),i.a.createElement("div",{className:"bottom"},i.a.createElement(mr,{changeEvent:kt.alienEnergy,icon:"\u26a1\ufe0f"},i.a.createElement(pr,{icon:"\u26a1\ufe0f",label:"Energy"},i.a.createElement(fr,null))),i.a.createElement(mr,{changeEvent:kt.alienBots,icon:"\ud83e\udd16"},i.a.createElement(pr,{icon:"\ud83e\udd16",label:"Bots"},i.a.createElement(hr,null))),i.a.createElement(mr,{changeEvent:kt.alienHedons,icon:"\ud83d\udc4d"},i.a.createElement(pr,{icon:"\ud83d\udc4d",label:"Hedons"},i.a.createElement(br,null))),i.a.createElement("span",null,i.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"economy"})}},"\ud83d\udcca State of the Utopia"),i.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"gov"})}},"\ud83d\uddf3\ufe0f Gov"),i.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"polisci"})}},"\ud83e\uddea Research"),i.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"society"})}},"\ud83d\udc51 Society"),i.a.createElement(yr,{changeEvent:kt.newTraitSeen,icon:"\ud83e\udde0"},i.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"traits"})}},"\ud83e\udde0 Traits"))))),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"full-width-tabs"},i.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"overview"})}},"\ud83d\udcc8 Info"),i.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"market"}),Sr.dispatch(Ma())}},"\ud83d\udecd\ufe0f Market"),i.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"events"}),Sr.dispatch(Ma())}},i.a.createElement(xr,{event:kt.events,eventIcon:"\ud83d\udea8",eventClass:"police-siren"},"\ud83d\udce3")," Events"),i.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"goals"}),Sr.dispatch(Ma())}},"\ud83c\udfc6 Goals")),i.a.createElement("div",{className:"right-panel"},this.getPanel())))))))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(jr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.a5e2876f.chunk.js.map