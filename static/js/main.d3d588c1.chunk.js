(this.webpackJsonpsocsim=this.webpackJsonpsocsim||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),s=a(7),l=a.n(s),o=(a(13),a(1)),c=a(2),u=a(4),h=a(3),m=(a(14),a(5));function d(e){return{year:e.date.year,season:e.date.season}}function p(e,t){return t.year>-1&&(t.year==e.year||t.year==e.year-1&&t.season>e.season)}!function(e){e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Fall=2]="Fall",e[e.Winter=3]="Winter"}(n||(n={}));var y=function(){function e(){Object(o.a)(this,e),this.key=0,this.cityKey=0,this.alive=!0,this.dob={year:0,season:0},this.name="Bean Beanson",this.city=null,this.ethnicity=F(["circle","square","triangle"]),this.lastApproval={year:-1,season:0},this.discrete_food=1,this.shelter="crowded",this.discrete_health=2,this.community="ego",this.ideals="trad",this.job="jobless",this.faith=void 0,this.cash=3,this.partyLoyalty=.2,this.lastHappiness=0,this.lastSentiment=0,this.lastPartySentiment=0,this.seasonSinceLastSale=0,this.seasonSinceLastRent=0,this.lastApprovalDate={year:-1,season:0},this.lastInsultDate={year:-1,season:0},this.fairGoodPrice=1}return Object(c.a)(e,[{key:"getHappinessModifiers",value:function(e,t,a){var n=[M[this.food],M[this.shelter],M[this.health]];return"trad"==this.ideals&&this.ethnicity!=t.majorityEthnicity&&n.push({reason:"Xenophobic",mod:-.1}),this.cash<1?n.push({reason:"Penniless",mod:j.Deficient}):this.cash>3*e.getCostOfLiving()?n.push({reason:"Upper Class",mod:.3}):this.cash>2*e.getCostOfLiving()&&n.push({reason:"Middle Class",mod:.15}),"jobless"==this.job&&n.push({reason:"Unemployed",mod:j.Deficient}),n}},{key:"getSentimentModifiers",value:function(e,t,a,n){var i={party:[],law:[]};return this.community==n.community&&i.party.push({reason:"Same Community",mod:.15}),this.ideals==n.ideals?i.party.push({reason:"Same Ideals",mod:.15}):this.community!=n.community&&i.party.push({reason:"Incompatible Values",mod:-.15}),t.environment&&p(t.environment,this.lastApprovalDate)&&i.party.push({reason:"Public Endorsement",mod:.2}),i}},{key:"calculateBeliefs",value:function(e,t,a,n){this.lastHappiness=D(this.getHappinessModifiers(e,t,a));var i=this.getSentimentModifiers(e,t,a,n);if(this.lastSentiment=D(i.law),this.lastPartySentiment=D(i.party),"jobless"==this.job)this.fairGoodPrice=1;else{var r=P(this.job);this.fairGoodPrice=e.getFairGoodPrice(r)}}},{key:"getSentimentPolicies",value:function(e,t){var a=100;return t.forEach((function(t){t.fx.forEach((function(t){e[t.key]&&(a+=10*t.mag)}))})),a/100}},{key:"_getTraitMap",value:function(){var e,t=(e={},Object(m.a)(e,this.community,!0),Object(m.a)(e,this.ideals,!0),Object(m.a)(e,this.ethnicity,!0),e);return this.faith&&(t[this.faith]=!0),t}},{key:"getFace",value:function(){return this.alive?"hungry"==this.food?"\ud83d\ude2b":"sick"==this.health?"\ud83e\udd22":"podless"==this.shelter?"\ud83e\udd76":"jobless"==this.job?"\ud83d\ude27":this.lastHappiness<0?"\u2639\ufe0f":this.lastHappiness>=50?"\ud83d\ude42":"\ud83d\ude10":"\ud83d\udc80"}},{key:"getIdea",value:function(e){return"hungry"==this.food?{bad:!0,idea:"\ud83c\udf57"}:"sick"==this.health?{bad:!0,idea:"\ud83d\udc8a"}:"podless"==this.shelter?{bad:!0,idea:"\ud83c\udfe0"}:this.canBaby(e)?{bad:!1,idea:"\ud83d\udc76"}:null}},{key:"tryFindRandomJob",value:function(e){Math.random()>.5&&(this.job=F(["builder","doc","farmer"]))}},{key:"canInsult",value:function(){return Boolean(this.city&&this.city.environment&&!p(this.city.environment,this.lastInsultDate))}},{key:"canSupport",value:function(){return Boolean(this.city&&this.city.environment&&!p(this.city.environment,this.lastApprovalDate))}},{key:"work",value:function(e,t){if("jobless"==this.job)this.tryFindRandomJob(e);else{if(this.seasonSinceLastSale++,this.seasonSinceLastSale>2&&Math.random()>.5){var a=t.mostInDemandJob();a&&(this.job=a)}t.produceAndPrice(this,P(this.job),2.5,this.fairGoodPrice)}}},{key:"eat",value:function(e){return"farmer"==this.job?this.discrete_food+=1:this.buyFood(e),this.discrete_food-=1,this.discrete_food<0&&(this.discrete_health-=.3),this.maybeDie("starvation",.6)}},{key:"buyFood",value:function(e){var t=e.tryTransact(this,"food");t&&(this.discrete_food+=t.bought)}},{key:"weather",value:function(e){if(!this.alive)return null;"builder"==this.job?this.shelter="crowded":this.buyHousing(e)||(this.seasonSinceLastRent>1?this.shelter="podless":this.seasonSinceLastRent++);return"podless"==this.shelter&&(this.discrete_health-=.1),this.maybeDie("exposure",.2)}},{key:"buyHousing",value:function(e){var t=e.tryTransact(this,"shelter");return t&&(this.seasonSinceLastRent=0,this.shelter="crowded"),null!=t}},{key:"age",value:function(e){return this.alive?("doc"==this.job?this.discrete_health+=.25:this.buyMeds(e),this.discrete_health-=.2,this.discrete_health=Math.min(this.discrete_health,3),this.maybeDie("sickness",.4)):null}},{key:"buyMeds",value:function(e){var t=e.tryTransact(this,"medicine");t&&(this.discrete_health+=t.bought)}},{key:"maybeOverconsume",value:function(e){var t=2*e.getCostOfLiving();"stuffed"!=this.food&&this.cash>t&&this.buyFood(e),"fresh"!=this.health&&this.cash>t&&this.buyMeds(e)}},{key:"maybeBaby",value:function(e){if(this.canBaby(e.getCostOfLiving())&&Math.random()<=.05){if(!this.city)throw"bean doesnot have city object";return this.city.breedBean(this),{icon:"\ud83c\udf89",message:"A new bean is born!"}}return null}},{key:"canBaby",value:function(e){return this.cash>3*e&&!this.isInCrisis}},{key:"chanceToDonate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.cash>2*e.getCostOfLiving()&&!this.isInCrisis;if(a&&this.lastPartySentiment>.5){var n=t?.2:.5,i=this.lastPartySentiment-n;return i/2}return 0}},{key:"maybeDonate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.chanceToDonate(e,t);if(a>0){var n=Math.random()<a;if(n){var i=1;return this.cash-=i,i}}return 0}},{key:"maybeDie",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return this.discrete_health<0&&Math.random()<=t?(this.die(),{icon:"\u2620\ufe0f",message:"A bean died of ".concat(e,"!")}):null}},{key:"die",value:function(){var e;this.alive=!1,null===(e=this.city)||void 0===e||e.onCitizenDie(this)}},{key:"food",get:function(){return this.discrete_food>=3?"stuffed":this.discrete_food>=1?"sated":"hungry"}},{key:"health",get:function(){return this.discrete_health>=3?"fresh":this.discrete_health>=1?"bruised":"sick"}},{key:"isInCrisis",get:function(){return"hungry"==this.food||"podless"==this.shelter||"sick"==this.health}}]),e}(),f=function(){function e(){Object(o.a)(this,e),this.key=0,this.name="",this.institutionKey=1,this.cash=0,this.seasonSinceLastSale=0,this.seasonalBudget=0,this.good="food",this.parentInstitution=null,this.beansHelped=0,this.inventory=0}return Object(c.a)(e,[{key:"work",value:function(e,t){for(;this.cash>0&&this.inventory<10;){var a=t.tryTransact(this,this.good);if(!a)break;t.addCharity(this,this.good,a.bought)}}}]),e}(),v=["food","shelter","medicine","fun"],b=function(){function e(){var t=this;Object(o.a)(this,e),this.market=new E,this.charity=new E,this.unfulfilledSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalSupply={food:0,shelter:0,medicine:0,fun:0},this.onBeanDie=function(e,a){v.forEach((function(n){var i=t.market.getBeansListings(e,n);if(i){var r=a.getRandomCitizen();r&&(i.sellerCityKey=r.cityKey,i.sellerBeanKey=r.key,i.seller=r)}}))}}return Object(c.a)(e,[{key:"resetSeasonalDemand",value:function(){this.unfulfilledSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalSupply={food:0,shelter:0,medicine:0,fun:0}}},{key:"tryTransact",value:function(e,t){this.totalSeasonalDemand[t]+=1;var a=this.market.getLowestPriceListing(t,1);if(null==a);else{if(a.price<=e.cash)return this.market.transact(a,t,1,e);if(e instanceof y){var n=this.charity.getLowestPriceListing(t,1);if(n&&n.seller instanceof f)return e.partyLoyalty+=.2,n.seller.beansHelped++,n.seller.inventory-=1,this.charity.transact(n,t,1,e)}}return this.unfulfilledSeasonalDemand[t]+=1,null}},{key:"produceAndPrice",value:function(e,t,a,n){this.totalSeasonalSupply[t]+=a;var i=this.market.getBeansListings(e,t);i?(i.quantity+=a,i.price=n,i.quantity=Math.min(i.quantity,6)):this.market.addNewListing(t,a,n,e),this.market.sort(t)}},{key:"addCharity",value:function(e,t,a){var n=this.charity.getOrgsListings(e,t);n?(n.quantity+=a,n.quantity=Math.min(n.quantity,10),e.inventory=n.quantity):(this.charity.addNewOrgListing(t,a,0,e),e.inventory=a)}},{key:"mostInDemandJob",value:function(){var e=this;return v.reduce((function(t,a){return e.unfulfilledSeasonalDemand[a]>t.max&&(t.max=e.unfulfilledSeasonalDemand[a],t.job=function(e){switch(e){case"shelter":return"builder";case"medicine":return"doc";case"fun":return"entertainer";default:case"food":return"farmer"}}(a)),t}),{max:0,job:null}).job}},{key:"getFairGoodPrice",value:function(e){var t=this.totalSeasonalSupply[e]||1,a=this.totalSeasonalDemand[e];return.25+.75*Math.min(a/t,1)}},{key:"getCostOfLiving",value:function(){return this.getFairGoodPrice("food")+this.getFairGoodPrice("shelter")+this.getFairGoodPrice("medicine")}}]),e}(),E=function(){function e(){Object(o.a)(this,e),this.listings={food:[],shelter:[],medicine:[],fun:[]}}return Object(c.a)(e,[{key:"getLowestPriceListing",value:function(e,t){var a=this.listings[e].filter((function(e){return e.quantity>=t}));if(a.length>0){for(var n=1,i=a[0].price,r=1;r<a.length;r++){if(a[r].price>i)break;n++}var s=Math.floor(Math.random()*n);if(s>=a.length)throw"invalid index";return a[s]}return null}},{key:"getBeansListings",value:function(e,t){return this.listings[t].find((function(t){return t.sellerBeanKey==e.key&&t.sellerCityKey==e.cityKey}))}},{key:"getOrgsListings",value:function(e,t){return this.listings[t].find((function(t){return t.sellerOrganizationKey==e.key}))}},{key:"transact",value:function(e,t,a,n){return e.quantity-=a,e.quantity<=0&&this.listings[t].splice(0,1),n.cash-=e.price,e.seller.cash+=e.price,e.seller.seasonSinceLastSale--,{bought:a,price:e.price}}},{key:"addNewListing",value:function(e,t,a,n){this.listings[e].push({sellerCityKey:n.cityKey,sellerBeanKey:n.key,price:a,seller:n,quantity:t})}},{key:"addNewOrgListing",value:function(e,t,a,n){this.listings[e].push({sellerOrganizationKey:n.key,price:a,seller:n,quantity:t})}},{key:"sort",value:function(e){this.listings[e].sort((function(e,t){return e.price-t.price}))}}]),e}(),g=function(){function e(){Object(o.a)(this,e),this.key=1,this.playerKey=1,this.organizations=[],this.name="Citizen's Party",this.slogan="Vote for us!",this.community="state",this.ideals="trad",this.availablePolicies=[],this.proposedPolicy=void 0,this.availableCampaigns=[],this.activeCampaigns=[],this.politicalCapital=10,this.materialCapital=20,this.activeHQs=[],this.seasonalIncome=0,this.seasonalActions=0}return Object(c.a)(e,[{key:"fundOrganizations",value:function(){var e=this;this.organizations.forEach((function(t){e.materialCapital>=t.seasonalBudget&&(e.materialCapital-=t.seasonalBudget,t.cash+=t.seasonalBudget)}))}}]),e}(),k=function e(){Object(o.a)(this,e),this.cityKey=0},w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(function(){function e(){Object(o.a)(this,e),this.callbacks=[]}return Object(c.a)(e,[{key:"publish",value:function(e){this.callbacks.forEach((function(t){return t(e)}))}},{key:"subscribe",value:function(e){this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)}}]),e}()),C=function e(){Object(o.a)(this,e),this.physicalCapital=new w,this.politicalCapital=new w},S=function(){function e(){Object(o.a)(this,e),this.cities=[],this.law={policies:[]},this.economy=new b,this.institutions=[],this.party=new g,this.date={year:0,season:n.Spring},this.electionIn=11,this.yearsEvents=[],this.bus=new C}return Object(c.a)(e,[{key:"calculateComputedState",value:function(){var e=this;this.cities.forEach((function(t){t.calculate(e.economy,e.law),t.beans.forEach((function(a){return a.calculateBeliefs(e.economy,t,e.law,e.party)}))}))}},{key:"next",value:function(){var e=this;this.electionIn--,this.electionIn<=0&&(this.electionIn=8),this.date.season++,this.date.season>3&&(this.date.year++,this.inflate(),this.resetYearlyCounters(),this.date.season=0),this.economy.resetSeasonalDemand(),this.institutions.forEach((function(e){return e.fundOrganizations()})),O(this.beans).forEach((function(t){t.work(e.law,e.economy)})),this.organizations.forEach((function(t){return t.work(e.law,e.economy)})),O(this.beans).forEach((function(t){var a=t.eat(e.economy);a&&e.yearsEvents.push(a),(a=t.weather(e.economy))&&e.yearsEvents.push(a),(a=t.age(e.economy))&&e.yearsEvents.push(a),(a=t.maybeBaby(e.economy))&&e.yearsEvents.push(a)})),this.cities.forEach((function(t){return t.getTaxesAndDonations(e.party,e.economy)})),O(this.beans).forEach((function(t){t.maybeOverconsume(e.economy)})),this.calculateComputedState()}},{key:"inflate",value:function(){var e=(this.beans.reduce((function(e,t){return e+t.cash}),0)+this.organizations.reduce((function(e,t){return e+t.cash}),0))/100,t=Math.round(1*e);if(t>0){var a=this.beans.reduce((function(e,t){return t.cash>e.max&&(e.winner=t,e.max=t.cash),e}),{max:0});a.winner&&(a.winner.cash+=t)}}},{key:"resetYearlyCounters",value:function(){this.yearsEvents=[],this.cities.forEach((function(e){e.yearsPartyDonations=0}))}},{key:"addCharity",value:function(e,t,a){var n=new f;n.name=t,n.good=e,n.seasonalBudget=a,this.party.organizations.push(n)}},{key:"beans",get:function(){return this.cities.reduce((function(e,t){return e.concat(t.beans)}),[])}},{key:"historicalBeans",get:function(){return this.cities.reduce((function(e,t){return e.concat(t.historicalBeans)}),[])}},{key:"organizations",get:function(){return this.institutions.reduce((function(e,t){return e.concat(t.organizations)}),[])}}]),e}();function O(e){for(var t=e.length;t>0;){var a=Math.floor(Math.random()*t),n=e[--t];e[t]=e[a],e[a]=n}return e}var j,N=function(){function e(){Object(o.a)(this,e),this.name="",this.url="",this.type="",this.key=0,this.historicalBeans=[],this.houses=[],this.partyHQ=void 0,this.yearsPartyDonations=0,this.majorityEthnicity="circle",this.environment=void 0,this.doOnCitizenDie=[]}return Object(c.a)(e,[{key:"getRandomCitizen",value:function(){var e=O(this.beans);return e.length>0?e[0]:null}},{key:"onCitizenDie",value:function(e){var t=this;if(e.cash>0){var a=this.getRandomCitizen();a&&(a.cash=a.cash+e.cash,e.cash=0)}this.doOnCitizenDie.forEach((function(a){return a(e,t)}))}},{key:"breedBean",value:function(e){var t,a,n=H(this,this.historicalBeans.length);n.ethnicity=e.ethnicity,n.job=Math.random()<=.5?e.job:F(["doc","farmer","builder","jobless"]),n.cash=e.cash/2,e.cash/=2,this.environment&&(n.dob={year:null===(t=this.environment)||void 0===t?void 0:t.year,season:null===(a=this.environment)||void 0===a?void 0:a.season}),this.historicalBeans.push(n)}},{key:"getTaxesAndDonations",value:function(e,t){var a=this;this.partyHQ&&this.beans.forEach((function(n){var i=n.maybeDonate(t);e.materialCapital+=i,a.yearsPartyDonations+=i}))}},{key:"calculate",value:function(e,t){var a=this.beans.reduce((function(e,t){switch(t.ethnicity){case"circle":e.circle++;break;case"square":e.square++;break;case"triangle":e.triangle++}return e}),{circle:0,square:0,triangle:0});a.circle>a.square&&a.circle>a.triangle?this.majorityEthnicity="circle":a.square>a.circle&&a.square>a.triangle?this.majorityEthnicity="square":this.majorityEthnicity="triangle"}},{key:"beans",get:function(){return this.historicalBeans.filter((function(e){return e.alive}))},set:function(e){throw"can't set city beans"}}]),e}();function D(e){return 100*Math.min(1,Math.max(-1,e.reduce((function(e,t){return e+=t.mod}),0)))}!function(e){e[e.Deficient=-.25]="Deficient",e[e.Sufficient=0]="Sufficient",e[e.Abundant=.15]="Abundant"}(j||(j={}));var M={podless:{reason:"Homeless",mod:j.Deficient},crowded:{reason:"Renting",mod:j.Sufficient},homeowner:{reason:"Homeowner",mod:j.Abundant},sick:{reason:"Sick",mod:j.Deficient},bruised:{reason:"Bruised",mod:j.Sufficient},fresh:{reason:"Healthy",mod:j.Abundant},hungry:{reason:"Hungry",mod:j.Deficient},sated:{reason:"Sated",mod:j.Sufficient},stuffed:{reason:"Stuffed",mod:j.Abundant}};function P(e){switch(e){case"builder":return"shelter";case"doc":return"medicine";case"entertainer":return"fun";default:case"farmer":return"food"}}function B(e){return function(e,t){var a=new Uint32Array(1);window.crypto.getRandomValues(a);var n=a[0]/4294967296;return e=Math.ceil(e),t=Math.floor(t),Math.floor(n*(t-e+1))+e}(0,e-1)}function F(e){if(1==e.length)return e[0];var t=B(e.length);return console.log(t),e[t]}function x(){var e=new S;e.party=new g,e.institutions.push(e.party);for(var t=0;t<6;t++)if(e.cities.push(I(e.cities.length)),e.cities[t].doOnCitizenDie.push(e.economy.onBeanDie),e.cities[t].environment=e.date,t<2)e.cities[t];return e.economy.totalSeasonalDemand.food=e.beans.length,e.economy.totalSeasonalDemand.shelter=e.beans.length,e.economy.totalSeasonalDemand.medicine=e.beans.length,e.next(),e.next(),e.next(),e.next(),e}function I(e){var t=new N;t.key=e,t.name=F(["New ","Old ","Fort ","St. ","Mount ","Grand ","","","","","","","","","",""]),t.name+=F(["Spring","Timber","Over","West","East","North","South","Rock","Sand","Clay","Iron","Ore","Coal","Liver","Hawk","Red","Yellow","Gold","Blue","Black","White","Sunny","Reed","Ox","Mill","Fern","Down","Bel","Bald","Ash"]),t.name+=F(["water "," Springs","ville","dale","lane","peak","coast","beach","port","market","ton","brook"," Creek","land","burgh","bridge","ford","bury","chester","son","vale"," Valley","hill","more","wood"," Oaks"," Cove","mouth","way","crest"]);for(;t.historicalBeans.length<3;)t.historicalBeans.push(H(t,t.historicalBeans.length));for(var a=Math.floor(1.5+Math.floor(3*Math.random()/2)),n=0;n<a;n++)t.houses.push({left:Math.floor(60*Math.random()),top:Math.floor(60*Math.random())});return t}function H(e,t){var a=new y;a.key=t,a.cityKey=e.key,a.city=e,a.name=F(["Chick","Broad","Velvet","Jack","Lima","Whit","Black-Eye","Baker","Pony","Castor","Frenchy","Kid","Runner"])+" ",a.name+=F(["Bean","Navy","Sprout","Soy","Mung","Lent","Faba","Wax","Chick","Green","Pinto"]),a.name+=F(["shell","seed","pea","pod","snap","vine","leaf","shoot"]),a.community=F(["state","ego"]),a.ideals=F(["prog","trad"]),a.faith=F(["book","music","heart","noFaith"]);var n=t%3;return a.job=0==n?"farmer":1==n?"builder":"doc",a.cash=function(e){var t=4+Math.floor(3*Math.random());switch(e){case"doc":return t+2;default:return t}}(a.job),a.discrete_food=2,a}var L=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={show:!1},n}return Object(c.a)(a,[{key:"getButton",value:function(){var e=this;return this.props.hideCloseButton?null:r.a.createElement("button",{type:"button",className:"done",onClick:function(){return e.props.onClick()}},this.props.closeButtonText||"Done")}},{key:"render",value:function(){return this.props.show?r.a.createElement("div",{className:"modal"},this.props.children,this.getButton()):null}}]),a}(r.a.Component),A=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"header",value:function(){return this.props.children?r.a.createElement("b",null,this.props.children):null}},{key:"render",value:function(){var e=this,t=this.props.beans.filter((function(t){return e.props.need(t)==e.props.dire})).length,a={width:Math.floor(t/this.props.beans.length*100)+"%"},n=this.props.beans.filter((function(t){return e.props.need(t)==e.props.abundant})).length,i={width:Math.floor(n/this.props.beans.length*100)+"%"};return r.a.createElement("div",{className:this.props.className},this.header(),r.a.createElement("div",{className:"bar"},r.a.createElement("div",{className:"bar-inner dire",style:a},t>0?"".concat(t," ").concat(ee[this.props.dire]):""),r.a.createElement("div",{className:"bar-inner abundant",style:i},n>0?n:"")))}}]),a}(r.a.Component);function T(e){return _(e,"ego",(function(e){return e.ideals}))}function R(e){return _(e,"state",(function(e){return e.community}))}function _(e,t,a){var n={avg:0,winner:t},i=e.reduce((function(e,t){var n=a(t);return null==e[n]?e[n]=1:e[n]++,e}),{});return Object.keys(i).forEach((function(e){i[e]>n.avg&&(n.avg=i[e],n.winner=e)})),n.avg/=e.length,n}var q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"hq",value:function(){return this.props.city?this.props.city.partyHQ?r.a.createElement("div",null,"\ud83c\udfe2 Has Party HQ",r.a.createElement("br",null),"$",this.props.city.yearsPartyDonations.toFixed(2)," donations this year"):r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",className:"important"},"\ud83c\udfe2 Add HQ for $10"),r.a.createElement("br",null),r.a.createElement("small",null,"+1 action per season & chance for donations")):null}},{key:"render",value:function(){var e=this,t=null;this.props.city&&(t=r.a.createElement("div",null,r.a.createElement("b",null,this.props.city.name),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.props.clearCity()}},"\u274c")));var a,n=this.props.beans.reduce((function(e,t){return e+t.lastHappiness}),0)/(this.props.beans.length||1),i=this.props.beans.reduce((function(e,t){return e+t.cash}),0)/(this.props.beans.length||1),s=this.props.beans.reduce((function(e,t){return e+t.lastPartySentiment}),0)/(this.props.beans.length||1);return r.a.createElement("div",null,t,r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Demographics")),r.a.createElement("div",null,r.a.createElement("b",null,"Population"),"\xa0",r.a.createElement("span",null,this.props.beans.length)),r.a.createElement(z,{report:(a=this.props.beans,_(a,"circle",(function(e){return e.ethnicity})))},"Ethnicity"),r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Situation")),r.a.createElement(A,{beans:this.props.beans,need:function(e){return e.food},dire:"hungry",abundant:"stuffed"},"Food Security"),r.a.createElement(A,{beans:this.props.beans,need:function(e){return e.shelter},dire:"podless",abundant:"homeowner"},"Housing"),r.a.createElement(A,{beans:this.props.beans,need:function(e){return e.health},dire:"sick",abundant:"fresh"},"Healthcare"),r.a.createElement("b",null,"Avg. Money")," $",i.toFixed(2)," \xa0",r.a.createElement("b",null,"Avg. Happiness")," ",Math.round(n),"%",r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Electorate")),r.a.createElement(z,{report:R(this.props.beans)},"Community"),r.a.createElement(z,{report:T(this.props.beans)},"Ideals"),r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Party")),this.hq(),r.a.createElement("div",null,r.a.createElement("b",null,"Approval"),"\xa0",r.a.createElement("span",null,s.toFixed(0),"%")))}}]),a}(r.a.Component),z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e="Leaning";this.props.report.avg>=.51&&(e="Major"),this.props.report.avg>=.8&&(e="Extreme");var t=Math.floor(100*this.props.report.avg),a={width:t+"%"};return r.a.createElement("div",null,r.a.createElement("b",null,this.props.children),"\xa0\xa0",r.a.createElement("span",null,e," ",ee[this.props.report.winner]),r.a.createElement("div",{className:"bar"},r.a.createElement("div",{className:"bar-inner",style:a},t,"%")))}}]),a}(r.a.Component),K=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).timerID=void 0,n.delaySeedSec=void 0,n.waitSeedSec=void 0,n.timerID=null,n.delaySeedSec=60*Math.random()+n.props.bean.key,n.waitSeedSec=1+3*Math.random()+n.props.bean.key,n.state={paused:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.startWander()}},{key:"startWander",value:function(){var e=this;this.setState({paused:!1}),this.timerID=window.setTimeout((function(){return e.stopWander()}),1e3*this.waitSeedSec)}},{key:"componentWillUnmount",value:function(){this.timerID&&window.clearInterval(this.timerID)}},{key:"stopWander",value:function(){var e=this;this.setState({paused:!0}),this.timerID=window.setTimeout((function(){return e.startWander()}),1e3)}},{key:"getIdea",value:function(){if(this.state.paused){var e=this.props.bean.getIdea(this.props.costOfLiving);if(e)return r.a.createElement("span",{className:e.bad?"bad idea":"idea"},e.idea)}return null}},{key:"render",value:function(){var e=this,t=this.props.bean.job+" "+this.props.bean.ethnicity;t+=this.state.paused||!this.props.bean.alive?" paused":"";var a="".concat(this.props.bean.food," ").concat(this.props.bean.shelter," ").concat(this.props.bean.health," ").concat(this.props.bean.community," ").concat(this.props.bean.ideals," $").concat(this.props.bean.cash);return r.a.createElement("span",{className:t+" bean bean-walker interactable",style:{animationDelay:"-"+this.delaySeedSec+"s"},title:a,onClick:function(t){t.stopPropagation(),e.props.onClick()}},this.props.bean.getFace()," ",this.getIdea())}}]),a}(r.a.Component),$=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={tile:null,city:null,activeTileID:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.city.beans.map((function(t){return r.a.createElement(K,{bean:t,key:t.key,costOfLiving:e.props.costOfLiving,onClick:function(){return e.props.onBeanClick(t)}})})),a=this.props.city.historicalBeans.filter((function(e){return!e.alive})).map((function(e,t){return r.a.createElement("span",{key:t,className:"dead",style:{left:10*t+"px"}},"\u26b0\ufe0f")})),n=this.props.city.houses.map((function(e,t){var a={left:e.left+"%",top:e.top+"%"};return r.a.createElement("span",{key:t,style:a,className:"house"},"\ud83c\udfe1")}));return r.a.createElement("div",{className:"tile",onClick:function(){return e.props.onClick()}},a,n,t,r.a.createElement("span",{className:"tile-label"},this.props.tile.name),r.a.createElement("img",{src:this.props.tile.url,alt:this.props.tile.type}))}}]),a}(r.a.Component);function G(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}var W=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={paused:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.world.beans,t=G(e.map((function(e){return e.discrete_food}))),a=G(e.map((function(e){return e.discrete_health}))).toFixed(1),n=e.reduce((function(e,t){return e+t.cash}),0),i=n/(e.length||1),s=G(e.map((function(e){return e.cash}))),l=e.filter((function(e){return e.cash<1})).length,o=Math.max(i,s),c=e.filter((function(e){return e.cash>o})),u=c.length/(e.length||1)*100,h=c.reduce((function(e,t){return e+t.cash}),0)/n*100,m=e.reduce((function(e,t){return e[t.job]=(e[t.job]||0)+1,e}),{}),d=((m.jobless||0)/e.length*100).toFixed(1);function p(e,t){return e.supply+=t.quantity,e.price+=t.price,e.count++,e.avg=e.price/e.count,e}var y=this.props.world.economy.market.listings.food.reduce(p,{supply:0,price:0,avg:0,count:0}),f=this.props.world.economy.market.listings.medicine.reduce(p,{supply:0,price:0,avg:0,count:0}),v=this.props.world.economy.market.listings.shelter.reduce(p,{supply:0,price:0,avg:0,count:0});return r.a.createElement("div",{className:"pad-20"},r.a.createElement("h3",null,"Citizen's Health"),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udf5e Food Security")," Median:",t," meals ",r.a.createElement("br",null),r.a.createElement(A,{beans:this.props.world.beans,need:function(e){return e.food},dire:"hungry",abundant:"stuffed",className:"big"}),"Supply: ",y.supply," meals. Avg. price $",y.avg.toFixed(2)," ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.food," meals"),r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83e\ude7a Healthcare")," Median:",a," ",r.a.createElement("br",null),r.a.createElement(A,{beans:this.props.world.beans,need:function(e){return e.health},dire:"sick",abundant:"fresh",className:"big"}),"Supply: ",f.supply," treatments. Avg. price $",f.avg.toFixed(2),"  ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.medicine," treatments")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udfe1 Housing")," ",r.a.createElement("br",null),r.a.createElement(A,{beans:this.props.world.beans,need:function(e){return e.shelter},dire:"podless",abundant:"homeowner",className:"big"}),"Supply: ",v.supply," units. Avg. price $",v.avg.toFixed(2),"   ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.shelter," units")),r.a.createElement("h3",null,"Economic Health"),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83d\udcb0 Wealth")," Household Wealth: ",n.toFixed(2),r.a.createElement("br",null),l," penniless citizens \xa0 \xa0 Cost of Living: $",this.props.world.economy.getCostOfLiving().toFixed(2)," ",r.a.createElement("br",null),"Median: $",s.toFixed(2)," Average: $",i.toFixed(2)," ",r.a.createElement("br",null),"Top ",u.toFixed(1),"% of beans own ",h.toFixed(1),"% of the wealth"),r.a.createElement("span",null,r.a.createElement("strong",null,"Unemployment")," ",d,"% (",m.jobless,")",r.a.createElement("br",null),r.a.createElement("strong",null,"Employment"),r.a.createElement("ul",{className:"boxes"},r.a.createElement("li",null,m.farmer," farmers"),r.a.createElement("li",null,m.builder," builders"),r.a.createElement("li",null,m.doc," doctors")))))}}]),a}(r.a.Component),Q=(a(15),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeValue=function(e){n.setState({selectedCharityGood:e.target.value})},n.onChangeBudgetValue=function(e){n.setState({selectedCharityBudget:+e.target.value})},n.onFoundCharity=function(){n.state.selectedCharityGood&&n.props.onFoundCharity(n.state.selectedCharityGood,n.state.selectedCharityName,n.state.selectedCharityBudget),n.setState({selectedCharityGood:null,show:!1})},n.state={show:!1,selectedCharityGood:null,selectedCharityName:"Our Lady of ",selectedCharityBudget:1},n}return Object(c.a)(a,[{key:"panel",value:function(){var e=this;return this.state.show?r.a.createElement("div",{className:"panel-add"},r.a.createElement("input",{type:"text",name:"name",value:this.state.selectedCharityName,onChange:function(t){return e.setState({selectedCharityName:t.target.value})}}),r.a.createElement("div",{onChange:this.onChangeValue},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"type",value:"food"})," Food Bank"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"type",value:"shelter"})," Homeless Shelter"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"type",value:"medicine"})," Free Clinic")),r.a.createElement("div",null,r.a.createElement("label",null,"Seasonal Budget:",r.a.createElement("input",{type:"number",style:{width:"50px"},onChange:this.onChangeBudgetValue,value:"1",min:"1",max:"50"})),r.a.createElement("button",{type:"button",className:"callout",onClick:this.onFoundCharity},"Found Charity"))):null}},{key:"list",value:function(){return this.props.world.party.organizations.filter((function(e){return e instanceof f})).map((function(e){var t=e;return r.a.createElement("div",{key:t.key},"\ud83d\udc97 ",r.a.createElement("b",null,t.name)," Has given ",t.beansHelped," beans free ",t.good,". ",t.inventory," ",t.good," and $",t.cash.toFixed(2)," cash.")}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Charity"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({show:!0})}},"\ud83d\udc97 Found New Charity")),r.a.createElement("span",null,"Charities help needy beans while also improving their party loyalty"),this.list(),this.panel())}}]),a}(r.a.Component)),U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.events.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",null,e.icon),"\xa0",r.a.createElement("span",null,e.message))}));return 0===this.props.events.length&&(e=[r.a.createElement("div",{key:0},r.a.createElement("small",null,"No events yet this year"))]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,"Events")),e)}}]),a}(r.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).solicit=function(){n.props.solicit(n.props.bean)&&(n.setState({faceOverride:"\ud83d\ude07"}),n._resetFace())},n.insult=function(){n.props.insult(n.props.bean),n.setState({faceOverride:"\ud83d\ude21"}),n._resetFace()},n.support=function(){n.props.support(n.props.bean),n.setState({faceOverride:"\ud83e\udd29"}),n._resetFace()},n.state={},n}return Object(c.a)(a,[{key:"_resetFace",value:function(){var e=this;setTimeout((function(){e.setState({faceOverride:void 0})}),5e3)}},{key:"happyTable",value:function(e){return e.filter((function(e){return 0!=e.mod})).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"small text-right"},e.reason),r.a.createElement("td",{className:"small"},Math.round(100*e.mod),"%"))}))}},{key:"render",value:function(){var e=this,t=this.props.bean.job+" "+this.props.bean.ethnicity,a=this.props.bean.chanceToDonate(this.props.economy,!0),n=(100*a).toFixed(0)+"% to gain Physical Capital",i=this.props.party.activeHQs.length+2;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,this.props.bean.name,"\xa0",r.a.createElement("small",null,"of ",this.props.city.name)),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.props.clearCity()}},"\u274c")),r.a.createElement("div",{className:"bean-view"},r.a.createElement("span",{className:t+" bean"},void 0===this.state.faceOverride?this.props.bean.getFace():this.state.faceOverride)),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Ethnicity")),r.a.createElement("td",null,ee[this.props.bean.ethnicity])),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,className:"header"},r.a.createElement("b",null,"Situation"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Food Security")),r.a.createElement("td",null,ee[this.props.bean.food])),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Shelter")),r.a.createElement("td",null,ee[this.props.bean.shelter])),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Healthcare")),r.a.createElement("td",null,ee[this.props.bean.health])),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Money")),r.a.createElement("td",null,"$",this.props.bean.cash.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Happiness")),r.a.createElement("td",null,Math.round(this.props.bean.lastHappiness),"%")),this.happyTable(this.props.bean.getHappinessModifiers(this.props.economy,this.props.city,this.props.law)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Community")),r.a.createElement("td",null,ee[this.props.bean.community])),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Ideal")),r.a.createElement("td",null,ee[this.props.bean.ideals])),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,className:"header"},r.a.createElement("b",null,"Party"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Approval")),r.a.createElement("td",null,Math.round(this.props.bean.lastPartySentiment),"%")),this.happyTable(this.props.bean.getSentimentModifiers(this.props.economy,this.props.city,this.props.law,this.props.party).party))),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",disabled:a<.05,className:"important",onClick:this.solicit,title:n},"\ud83e\udd32 Solicit Donation"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("i",null,"Does not cost an Activity"))),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",className:"callout",onClick:this.insult,disabled:!this.props.bean.canInsult(),title:"Decrease this bean's party approval to gain Political Capital"},"\ud83d\ude08 Publically Insult"),r.a.createElement("button",{type:"button",className:"callout",onClick:this.support,disabled:!this.props.bean.canSupport(),title:"Spend Political Capital to increase this bean's party approval"},"\ud83d\ude18 Publically Support")),r.a.createElement("div",{className:"text-center"},r.a.createElement("small",null,i-this.props.party.seasonalActions," of ",i," Activities remaining")))}}]),a}(r.a.Component),J=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getTextForOption",value:function(e){return e.name}}]),a}(function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.props.onChange(e.target.value)},n.state={key:null},n}return Object(c.a)(a,[{key:"options",value:function(){var e=this;return this.props.options.map((function(t){return r.a.createElement("option",{value:t.key,key:t.key},e.getTextForOption(t))}))}},{key:"render",value:function(){return r.a.createElement("select",{onChange:this.onChange,value:this.state.key},this.options())}}]),a}(r.a.Component)),Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onName=function(e){n.setState({name:e.target.value})},n.onSlogan=function(e){n.setState({slogan:e.target.value})},n.onCity=function(e){n.setState({cityKey:+e})},n.state={community:null,ideal:null,name:"Citizen's Party",slogan:"Vote for us!",members:"Citizens",goal:"Legislation",cityKey:0},n}return Object(c.a)(a,[{key:"onCommunity",value:function(e){var t=this;this.setState({community:e},(function(){t.onBigFourChange()}))}},{key:"onIdeal",value:function(e){var t=this;this.setState({ideal:e},(function(){t.onBigFourChange()}))}},{key:"onBigFourChange",value:function(){"ego"===this.state.community&&"trad"===this.state.ideal?this.setState({name:"Liberal Family Party",slogan:"Father Knows Best.",members:"Farmers",goal:"Tariffs"}):"ego"===this.state.community&&"prog"===this.state.ideal?this.setState({name:"Free Worker's Party",slogan:"Liberty for Labor!",members:"Builders",goal:"Right to Strike"}):"state"===this.state.community&&"trad"===this.state.ideal?this.setState({name:"National Landowners' Party",slogan:"For Culture & Country!",members:"Homeowners",goal:"Repeal Property Tax"}):"state"===this.state.community&&"prog"===this.state.ideal&&this.setState({name:"Social People's Party",slogan:"Equality, Guaranteed.",members:"Penniless",goal:"Food Welfare"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Found your Political Party"),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"My fellow party members believe the",r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"community",value:"state",checked:"state"===this.state.community,onChange:function(t){return e.onCommunity(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Government")),"\xa0\xa0or\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"community",value:"ego",checked:"ego"===this.state.community,onChange:function(t){return e.onCommunity(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Individual"))),"\xa0 is responsible for well-being."),r.a.createElement("div",null,"My fellow party members believe in",r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"ideal",value:"trad",checked:"trad"===this.state.ideal,onChange:function(t){return e.onIdeal(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Traditional")),"\xa0\xa0or\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"ideal",value:"prog",checked:"prog"===this.state.ideal,onChange:function(t){return e.onIdeal(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Progressive"))),"\xa0 social values.")),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"My party's first members are mostly ",r.a.createElement("b",null,this.state.members)),r.a.createElement("div",null,"My party's first major goal is to pass ",r.a.createElement("b",null,this.state.goal))),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"My party is named ",r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.onName})),r.a.createElement("div",null,"My party's slogan is ",r.a.createElement("input",{type:"text",value:this.state.slogan,onChange:this.onSlogan}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"My party is based in\xa0",r.a.createElement(J,{options:this.props.cities,onChange:this.onCity})),r.a.createElement("div",null)),r.a.createElement("button",{type:"button",disabled:null==this.state.community||null==this.state.ideal,className:"important btn-found-party",onClick:function(){return e.props.onFound(e.state)}},"Found the ",this.state.name))}}]),a}(r.a.Component),X=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.world.cities.filter((function(e){return null!=e.partyHQ})).map((function(e,t){return r.a.createElement("i",null,t>0?", ":"",e.name)})),t=this.props.world.party.activeHQs.length+2;return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h2",null,this.props.world.party.name)),r.a.createElement("div",null,r.a.createElement("h2",{className:"slogan-group"},r.a.createElement("span",{className:"slogan-before"},r.a.createElement("span",{className:"align-base"},"\u2605\u2605\u2605")),r.a.createElement("span",{className:"slogan"},this.props.world.party.slogan),r.a.createElement("span",{className:"slogan-after"},r.a.createElement("span",{className:"align-base"},"\u2605\u2605\u2605"))))),r.a.createElement("div",{className:"policies"},this.props.world.party.availablePolicies.map((function(e){return te(e)}))),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h3",{className:"small"},"Finances"),r.a.createElement("small",null,"Where money is being raised and spent"),r.a.createElement("table",{className:"classic"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{rowSpan:3},"Revenue"),r.a.createElement("td",null,"Solicitations"),r.a.createElement("td",null," +$1 ")),r.a.createElement("tr",null,r.a.createElement("td",null,"Unsolicited Donations"),r.a.createElement("td",null,"+$1")),r.a.createElement("tr",null,r.a.createElement("td",null,"Fundraisers"),r.a.createElement("td",null,"+$1")),r.a.createElement("tr",null,r.a.createElement("th",{className:"border-t",rowSpan:2},"Expenses"),r.a.createElement("td",{className:"border-t"},"Charities"),r.a.createElement("td",{className:"border-t"},"-$1")),r.a.createElement("tr",null,r.a.createElement("td",null,"Propaganda"),r.a.createElement("td",null,"-$1")),r.a.createElement("tr",null,r.a.createElement("th",{className:"border-t",rowSpan:2},"Physical",r.a.createElement("br",null),"Capital"),r.a.createElement("td",{className:"border-t"},"Income"),r.a.createElement("td",{className:"border-t"},"$",this.props.world.party.seasonalIncome.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,"On Hand"),r.a.createElement("td",null,"$",this.props.world.party.materialCapital.toFixed(2)))))),r.a.createElement("div",null,r.a.createElement("h3",{className:"small"},"Headquarters"),r.a.createElement("small",null,"Party HQs add Activities and cash donations"),r.a.createElement("div",null,r.a.createElement("strong",null,"HQ Locations:")," ",e),r.a.createElement("h3",{className:"small"},"Activities"),r.a.createElement("small",null,"Number of things that can be done in one season"),r.a.createElement("div",null,"2 free actions + ",this.props.world.party.activeHQs.length," Activities from party HQs"),r.a.createElement("div",null,t-this.props.world.party.seasonalActions," Activities remaining this season"))))}}]),a}(r.a.Component),Z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=+new Date,a=e.change>0;n.setState({bubbles:n.state.bubbles.concat([{s:(a?"+":"")+e.change,t:t,c:a?"pos":"neg"}])}),setTimeout((function(){n.setState({bubbles:n.state.bubbles.filter((function(e){return e.t!=t}))})}),1500)},n.state={bubbles:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.changeEvent&&this.props.changeEvent.subscribe(this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.changeEvent&&this.props.changeEvent.unsubscribe(this.onChange)}},{key:"render",value:function(){var e=this,t=this.state.bubbles.map((function(t){return r.a.createElement("span",{key:t.t,className:[t.c,e.props.bubbleClass,"bubbler"].join(" ")},e.props.icon," ",t.s)}));return r.a.createElement("span",{className:"bubble-parent"},this.props.children,t)}}]),a}(r.a.Component),ee={state:"Statist",ego:"Egoist",trad:"Traditionalist",prog:"Progressive",circle:"Circle",square:"Square",triangle:"Triangle",book:"Book",heart:"Heart",music:"Music",noFaith:"Faithless",hungry:"Hungry",sated:"Sated",stuffed:"Stuffed",podless:"Homeless",crowded:"Crowded",homeowner:"Homeowner",sick:"Sick",bruised:"Bruised",fresh:"Fresh"};function te(e){return r.a.createElement("div",{className:"policy",key:e.key},r.a.createElement("b",null,e.key),r.a.createElement("p",null,e.fx.map((function(e){return function(e){return r.a.createElement("span",{className:"badge"},ee[e.key],function(e){switch(e){case-3:return"---";case-2:return"--";case-1:return"-";case 1:return"+";case 2:return"++";case 3:return"+++";default:return"/"}}(e.mag))}(e)}))))}var ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).foundParty=function(e){n.state.world.party.name=e.name,n.state.world.party.slogan=e.slogan,e.community&&(n.state.world.party.community=e.community),e.ideal&&(n.state.world.party.ideals=e.ideal);var t=n.state.world.cities.find((function(t){return t.key==e.cityKey}));t&&(t.beans.forEach((function(t){e.community&&(t.community=e.community),e.ideal&&(t.ideals=e.ideal)})),function(e,t){var a=new k;a.cityKey=e.key,e.partyHQ=a,t.activeHQs.push(a.cityKey)}(t,n.state.world.party)),n.state.world.calculateComputedState(),n.setState({world:n.state.world,activeModal:null})},n.foundCharity=function(e,t,a){n.state.world.addCharity(e,t,a),n.setState({world:n.state.world})},n.insult=function(e){n.state.world.party.politicalCapital+=1,e.lastInsultDate=d(n.state.world),e.city&&e.calculateBeliefs(n.state.world.economy,e.city,n.state.world.law,n.state.world.party),n.setState({world:n.state.world}),n.state.world.bus.politicalCapital.publish({change:1})},n.support=function(e){n.state.world.party.politicalCapital-=1,e.lastApprovalDate=d(n.state.world),e.city&&e.calculateBeliefs(n.state.world.economy,e.city,n.state.world.law,n.state.world.party),n.setState({world:n.state.world}),n.state.world.bus.politicalCapital.publish({change:-1})},n.solicit=function(e){var t=e.maybeDonate(n.state.world.economy,!0);return t>0&&(n.state.world.party.materialCapital+=t,n.setState({world:n.state.world}),n.state.world.bus.physicalCapital.publish({change:t}),!0)},n.state={world:x(),activeCityID:null,activeBeanID:null,activeModal:"party_creation",activeRightPanel:"overview"},n.state.world.calculateComputedState(),n}return Object(c.a)(a,[{key:"endTurn",value:function(){this.state.world.next(),this.setState({world:this.state.world})}},{key:"getPanel",value:function(){var e=this;switch(this.state.activeRightPanel){case"overview":if(null==this.state.activeCityID)return r.a.createElement(q,{beans:this.state.world.beans,clearCity:function(){return e.setState({activeCityID:null})}});var t=this.state.world.cities.find((function(t){return t.key==e.state.activeCityID}));if(t){if(null!=this.state.activeBeanID){var a=t.beans.find((function(t){return t.key==e.state.activeBeanID}));if(a)return r.a.createElement(V,{bean:a,city:t,economy:this.state.world.economy,party:this.state.world.party,bus:this.state.world.bus,law:this.state.world.law,solicit:this.solicit,insult:this.insult,support:this.support,clearCity:function(){return e.setState({activeCityID:null,activeBeanID:null})}})}return r.a.createElement(q,{beans:null===t||void 0===t?void 0:t.beans,city:t,clearCity:function(){return e.setState({activeCityID:null})}})}return r.a.createElement("div",null);case"goals":return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,"Goals")),r.a.createElement("ul",null,r.a.createElement("li",null,"\u2611\ufe0f Create Party"),r.a.createElement("li",null,"\u2b55\ufe0f Solicit Donations",r.a.createElement("span",{title:"Select a single Bean and Solicit Donation"},"\u2754")),r.a.createElement("li",null,"\u2b55\ufe0f Review Party"),r.a.createElement("li",null,"\u2b55\ufe0f Create Propaganda"),r.a.createElement("li",null,"\u2b55\ufe0f Pass Legislation")));case"events":return r.a.createElement(U,{events:this.state.world.yearsEvents})}}},{key:"render",value:function(){var e=this,t=n[this.state.world.date.season],a=this.state.world.economy.getCostOfLiving(),i=this.state.world.cities.map((function(t){return r.a.createElement($,{tile:t,city:t,costOfLiving:a,key:t.key,onClick:function(){return e.setState({activeCityID:t.key,activeRightPanel:"overview",activeBeanID:null})},onBeanClick:function(a){return e.setState({activeCityID:t.key,activeRightPanel:"overview",activeBeanID:a.key})}})})),s=this.state.world.party.activeCampaigns.reduce((function(e,t){return e+t.seasonalCost}),0);return r.a.createElement("div",{className:"canvas"},r.a.createElement("div",{className:"world"},i),r.a.createElement("div",{className:"overlay"},r.a.createElement(L,{show:"party_creation"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})},hideCloseButton:!0},r.a.createElement(Y,{cities:this.state.world.cities,onFound:this.foundParty})),r.a.createElement(L,{show:"party"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(X,{world:this.state.world})),r.a.createElement(L,{show:"policy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement("b",null,"Active Policies"),r.a.createElement("div",{className:"policies"},this.state.world.party.availablePolicies.map((function(e){return te(e)})))),r.a.createElement(L,{show:"campaign"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement("div",{className:"policies"},r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Propaganda"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){}},"\ud83c\udf99\ufe0f Create New Propaganda")),r.a.createElement("span",null,"Propaganda changes beans' feelings on a wide variety of topics."),r.a.createElement(Q,{world:this.state.world,onFoundCharity:this.foundCharity}),r.a.createElement("div",null,r.a.createElement("b",null,"Campaign Finances")," ",r.a.createElement("br",null),r.a.createElement("b",null,"Expenses")," $",s," ",r.a.createElement("b",null,"Surplus")," $",this.state.world.party.seasonalIncome-s))),r.a.createElement(L,{show:"economy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},"economy"==this.state.activeModal?r.a.createElement(W,{world:this.state.world}):""),r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"top"},r.a.createElement("span",null,"\xa0 Year ",this.state.world.date.year,", \xa0",t),"\xa0 \xa0 \xa0 \xa0",r.a.createElement("span",null,"Budget"),r.a.createElement("span",{className:"pull-r",style:{marginRight:"2em"}},"election in ",this.state.world.electionIn," seasons \xa0",r.a.createElement("button",{type:"button",className:"important",onClick:function(){return e.endTurn()}},"End Turn"))),r.a.createElement("div",{className:"bottom"},r.a.createElement(Z,{changeEvent:this.state.world.bus.physicalCapital,icon:"\ud83d\udcb0"},r.a.createElement("b",null,"\ud83d\udcb0 Physical Capital")," ",this.state.world.party.materialCapital.toFixed(0)),r.a.createElement(Z,{changeEvent:this.state.world.bus.politicalCapital,icon:"\ud83e\udd1d"},r.a.createElement("b",null,"\ud83e\udd1d Political Capital")," ",this.state.world.party.politicalCapital),r.a.createElement("span",null,r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"economy"})}},"Situation Report"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"party"})}},"Party"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeModal:"campaign"})}},"Campaigns"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeModal:"policy"})}},"Law")))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"full-width-tabs"},r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"overview"})}},"\ud83d\udcc8 Overview"),r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"events"})}},"\ud83d\udce3 Events"),r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"goals"})}},"\ud83c\udfc6 Goals")),this.getPanel())))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.d3d588c1.chunk.js.map