(this.webpackJsonpsocsim=this.webpackJsonpsocsim||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),s=a(9),l=a.n(s),o=(a(15),a(1)),c=a(2),u=a(4),h=a(3),m=(a(16),a(17),a(5)),d=function(){function e(t){Object(o.a)(this,e),this.onPublish=t,this.callbacks=[]}return Object(c.a)(e,[{key:"publish",value:function(e){this.onPublish&&this.onPublish(e),this.callbacks.forEach((function(t){return t(e)}))}},{key:"subscribe",value:function(e){this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)}}]),e}(),p=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(d),y=function e(){Object(o.a)(this,e),this.physicalCapital=new p,this.politicalCapital=new p,this.labor=new p};function f(e){return{year:e.date.year,season:e.date.season,day:e.date.day}}function b(e,t){return t.year>-1&&(t.year==e.year||t.year==e.year-1&&t.season>e.season)}!function(e){e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Fall=2]="Fall",e[e.Winter=3]="Winter"}(n||(n={}));var v=function e(t,a){Object(o.a)(this,e),this.q=t,this.r=a},g=[new v(1,0),new v(1,-1),new v(0,-1),new v(-1,0),new v(-1,1),new v(0,1)];function E(e){return g[e]}function k(e,t){var a=E(t);return new v(e.q+a.q,e.r+a.r)}function w(e,t){for(var a,n,i=[],r=function(e,t){return new v(e.q+t.q,e.r+t.r)}(e,(a=E(4),n=t,new v(a.q*n,a.r*n))),s=0;s<6;s++)for(var l=0;l<t;l++)i.push(r),r=k(r,s);return i}function C(e,t,a){var n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);return r<=a||0==r?t:{x:e.x+n/r*a,y:e.y+i/r*a}}function S(e,t,a){return e+(t-e)*a}function x(e,t,a){return{x:S(e.x,t.x,a),y:S(e.y,t.y,a),z:S(e.z,t.z,a)}}function O(e){var t=Math.round(e.x),a=Math.round(e.y),n=Math.round(e.z),i=Math.abs(t-e.x),r=Math.abs(a-e.y),s=Math.abs(n-e.z);return i>r&&i>s?t=-a-n:r>s?a=-t-n:n=-t-a,{x:t,y:a,z:n}}function j(e){var t=e.x,a=e.z;return new v(t,a)}function _(e){return{x:e.q,z:e.r,y:-e.q-e.r}}function N(e,t){for(var a=function(e,t){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)+Math.abs(e.z-t.z))/2}(e,t),n=[],i=0;i<=a;i++)n.push(j(O(x(e,t,1/a*i))));return n}var B=new function e(t,a,n,i,r,s,l,c,u){Object(o.a)(this,e),this.f0=t,this.f1=a,this.f2=n,this.f3=i,this.b0=r,this.b1=s,this.b2=l,this.b3=c,this.start_angle=u}(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0),M={x:0,y:0};function D(e,t,a){var n=B,i=(n.f0*a.q+n.f1*a.r)*e.x,r=(n.f2*a.q+n.f3*a.r)*e.y;return{x:i+t.x,y:r+t.y}}function P(e){return{x:e.r*Math.cos(e.az),y:e.r*Math.sin(e.az)}}function T(e,t,a){var n=e.byType[t].coordByID[a];return n?H(D(e.hex_size,e.petriOrigin,n)):{background:"red"}}function H(e){return{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}var L={farm:"\ud83c\udf91",house:"\ud83c\udfe1",hospital:"\ud83c\udfe5",church:"\u26ea",theater:"\ud83c\udfdf\ufe0f",courthouse:"\ud83c\udfeb"},A="farm",F="house",I="hospital",R={farmer:"farm",builder:"house",doc:"hospital",entertainer:"theater",cleric:"church",jobless:"house",polit:"house"},q=function(){function e(){Object(o.a)(this,e),this.byCoord={},this.byType={house:{coordByID:{},all:[]},farm:{coordByID:{},all:[]},hospital:{coordByID:{},all:[]},theater:{coordByID:{},all:[]},courthouse:{coordByID:{},all:[]},church:{coordByID:{},all:[]}},this.movers={bean:{}},this.numberOfRings=5,this.hexes=function(e,t){for(var a=[e],n=0;n<t;n++)a=a.concat(w(e,n));return a}({q:0,r:0},this.numberOfRings),this.hex_size={x:70,y:70},this.petriRadius=550,this.petriOrigin={x:this.petriRadius,y:this.petriRadius}}return Object(c.a)(e,[{key:"numberOf",value:function(e){return this.byType[e].all.length}},{key:"lookupBuilding",value:function(e){return this.byCoord[e.q+","+e.r]}},{key:"addBuilding",value:function(e,t){return this.byType[t.type].all.push(t),this.byType[t.type].coordByID[t.key]=e,this.byCoord[e.q+","+e.r]=t,null}},{key:"removeBuilding",value:function(e,t){var a=this.byType[t.type].all.indexOf(t);return this.byType[t.type].all.splice(a,1),delete this.byType[t.type].coordByID[t.key],this.byCoord[e.q+","+e.r]=void 0,null}}]),e}(),z=(a(18),{x:25,y:25});function G(e){return D(z,M,e)}var K=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"slots",value:function(){return g.map((function(e,t){return r.a.createElement("span",{key:t,className:"slot",style:H(G(e))})}))}},{key:"render",value:function(){return r.a.createElement("div",{key:this.props.building.type+this.props.building.key,style:T(this.props.city,this.props.building.type,this.props.building.key),className:"building "+this.props.building.type},L[this.props.building.type],this.slots())}}]),a}(r.a.Component);var U=function(){function e(t){Object(o.a)(this,e),this.data=t}return Object(c.a)(e,[{key:"enter",value:function(e){this.data.elapsed=0}},{key:"act",value:function(e,t){var a=this._act(e,t);return this.data.elapsed=this.Elapsed+t,a}},{key:"exit",value:function(e){}},{key:"Elapsed",get:function(){return this.data.elapsed||0}}]),e}(),W=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"_act",value:function(e,t){if(this.Elapsed<200)return this;if(e instanceof ae&&e.city){if(e.discrete_food<=2*Ce.food.sufficient){var a=X(e.city,e,A);return J.create(a,{act:"buy",good:"food"})}if(e.daysSinceSlept>=ee){var n=X(e.city,e,F);return J.create(n,{act:"buy",good:"shelter"})}if(e.discrete_health<=2*Ce.medicine.sufficient){var i=X(e.city,e,I);return J.create(i,{act:"buy",good:"medicine"})}var r=X(e.city,e,R[e.job]);return J.create(r,{act:"work",good:Se(e.job)})}return this}}],[{key:"create",value:function(){return new a({act:"idle"})}}]),a}(U),J=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"_act",value:function(e,t){if(e instanceof ae&&e.city&&this.data.destinations&&this.data.destinations.length){var a=e.city.movers.bean[e.key],n=this.data.destinations[0],i=C(a,n,t/1e3*e.speed);e.city.movers.bean[e.key]=i,i.x==n.x&&i.y==n.y&&(this.data.location=i,this.data.destinations.shift())}return null==this.data.destinations||0===this.data.destinations.length?this.data.intent?Z[this.data.intent.act](this.data.intent):W.create():this}}],[{key:"create",value:function(e,t){return new a({act:"travel",destinations:e,intent:t})}}]),a}(U),$=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"_act",value:function(e,t){var a,n;return this.Elapsed>2e3&&e instanceof ae&&this.data.good&&(null===(a=e.city)||void 0===a?void 0:a.economy)&&(null===(n=e.city)||void 0===n?void 0:n.law)?(e.work(e.city.law,e.city.economy),W.create()):this}}],[{key:"create",value:function(e){return new a({act:"work",good:e})}}]),a}(U),V=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).sinceLastAttemptMS=0,e.attempts=0,e._bought=!1,e}return Object(c.a)(a,[{key:"tryBuy",value:function(e){var t;e instanceof ae&&this.data.good&&(null===(t=e.city)||void 0===t?void 0:t.economy)&&(this._bought=e.buy[this.data.good](e.city.economy)),this.sinceLastAttemptMS=0,this.attempts++}},{key:"enter",value:function(e){this.tryBuy(e)}},{key:"_act",value:function(e,t){return!this._bought&&this.sinceLastAttemptMS>250&&(this.tryBuy(e),this.attempts>=3&&("food"==this.data.good||"medicine"==this.data.good)&&e instanceof ae&&e.getCrimeDecision(this.data.good,"desperation"))?Y.create(this.data.good):this.Elapsed>1500?W.create():this}}],[{key:"create",value:function(e){return new a({act:"buy",good:e})}}]),a}(U),Q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"_act",value:function(e,t){return this}}],[{key:"create",value:function(e){return new a({act:"chat",intent:e})}}]),a}(U),Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"_act",value:function(e,t){var a,n;return this.Elapsed>1500&&e instanceof ae&&(null===(a=e.city)||void 0===a?void 0:a.economy)&&("food"===this.data.good||"medicine"===this.data.good)?(e.steal(this.data.good,null===(n=e.city)||void 0===n?void 0:n.economy),W.create()):this}}],[{key:"create",value:function(e){return new a({act:"crime",good:e})}}]),a}(U),Z={idle:function(e){return new W(e)},work:function(e){return new $(e)},chat:function(e){return new Q(e)},travel:function(e){return new J(e)},craze:function(e){return new V(e)},buy:function(e){return new V(e)},sleep:function(e){return new V(e)},soapbox:function(e){return new V(e)},crime:function(e){return new V(e)}};function X(e,t,a){var n=Me(e.byType[a].all);return t.destinationKey=n.key,function(e,t,a){var n=e.byType[a.type].coordByID[a.key],i=e.movers.bean[t.key];return(r=function(e,t,a){var n=B,i=(a.x-t.x)/e.x,r=(a.y-t.y)/e.y,s=n.b0*i+n.b1*r,l=n.b2*i+n.b3*r;return new v(s,l)}(e.hex_size,e.petriOrigin,i),s=n,N(_(r),_(s))).map((function(t){return D(e.hex_size,e.petriOrigin,t)})).map((function(e,t,a){if(t===a.length-1){var n=G(Me(g));return{x:e.x+n.x,y:e.y+n.y}}return e}));var r,s}(e,t,n)}var ee=7,te=2*ee,ae=function(){function e(){var t=this;Object(o.a)(this,e),this.key=0,this.cityKey=0,this.alive=!0,this.dob={year:0,season:0,day:1},this.name="Human Bean",this.sanity="sane",this.discrete_sanity=10,this.activity_queue=[],this.speed=60,this.direction={x:0,y:0},this.markers=[],this.destinationKey=0,this.city=null,this.ethnicity=Me(["circle","square","triangle"]),this.lastApproval={year:-1,season:0,day:0},this.discrete_food=1,this.shelter="crowded",this.discrete_health=2,this.community="ego",this.ideals="trad",this.job="jobless",this.faith=void 0,this.cash=3,this.partyLoyalty=.2,this.lastHappiness=0,this.lastSentiment=0,this.lastPartySentiment=0,this.ticksSinceLastSale=0,this.daysSinceSlept=0,this.lastApprovalDate={year:-1,season:0,day:0},this.lastInsultDate={year:-1,season:0,day:0},this.fairGoodPrice=1,this.buy={food:function(e){return null!=t.buyFood(e)},medicine:function(e){return null!=t.buyMeds(e)},fun:function(e){return!1},shelter:function(e){return t.buyHousing(e)}},this.state=W.create(),this.onAct=new d}return Object(c.a)(e,[{key:"getHappinessModifiers",value:function(e,t,a){var n=[we[this.food],we[this.shelter],we[this.health]];return"trad"==this.ideals&&this.ethnicity!=t.majorityEthnicity&&n.push({reason:"Xenophobic",mod:-.1}),this.cash<1?n.push({reason:"Penniless",mod:ve.Deficient}):this.cash>3*e.getCostOfLiving()?n.push({reason:"Upper Class",mod:.3}):this.cash>2*e.getCostOfLiving()&&n.push({reason:"Middle Class",mod:.15}),"jobless"==this.job&&n.push({reason:"Unemployed",mod:ve.Deficient}),n}},{key:"getSentimentModifiers",value:function(e,t,a,n){var i=this,r={party:[],law:[]};return this.community==n.community&&r.party.push({reason:"Same Community",mod:.15}),this.ideals==n.ideals?r.party.push({reason:"Same Ideals",mod:.15}):this.community!=n.community&&r.party.push({reason:"Incompatible Values",mod:-.15}),t.environment&&b(t.environment,this.lastApprovalDate)&&r.party.push({reason:"Public Endorsement",mod:.2}),n.differingPolicies(a).forEach((function(e){(e.community&&e.community==i.community||e.ideals&&e.ideals==i.ideals)&&r.party.push({reason:"Likes "+e.name,mod:.1})})),r}},{key:"calculateBeliefs",value:function(e,t,a,n){this.lastHappiness=ke(this.getHappinessModifiers(e,t,a));var i=this.getSentimentModifiers(e,t,a,n);if(this.lastSentiment=ke(i.law),this.lastPartySentiment=ke(i.party),"jobless"==this.job)this.fairGoodPrice=1;else{var r=Se(this.job);this.fairGoodPrice=e.getFairGoodPrice(r)}}},{key:"getSentimentPolicies",value:function(e,t){var a=100;return t.forEach((function(t){t.fx.forEach((function(t){e[t.key]&&(a+=10*t.mag)}))})),a/100}},{key:"_getTraitMap",value:function(){var e,t=(e={},Object(m.a)(e,this.community,!0),Object(m.a)(e,this.ideals,!0),Object(m.a)(e,this.ethnicity,!0),e);return this.faith&&(t[this.faith]=!0),t}},{key:"getFace",value:function(){return this.alive?"buy"==this.state.data.act&&"shelter"==this.state.data.good?"\ud83d\ude34":"crime"==this.state.data.act?"\ud83d\ude08":"hungry"==this.food?"\ud83d\ude2b":"sick"==this.health?"\ud83e\udd22":"podless"==this.shelter?"\ud83e\udd76":"jobless"==this.job?"\ud83d\ude27":this.lastHappiness<0?"\u2639\ufe0f":this.lastHappiness>=50?"\ud83d\ude42":"\ud83d\ude10":"\ud83d\udc80"}},{key:"getIdea",value:function(e){return"hungry"==this.food?{bad:!0,idea:"\ud83c\udf57"}:"sick"==this.health?{bad:!0,idea:"\ud83d\udc8a"}:"podless"==this.shelter?{bad:!0,idea:"\ud83c\udfe0"}:this.canBaby(e)?{bad:!1,idea:"\ud83d\udc76"}:null}},{key:"getCrimeDecision",value:function(e,t){var a=Math.random(),n=.05;return"ego"==this.community&&(n+=.1),("desperation"===t&&"sick"===this.health||"hungry"===this.food)&&(n+=.15),n<=a}},{key:"tryFindRandomJob",value:function(e){Math.random()<=.5&&(this.job=Me(["builder","doc","farmer"]))}},{key:"canInsult",value:function(){return Boolean(this.city&&this.city.environment&&!b(this.city.environment,this.lastInsultDate))}},{key:"canSupport",value:function(){return Boolean(this.city&&this.city.environment&&!b(this.city.environment,this.lastApprovalDate))}},{key:"work",value:function(e,t){if("jobless"==this.job)this.tryFindRandomJob(e);else{switch(this.job){case"farmer":this.discrete_food=Math.min(this.discrete_food+1,2*Ce.food.sufficient);break;case"doc":this.discrete_health=Math.min(this.discrete_health+1,2*Ce.medicine.sufficient);break;case"builder":this.shelter="crowded",this.daysSinceSlept=0}if(this.ticksSinceLastSale++,this.ticksSinceLastSale>7&&Math.random()>.5){var a=t.mostInDemandJob();a&&(this.job=a)}t.produceAndPrice(this,Se(this.job),4,this.fairGoodPrice)}}},{key:"buyFood",value:function(e){var t=e.tryTransact(this,"food",.5,3);return t&&(this.discrete_food+=t.bought),t}},{key:"steal",value:function(e,t){t.steal(e,3)}},{key:"buyHousing",value:function(e){var t=e.tryTransact(this,"shelter");return t?(this.daysSinceSlept=0,this.shelter="crowded"):this.daysSinceSlept>=te&&(this.shelter="podless"),null!=t}},{key:"age",value:function(e){if(!this.alive)return null;this.discrete_food-=1/7,this.discrete_food<0&&(this.discrete_health-=.2);var t=this.maybeDie("starvation",.6);if(t)return t;"podless"==this.shelter&&(this.discrete_health-=1/14),this.daysSinceSlept++;var a=this.maybeDie("exposure",.2);return a||(this.discrete_health-=.05,this.discrete_health=Math.min(this.discrete_health,3),this.maybeDie("sickness",.4))}},{key:"buyMeds",value:function(e){var t=e.tryTransact(this,"medicine",.5,3);return t&&(this.discrete_health+=t.bought),t}},{key:"maybeBaby",value:function(e){if(this.canBaby(e.getCostOfLiving())&&Math.random()<=.01){if(!this.city)throw"bean does not have city object";return this.city.breedBean(this),{icon:"\ud83c\udf89",message:"A new subject is born!"}}return null}},{key:"canBaby",value:function(e){return this.cash>3*e&&!this.isInCrisis}},{key:"chanceToDonate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.cash>2*e.getCostOfLiving()&&!this.isInCrisis;if(a&&this.lastPartySentiment>.5){var n=t?.2:.5,i=this.lastPartySentiment-n;return i/2}return 0}},{key:"maybeDonate",value:function(e){return 0}},{key:"maybeDie",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return this.discrete_health<0&&Math.random()<=t?(this.die(),{icon:"\u2620\ufe0f",message:"A bean died of ".concat(e,"!")}):null}},{key:"die",value:function(){var e;this.alive=!1,null===(e=this.city)||void 0===e||e.onCitizenDie(this)}},{key:"schedule",value:function(){}},{key:"food",get:function(){return this.discrete_food>=Ce.food.abundant?"stuffed":this.discrete_food>=Ce.food.sufficient?"sated":"hungry"}},{key:"health",get:function(){return this.discrete_health>=Ce.medicine.abundant?"fresh":this.discrete_health>=Ce.medicine.sufficient?"bruised":"sick"}},{key:"isInCrisis",get:function(){return"hungry"==this.food||"podless"==this.shelter||"sick"==this.health}}]),e}(),ne=["food","shelter","medicine","fun"],ie=function(){function e(){var t=this;Object(o.a)(this,e),this.market=new re,this.charity=new re,this.unfulfilledSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalSupply={food:0,shelter:0,medicine:0,fun:0},this.onBeanDie=function(e,a){ne.forEach((function(n){var i=t.market.getBeansListings(e,n);if(i){var r=a.getRandomCitizen();r&&(i.sellerCityKey=r.cityKey,i.sellerBeanKey=r.key,i.seller=r)}}))}}return Object(c.a)(e,[{key:"resetSeasonalDemand",value:function(){this.unfulfilledSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalDemand={food:0,shelter:0,medicine:0,fun:0},this.totalSeasonalSupply={food:0,shelter:0,medicine:0,fun:0}}},{key:"tryTransact",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.totalSeasonalDemand[t]+=n;var i=this.market.getLowestPriceListing(t,a);if(null==i)return this.unfulfilledSeasonalDemand[t]+=n,null;var r=Math.min(i.quantity,n);return i.price<=e.cash*r?this.market.transact(i,t,r,e):(this.unfulfilledSeasonalDemand[t]+=r,null)}},{key:"steal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Me(this.market.listings[e]);if(null==a)return null;var n=Math.min(a.quantity,t);return this.market.subtractFromListing(a,e,n),n}},{key:"produceAndPrice",value:function(e,t,a,n){this.totalSeasonalSupply[t]+=a;var i=this.market.getBeansListings(e,t);i?(i.quantity+=a,i.price=n,i.quantity=Math.min(i.quantity,6)):this.market.addNewListing(t,a,n,e),this.market.sort(t)}},{key:"addCharity",value:function(e,t,a){var n=this.charity.getOrgsListings(e,t);n?(n.quantity+=a,n.quantity=Math.min(n.quantity,10),e.inventory=n.quantity):(this.charity.addNewOrgListing(t,a,0,e),e.inventory=a)}},{key:"mostInDemandJob",value:function(){var e=this;return ne.reduce((function(t,a){return e.unfulfilledSeasonalDemand[a]>t.max&&(t.max=e.unfulfilledSeasonalDemand[a],t.job=function(e){switch(e){case"shelter":return"builder";case"medicine":return"doc";case"fun":return"entertainer";default:case"food":return"farmer"}}(a)),t}),{max:0,job:null}).job}},{key:"getFairGoodPrice",value:function(e){var t=this.totalSeasonalSupply[e]||1,a=this.totalSeasonalDemand[e];return.25+.75*Math.min(a/t,1)}},{key:"getCostOfLiving",value:function(){return this.getFairGoodPrice("food")+this.getFairGoodPrice("shelter")+this.getFairGoodPrice("medicine")}}]),e}(),re=function(){function e(){Object(o.a)(this,e),this.listings={food:[],shelter:[],medicine:[],fun:[]}}return Object(c.a)(e,[{key:"getLowestPriceListing",value:function(e,t){var a=this.listings[e].filter((function(e){return e.quantity>=t}));if(a.length>0){for(var n=1,i=a[0].price,r=1;r<a.length;r++){if(a[r].price>i)break;n++}var s=Math.floor(Math.random()*n);if(s>=a.length)throw"invalid index";return a[s]}return null}},{key:"getBeansListings",value:function(e,t){return this.listings[t].find((function(t){return t.sellerBeanKey==e.key&&t.sellerCityKey==e.cityKey}))}},{key:"getOrgsListings",value:function(e,t){return this.listings[t].find((function(t){return t.sellerOrganizationKey==e.key}))}},{key:"transact",value:function(e,t,a,n){this.subtractFromListing(e,t,a);var i=e.price*a;return n.cash-=i,e.seller.cash+=i,e.seller.ticksSinceLastSale=0,{bought:a,price:i}}},{key:"subtractFromListing",value:function(e,t,a){e.quantity-=a,e.quantity<=0&&this.listings[t].splice(0,1)}},{key:"addNewListing",value:function(e,t,a,n){this.listings[e].push({sellerCityKey:n.cityKey,sellerBeanKey:n.key,price:a,seller:n,quantity:t})}},{key:"addNewOrgListing",value:function(e,t,a,n){this.listings[e].push({sellerOrganizationKey:n.key,price:a,seller:n,quantity:t})}},{key:"sort",value:function(e){this.listings[e].sort((function(e,t){return e.price-t.price}))}}]),e}(),se=function(){function e(){Object(o.a)(this,e),this.key=1,this.playerKey=1,this.organizations=[],this.name="Citizen's Party",this.slogan="Vote for us!",this.community="state",this.ideals="trad",this.availablePolicies=[],this.proposedPolicy=void 0,this.availableCampaigns=[],this.activeCampaigns=[],this.politicalCapital=10,this.materialCapital=20,this.labor=10,this.activeHQs=[],this.platform={}}return Object(c.a)(e,[{key:"fundOrganizations",value:function(){var e=this;this.organizations.forEach((function(t){e.materialCapital>=t.seasonalBudget&&(e.materialCapital-=t.seasonalBudget,t.cash+=t.seasonalBudget)}))}},{key:"differingPolicies",value:function(e){var t=this;return Object.keys(this.platform).filter((function(a){var n=a;return t.platform[n]!=e.policyTree[n]})).map((function(e){return t.platform[e]}))}}]),e}(),le={key:"-1",name:"No Policy",axis:"all"},oe=[le,{key:"0",name:"Let Them Eat Cake",ideals:"trad",community:"ego",axis:"wel_food",hint:"No state solution for hunger"},{key:"1",name:"Food Bank",ideals:"prog",community:"ego",axis:"wel_food"},{key:"2",name:"Food Stamps",ideals:"trad",community:"state",axis:"wel_food"},{key:"3",name:"Universal Rations",ideals:"prog",community:"state",axis:"wel_food"},{key:"4",name:"Sleep Outside",community:"ego",ideals:"trad",axis:"wel_house"},{key:"5",name:"Homeless Shelters",community:"ego",ideals:"prog",axis:"wel_house"},{key:"6",name:"Housing Subsidy",community:"state",ideals:"trad",axis:"wel_house"},{key:"7",name:"State Apartments",community:"state",ideals:"prog",axis:"wel_house"},{key:"8",name:"Stay Healthy",community:"ego",ideals:"trad",axis:"wel_health"},{key:"9",name:"Charity Clinics",community:"ego",ideals:"prog",axis:"wel_health"},{key:"10",name:"Medical Aid",community:"state",ideals:"trad",axis:"wel_health"},{key:"11",name:"Universal Healthcare",community:"state",ideals:"prog",axis:"wel_health"},{key:"12",name:"Tariffs",community:"state",axis:"econ_ex"},{key:"13",name:"Free Market",community:"ego",axis:"econ_ex"},{key:"14",name:"Legal Slavery",ideals:"trad",axis:"econ_labor"},{key:"15",name:"Right to Work",community:"ego",ideals:"trad",axis:"econ_labor"},{key:"16",name:"Right to Strike",community:"ego",ideals:"prog",axis:"econ_labor"},{key:"17",name:"Laissez-faire",community:"ego",ideals:"trad",axis:"econ_sub"},{key:"18",name:"Grain Subsidy",community:"state",axis:"econ_sub"},{key:"19",name:"Arts Patronage",community:"ego",ideals:"prog",axis:"econ_sub"},{key:"20",name:"State Religion",community:"state",ideals:"trad",axis:"cul_rel"},{key:"21",name:"Secularism",community:"ego",axis:"cul_rel"},{key:"22",name:"State Atheism",community:"state",ideals:"prog",axis:"cul_rel"},{key:"23",name:"Temple of Water \ud83c\udf0a",axis:"cul_theo"},{key:"24",name:"Church of Sun \u2600\ufe0f",axis:"cul_theo"},{key:"25",name:"Chapel of Clover \u2618\ufe0f",axis:"cul_theo"},{key:"26",name:"Religious Schooling",community:"state",ideals:"trad",axis:"cul_ed"},{key:"27",name:"University Grants",community:"ego",axis:"cul_ed"},{key:"28",name:"College For All",community:"state",ideals:"prog",axis:"cul_ed"},{key:"29",name:"Landowners Vote",community:"state",ideals:"trad",axis:"law_vote",hint:"only homeowners vote"},{key:"30",name:"Poll Tax",community:"ego",ideals:"trad",axis:"law_vote",hint:"voting requires small amount of cash"},{key:"31",name:"Universal Suffrage",ideals:"prog",axis:"law_vote",hint:"all citizens vote"},{key:"32",name:"Scandalous Bribes",community:"state",ideals:"trad",axis:"law_bribe",hint:"5% chance bribery causes scandal"},{key:"33",name:"Legal Bribery",community:"ego",axis:"law_bribe",hint:"Bribery has no consequences"},{key:"34",name:"Anti-Corruption",community:"state",ideals:"prog",axis:"law_bribe",hint:"25% chance bribery results in fine"},{key:"35",name:"Closed Borders",ideals:"trad",axis:"law_imm"},{key:"36",name:"Best and Brightest",community:"state",ideals:"prog",axis:"law_imm"},{key:"37",name:"Huddle Masses",community:"ego",ideals:"prog",axis:"law_imm"},{key:"38",name:"Head Tax",community:"state",ideals:"trad",axis:"tax_basic"},{key:"39",name:"Sales Tax",community:"ego",axis:"tax_basic"},{key:"40",name:"Wealth Tax",community:"state",ideals:"prog",axis:"tax_basic"},{key:"38",name:"Vice Tax",ideals:"trad",axis:"tax_second"},{key:"39",name:"Property Tax",ideals:"prog",axis:"tax_second"},{key:"40",name:"Death Tax",ideals:"prog",axis:"tax_second"}],ce=oe.reduce((function(e,t){return e[t.axis]||(e[t.axis]=[]),e[t.axis].push(t),e}),{});function ue(e){return oe.find((function(t){return t.key==e}))}var he=function(){function e(){Object(o.a)(this,e),this.key=0,this.name="",this.institutionKey=1,this.cash=0,this.ticksSinceLastSale=0,this.seasonalBudget=0,this.good="food",this.parentInstitution=null,this.beansHelped=0,this.inventory=0}return Object(c.a)(e,[{key:"work",value:function(e,t){for(;this.cash>0&&this.inventory<10;){var a=t.tryTransact(this,this.good);if(!a)break;t.addCharity(this,this.good,a.bought)}}}]),e}(),me=function(){function e(){Object(o.a)(this,e),this.policyTree={}}return Object(c.a)(e,[{key:"policies",get:function(){return Object.values(this.policyTree)}}]),e}();function de(e,t){var a=[];return e.energy&&a.push(t+e.energy+" Energy"),e.bots&&a.push(t+e.bots+" Bots"),e.psi&&a.push(t+e.psi+" Psi"),a.join(" ")}var pe={cost:{emptyHex:{build:{house:{energy:3,bots:3},farm:{energy:3,bots:3},theater:{energy:4,bots:4},hospital:{energy:4,bots:4},church:{energy:4,bots:4},courthouse:{energy:999,bots:999}}},hex:{kidnap:{energy:4}},bean:{scan:{energy:1},brainwash:{},abduct:{},gift:{},empower:{},disappear:{},siphon:{}}}},ye={found_utopia:{key:"found_utopia",text:"Found your Utopia",check:function(e){return"Goodplace"!=e.party.name}},build_house_n_farm:{key:"build_house_n_farm",text:"Build a house and farm",check:function(e){return e.cities[0].byType.house.all.length>1&&e.cities[0].byType.farm.all.length>1},reward:{energy:3,bots:3}},kidnap_3:{key:"kidnap_3",text:"Kidnap 3 new beings",check:function(e){return!1}},scan:{key:"scan",text:"Scan a Subject",check:function(e){return Object.keys(e.alien.scanned_bean).length>0}},set_policy:{key:"set_policy",text:"Set a Gov Policy",check:function(e){return!1}},brainwash:{key:"brainwash",text:"Brainwash a Subject",check:function(e){return!1}},"c+_grade":{key:"c+_grade",text:"Receive a C+ Grade",check:function(e){return!1}}},fe=function(){function e(){Object(o.a)(this,e),this.scanned_bean={},this.energy={amount:10,income:2,change:new p},this.psi={amount:10,income:2,change:new p},this.bots={amount:10,income:2,change:new p},this.next_grade={year:1,season:3,day:1},this.difficulty=pe,this.goals=["found_utopia","build_house_n_farm","scan","kidnap_3","brainwash","set_policy","c+_grade"],this.goalProgress={}}return Object(c.a)(e,[{key:"canAfford",value:function(e){return(void 0==e.bots||this.bots.amount>=e.bots)&&(void 0==e.energy||this.energy.amount>=e.energy)&&(void 0==e.psi||this.psi.amount>=e.psi)}},{key:"purchase",value:function(e){e.bots&&(this.bots.amount-=e.bots,this.bots.change.publish({change:-e.bots})),e.energy&&(this.energy.amount-=e.energy,this.energy.change.publish({change:-e.energy})),e.psi&&(this.psi.amount-=e.psi,this.psi.change.publish({change:-e.psi}))}},{key:"reward",value:function(e){e.bots&&(this.bots.amount+=e.bots,this.bots.change.publish({change:e.bots})),e.energy&&(this.energy.amount+=e.energy,this.energy.change.publish({change:e.energy})),e.psi&&(this.psi.amount+=e.psi,this.psi.change.publish({change:e.psi}))}},{key:"checkGoals",value:function(e){for(var t=0;t<this.goals.length;t++){var a=this.goals[t];if(null==this.goalProgress[a]&&(this.goalProgress[a]={done:!1,step:0}),!this.goalProgress[a].done){var n=ye[a].check(e),i=ye[a].reward;this.goalProgress[a].done=n,n&&null!=i&&this.reward(i)}}}}]),e}();function be(e){for(var t=e.length;t>0;){var a=Math.floor(Math.random()*t),n=e[--t];e[t]=e[a],e[a]=n}return e}var ve,ge=function(){function e(){Object(o.a)(this,e),this.cities=[],this.law=new me,this.economy=new ie,this.institutions=[],this.party=new se,this.date={year:1,season:n.Spring,day:1},this.yearsEvents=[],this.bus=new y,this.alien=new fe}return Object(c.a)(e,[{key:"calculateComputedState",value:function(){var e=this;this.cities.forEach((function(t){t.calculate(e.economy,e.law),t.beans.forEach((function(a){return a.calculateBeliefs(e.economy,t,e.law,e.party)}))}))}},{key:"simulate_world",value:function(){var e=this;this.date.day++,this.date.day>30&&(this.date.day=1,this.date.season++),this.date.season>3&&(this.date.year++,this.inflate(),this.resetYearlyCounters(),this.date.season=0),this.alien.bots.amount+=this.alien.bots.income/30,this.alien.energy.amount+=this.alien.energy.income/30,this.alien.psi.amount+=this.alien.psi.income/30,this.economy.resetSeasonalDemand(),this.institutions.forEach((function(e){return e.fundOrganizations()})),this.organizations.forEach((function(t){return t.work(e.law,e.economy)})),be(this.beans).forEach((function(t){var a=t.age(e.economy);a&&e.yearsEvents.push(a),(a=t.maybeBaby(e.economy))&&e.yearsEvents.push(a)})),this.cities.forEach((function(t){return t.getTaxesAndDonations(e.party,e.economy)})),this.calculateComputedState(),this.alien.checkGoals(this)}},{key:"simulate_beans",value:function(e){this.beans.forEach((function(t){!function(e,t){var a=e.state.act(e,t);e.onAct&&e.onAct.publish(t),a!=e.state&&function(e,t){0===e.key&&e.state.exit(e),e.state=t,e.state.enter(e)}(e,a)}(t,e)}))}},{key:"inflate",value:function(){var e=(this.beans.reduce((function(e,t){return e+t.cash}),0)+this.organizations.reduce((function(e,t){return e+t.cash}),0))/100,t=Math.round(1*e);if(t>0){var a=this.beans.reduce((function(e,t){return t.cash>e.max&&(e.winner=t,e.max=t.cash),e}),{max:0});a.winner&&(a.winner.cash+=t)}}},{key:"resetYearlyCounters",value:function(){this.yearsEvents=[],this.cities.forEach((function(e){e.yearsPartyDonations=0}))}},{key:"addCharity",value:function(e,t,a){var n=new he;n.name=t,n.good=e,n.seasonalBudget=a,this.party.organizations.push(n)}},{key:"beans",get:function(){return this.cities.reduce((function(e,t){return e.concat(t.beans)}),[])}},{key:"historicalBeans",get:function(){return this.cities.reduce((function(e,t){return e.concat(t.historicalBeans)}),[])}},{key:"organizations",get:function(){return this.institutions.reduce((function(e,t){return e.concat(t.organizations)}),[])}}]),e}(),Ee={state:"\ud83d\udc18",ego:"\ud83e\udd85",prog:"\ud83c\udf93",trad:"\ud83d\udc51",circle:"\ud83e\udd0e",square:"\ud83d\udc9b",triangle:"\ud83e\udde1",book:"",music:"",heart:"",noFaith:"",hungry:"\ud83c\udf7d\ufe0f",sated:"\ud83e\udd5c",stuffed:"\ud83e\udd69",podless:"\ud83c\udf28\ufe0f",crowded:"\ud83c\udfd8\ufe0f",homeowner:"\ud83c\udfe1",sick:"\ud83e\udd22",bruised:"\ud83e\ude79",fresh:"\ud83d\udcaa",mad:"\ud83e\udd2a",confused:"\ud83e\udd24",sane:"\ud83e\udde0"};function ke(e){return 100*Math.min(1,Math.max(-1,e.reduce((function(e,t){return e+=t.mod}),0)))}!function(e){e[e.Deficient=-.25]="Deficient",e[e.Sufficient=0]="Sufficient",e[e.Abundant=.15]="Abundant"}(ve||(ve={}));var we={podless:{reason:"Homeless",mod:ve.Deficient},crowded:{reason:"Renting",mod:ve.Sufficient},homeowner:{reason:"Homeowner",mod:ve.Abundant},sick:{reason:"Sick",mod:ve.Deficient},bruised:{reason:"Bruised",mod:ve.Sufficient},fresh:{reason:"Healthy",mod:ve.Abundant},hungry:{reason:"Hungry",mod:ve.Deficient},sated:{reason:"Sated",mod:ve.Sufficient},stuffed:{reason:"Stuffed",mod:ve.Abundant}},Ce={food:{sufficient:1,abundant:3},shelter:{sufficient:1,abundant:3},medicine:{sufficient:1,abundant:3},fun:{sufficient:1,abundant:3}};function Se(e){switch(e){case"builder":return"shelter";case"doc":return"medicine";case"entertainer":return"fun";default:case"farmer":return"food"}}var xe={food:"\ud83e\udd6a",shelter:"",medicine:"\ud83d\udc8a",fun:"\ud83d\udc4f"};function Oe(e){return _e(e,"ego",(function(e){return e.ideals}))}function je(e){return _e(e,"state",(function(e){return e.community}))}function _e(e,t,a){var n={avg:0,winner:t},i=e.reduce((function(e,t){var n=a(t);return null==e[n]?e[n]=1:e[n]++,e}),{});return Object.keys(i).forEach((function(e){i[e]>n.avg&&(n.avg=i[e],n.winner=e)})),n.avg/=e.length,n}var Ne=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).name="",e.url="",e.type="",e.key=0,e.historicalBeans=[],e.houses=[],e.partyHQ=void 0,e.yearsPartyDonations=0,e.majorityEthnicity="circle",e.economy=void 0,e.law=void 0,e.environment=void 0,e.doOnCitizenDie=[],e}return Object(c.a)(a,[{key:"getRandomCitizen",value:function(){var e=be(this.beans);return e.length>0?e[0]:null}},{key:"onCitizenDie",value:function(e){var t=this;if(e.cash>0){var a=this.getRandomCitizen();a&&(a.cash=a.cash+e.cash,e.cash=0)}this.doOnCitizenDie.forEach((function(a){return a(e,t)}))}},{key:"breedBean",value:function(e){var t,a,n,i=He(this,this.historicalBeans.length);i.ethnicity=e.ethnicity,i.job=Math.random()<=.5?e.job:Me(["doc","farmer","builder","jobless"]),i.cash=e.cash/2,e.cash/=2,this.environment&&(i.dob={year:null===(t=this.environment)||void 0===t?void 0:t.year,season:null===(a=this.environment)||void 0===a?void 0:a.season,day:null===(n=this.environment)||void 0===n?void 0:n.day}),this.historicalBeans.push(i)}},{key:"getTaxesAndDonations",value:function(e,t){var a=this;this.partyHQ&&this.beans.forEach((function(n){var i=n.maybeDonate(t);e.materialCapital+=i,a.yearsPartyDonations+=i}))}},{key:"calculate",value:function(e,t){var a=this.beans.reduce((function(e,t){switch(t.ethnicity){case"circle":e.circle++;break;case"square":e.square++;break;case"triangle":e.triangle++}return e}),{circle:0,square:0,triangle:0});a.circle>a.square&&a.circle>a.triangle?this.majorityEthnicity="circle":a.square>a.circle&&a.square>a.triangle?this.majorityEthnicity="square":this.majorityEthnicity="triangle"}},{key:"beans",get:function(){return this.historicalBeans.filter((function(e){return e.alive}))},set:function(e){throw"can't set city beans"}}]),a}(q);function Be(e,t){var a=new Uint32Array(1);window.crypto.getRandomValues(a);var n=a[0]/4294967296;return e=Math.ceil(e),t=Math.floor(t),Math.floor(n*(t-e+1))+e}function Me(e){return 1==e.length?e[0]:e[Be(0,e.length-1)]}Math.PI;function De(e,t,a){var n={type:t,key:e.numberOf(t),occupied_slots:[],empty_slots:[]};e.addBuilding(a,n)}function Pe(){var e=new ge;e.law.policyTree={wel_food:ue("0"),wel_house:ue("4"),wel_health:ue("8"),econ_ex:ue("13"),econ_labor:ue("15"),econ_sub:le,cul_rel:ue("21"),cul_theo:le,cul_ed:le,law_vote:ue("31"),law_bribe:ue("32"),law_imm:ue("35"),tax_basic:ue("38"),tax_second:le,all:le},e.party=new se,e.institutions.push(e.party);for(var t=0;t<1;t++){e.cities.push(Te(e.cities.length)),e.cities[t].doOnCitizenDie.push(e.economy.onBeanDie),e.cities[t].environment=e.date,e.cities[t].economy=e.economy,e.cities[t].law=e.law;for(var a=0;a<e.cities[t].beans.length;a++){var n=e.cities[t].beans[a];n.work(e.law,e.economy),"farmer"==n.job&&n.work(e.law,e.economy)}}return e.economy.totalSeasonalDemand.food=e.beans.length,e.economy.totalSeasonalDemand.shelter=e.beans.length,e.economy.totalSeasonalDemand.medicine=e.beans.length,e}function Te(e){var t=new Ne;t.key=e,t.name=Me(["New ","Old ","Fort ","St. ","Mount ","Grand ","","","","","","","","","",""]),t.name+=Me(["Spring","Timber","Over","West","East","North","South","Rock","Sand","Clay","Iron","Ore","Coal","Liver","Hawk","Red","Yellow","Gold","Blue","Black","White","Sunny","Reed","Ox","Mill","Fern","Down","Bel","Bald","Ash"]),t.name+=Me(["water "," Springs","ville","dale","lane","peak","coast","beach","port","market","ton","brook"," Creek","land","burgh","bridge","ford","bury","chester","son","vale"," Valley","hill","more","wood"," Oaks"," Cove","mouth","way","crest"]),De(t,"courthouse",t.hexes[0]),De(t,"house",t.hexes[1]),De(t,"hospital",t.hexes[5]),De(t,"farm",t.hexes[7]);for(;t.historicalBeans.length<3;)t.historicalBeans.push(He(t,t.historicalBeans.length));return t}function He(e,t){var a=new ae;a.key=t,a.cityKey=e.key,a.city=e,a.name=Me(["Joe","Frank","Jill","Jose","Johnny","Isabelle","Carmen","Ace","Carl","Zander","Jean","Anne","Leslie","Ben","Ron","Ellen","Dallas","Kane","Ash","Jim","James","Leonard","Nyota","Christine","Scotty","Tasha","Geordi","Beverly","Deanna","Wesley","Majel","Malcolm","River","Luke","Dana","Walter","Rick","Rose","Donna","Jack","Amy","Rory","Martha","Clara","Arnold","Dave","Holly","Kara","Gaius","William","Lee","Laura","Saul","Max","Edison","Theora","Bryce","Murray","Ned","Daniel","Samantha","Logan","Francis","Jessica"])+" ",a.name+=Me(["Ripley","Bishop","Hicks","Vasquez","Hudson","Rico","Flores","Ibanez","Levy","Jenkins","Barlow","Zim","Rasczak","Kirk","McCoy","Sulu","Uhura","Chekov","Chapel","Rand","Riker","Crusher","Barret","O'Brien","Reynolds","Tam","Scully","Mulder","Skinner","Connor","Thrace","Baltar","Smith","Adama","Roslin","Tigh","Song","Oswald","Deckard","Tyler","Harkness","Jones","Noble","Pond","Williams","Rimmer","Lister","Head","Carter","Lynch","McKenzie","Grossberg","O'Neil","Jackson","Carter"]),a.community=Me(["state","ego"]),a.ideals=Me(["prog","trad"]),a.faith=Me(["book","music","heart","noFaith"]);var n=t%3;return a.job=0==n?"farmer":1==n?"builder":"doc",a.cash=function(e){var t=4+Math.floor(3*Math.random());switch(e){case"doc":return t+2;default:return t}}(a.job),a.discrete_food=3,e.movers.bean[a.key]=D(e.hex_size,e.petriOrigin,e.byType.house.coordByID[Me(e.byType.house.all).key]),a}var Le=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={show:!1},n}return Object(c.a)(a,[{key:"getButton",value:function(){var e=this;return this.props.hideCloseButton?null:r.a.createElement("button",{type:"button",className:"done",onClick:function(){return e.props.onClick()}},this.props.closeButtonText||"Done")}},{key:"render",value:function(){return this.props.show?r.a.createElement("div",{className:"modal"},this.props.children,this.getButton()):null}}]),a}(r.a.Component),Ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"header",value:function(){return this.props.children?r.a.createElement("b",null,this.props.children):null}},{key:"render",value:function(){var e=this,t=this.props.beans.filter((function(t){return e.props.need(t)==e.props.dire})).length,a={width:Math.floor(t/this.props.beans.length*100)+"%"},n=this.props.beans.filter((function(t){return e.props.need(t)==e.props.abundant})).length,i={width:Math.floor(n/this.props.beans.length*100)+"%"};return r.a.createElement("div",{className:this.props.className},this.header(),r.a.createElement("div",{className:"bar"},r.a.createElement("div",{className:"bar-inner dire",style:a},t>0?"".concat(t," ").concat(ut[this.props.dire]):""),r.a.createElement("div",{className:"bar-inner abundant",style:i},n>0?n:"")))}}]),a}(r.a.Component),Fe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"hq",value:function(){return this.props.city?this.props.city.partyHQ?r.a.createElement("div",null,"\ud83c\udfe2 Has Party HQ",r.a.createElement("br",null),"$",this.props.city.yearsPartyDonations.toFixed(2)," donations this year"):r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"button",className:"important"},"\ud83c\udfe2 Add HQ for $10"),r.a.createElement("br",null),r.a.createElement("small",null,"+1 action per season & chance for donations")):null}},{key:"render",value:function(){var e=this,t=null;this.props.city&&(t=r.a.createElement("div",null,r.a.createElement("b",null,this.props.city.name),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.props.clearCity()}},"\u274c")));var a,n=this.props.beans.reduce((function(e,t){return e+t.lastHappiness}),0)/(this.props.beans.length||1),i=this.props.beans.reduce((function(e,t){return e+t.cash}),0)/(this.props.beans.length||1),s=this.props.beans.reduce((function(e,t){return e+t.lastPartySentiment}),0)/(this.props.beans.length||1);return r.a.createElement("div",null,t,r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Demographics")),r.a.createElement("div",null,r.a.createElement("b",null,"Population"),"\xa0",r.a.createElement("span",null,this.props.beans.length)),r.a.createElement(Ie,{report:(a=this.props.beans,_e(a,"circle",(function(e){return e.ethnicity})))},"Ethnicity"),r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Situation")),r.a.createElement(Ae,{beans:this.props.beans,need:function(e){return e.food},dire:"hungry",abundant:"stuffed"},"Food Security"),r.a.createElement(Ae,{beans:this.props.beans,need:function(e){return e.shelter},dire:"podless",abundant:"homeowner"},"Housing"),r.a.createElement(Ae,{beans:this.props.beans,need:function(e){return e.health},dire:"sick",abundant:"fresh"},"Healthcare"),r.a.createElement("b",null,"Avg. Money")," $",i.toFixed(2)," \xa0",r.a.createElement("b",null,"Avg. Happiness")," ",Math.round(n),"%",r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Electorate")),r.a.createElement(Ie,{report:je(this.props.beans)},"Community"),r.a.createElement(Ie,{report:Oe(this.props.beans)},"Ideals"),r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"Party")),this.hq(),r.a.createElement("div",null,r.a.createElement("b",null,"Approval"),"\xa0",r.a.createElement("span",null,s.toFixed(0),"%")))}}]),a}(r.a.Component),Ie=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e="Leaning";this.props.report.avg>=.51&&(e="Major"),this.props.report.avg>=.8&&(e="Extreme");var t=Math.floor(100*this.props.report.avg),a={width:t+"%"};return r.a.createElement("div",null,r.a.createElement("b",null,this.props.children),"\xa0\xa0",r.a.createElement("span",null,e," ",ut[this.props.report.winner]),r.a.createElement("div",{className:"bar"},r.a.createElement("div",{className:"bar-inner",style:a},t,"%")))}}]),a}(r.a.Component),Re=a(6);var qe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).animate=function(e){var t;n.setState({point:n.props.bean.city?n.props.bean.city.movers.bean[n.props.bean.key]:{x:0,y:0},spin:"work"==n.props.bean.state.data.act,face:n.props.bean.getFace(),good:(t=n.props.bean,"buy"==t.state.data.act&&"shelter"!=t.state.data.good?xe[n.props.bean.state.data.good||"food"]:void 0)})},n.delaySeedSec=void 0,n.delaySeedSec=60*Math.random()+n.props.bean.key,n.state={paused:!1,point:e.static?M:e.bean.city?e.bean.city.movers.bean[e.bean.key]:{x:0,y:0},spin:!1,face:e.bean.getFace()},e.bean.onAct.subscribe(n.animate),n}return Object(c.a)(a,[{key:"getIdea",value:function(){if(this.state.paused){var e=this.props.bean.getIdea(this.props.costOfLiving);if(e)return r.a.createElement("span",{className:e.bad?"bad idea":"idea"},e.idea)}return null}},{key:"getPurchase",value:function(){if(this.state.good)return r.a.createElement("span",{className:"purchase"},r.a.createElement("span",{className:"money"},"\ud83d\udcb8"),r.a.createElement("span",{className:"purchase-good"},this.state.good))}},{key:"render",value:function(){var e=this,t=this.props.bean.job+" "+this.props.bean.ethnicity;t+=this.state.paused||!this.props.bean.alive?" paused":"",this.props.sitStill||(t+=" bean-walker",this.state.spin&&(t+=" spin"),"travel"!=this.props.bean.state.data.act&&(t+=" paused"));var a=Object(Re.a)(Object(Re.a)({},H(this.state.point)),{},{animationDelay:"-"+this.delaySeedSec+"s"});a.animationDelay="";return r.a.createElement("span",{className:t+" bean interactable",style:a,title:"",onClick:function(t){t.stopPropagation(),e.props.onClick()}},this.state.face," ",this.getPurchase())}}]),a}(r.a.Component),ze=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).mtn_transforms=[],n.state={tile:null,city:null,activeTileID:null};for(var i=0;i<72;i++){var r=P({r:530,az:5*i*Math.PI/180});r.x+=550,r.y+=550,n.mtn_transforms.push(H(r))}return n}return Object(c.a)(a,[{key:"renderBuildings",value:function(e){var t=this;return this.props.city.byType[e].all.map((function(a,n){return r.a.createElement(K,{city:t.props.city,building:a,key:e+n})}))}},{key:"render",value:function(){var e=this,t=this.props.city.beans.map((function(t){return r.a.createElement(qe,{bean:t,key:t.key,costOfLiving:e.props.costOfLiving,onClick:function(){return e.props.onBeanClick(t)}})})),a=this.props.city.historicalBeans.filter((function(e){return!e.alive})).map((function(e,t){return r.a.createElement("span",{key:t,className:"dead",style:{left:10*t+"px"}},"\u26b0\ufe0f")})),n=this.renderBuildings("farm").concat(this.renderBuildings("hospital")).concat(this.renderBuildings("house")).concat(this.renderBuildings("courthouse")),i=this.props.city.hexes.map((function(t,a){var n=D(e.props.city.hex_size,e.props.city.petriOrigin,t);return r.a.createElement("div",{className:"hex",key:a,style:H(n),onClick:function(a){return e.props.onHexClick(t),a.stopPropagation(),!1}})})),s=this.mtn_transforms.map((function(e,t){return r.a.createElement("span",{key:t,style:e,className:"mtn"},"\u26f0\ufe0f")}));return r.a.createElement("div",{className:"tile",onClick:function(){return e.props.onClick()}},r.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-base"},r.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 1)"})),i,s,a,n,t,r.a.createElement("span",{className:"tile-label"},this.props.tile.name),r.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-lid"},r.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 0.2)"})))}}]),a}(r.a.Component);function Ge(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}var Ke=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={paused:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.world.beans,t=Ge(e.map((function(e){return e.discrete_food}))),a=Ge(e.map((function(e){return e.discrete_health}))).toFixed(1),n=e.reduce((function(e,t){return e+t.cash}),0),i=n/(e.length||1),s=Ge(e.map((function(e){return e.cash}))),l=e.filter((function(e){return e.cash<1})).length,o=Math.max(i,s),c=e.filter((function(e){return e.cash>o})),u=c.length/(e.length||1)*100,h=c.reduce((function(e,t){return e+t.cash}),0)/n*100,m=e.reduce((function(e,t){return e[t.job]=(e[t.job]||0)+1,e}),{}),d=((m.jobless||0)/e.length*100).toFixed(1);function p(e,t){return e.supply+=t.quantity,e.price+=t.price,e.count++,e.avg=e.price/e.count,e}var y=this.props.world.economy.market.listings.food.reduce(p,{supply:0,price:0,avg:0,count:0}),f=this.props.world.economy.market.listings.medicine.reduce(p,{supply:0,price:0,avg:0,count:0}),b=this.props.world.economy.market.listings.shelter.reduce(p,{supply:0,price:0,avg:0,count:0});return r.a.createElement("div",null,r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h3",null,"Subject's Health")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udf5e Food Security")," Median:",t.toFixed(1)," meals ",r.a.createElement("br",null),r.a.createElement(Ae,{beans:this.props.world.beans,need:function(e){return e.food},dire:"hungry",abundant:"stuffed",className:"big"}),"Supply: ",y.supply," meals. Avg. price $",y.avg.toFixed(2)," ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.food," meals"),r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83e\ude7a Healthcare")," Median:",a," ",r.a.createElement("br",null),r.a.createElement(Ae,{beans:this.props.world.beans,need:function(e){return e.health},dire:"sick",abundant:"fresh",className:"big"}),"Supply: ",f.supply," treatments. Avg. price $",f.avg.toFixed(2),"  ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.medicine," treatments")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udfe1 Housing")," ",r.a.createElement("br",null),r.a.createElement(Ae,{beans:this.props.world.beans,need:function(e){return e.shelter},dire:"podless",abundant:"homeowner",className:"big"}),"Supply: ",b.supply," units. Avg. price $",b.avg.toFixed(2),"   ",r.a.createElement("br",null),"Unfulfilled Demand: ",this.props.world.economy.unfulfilledSeasonalDemand.shelter," units")),r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h3",null,"Economic Health")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83d\udcb0 Wealth")," Household Wealth: ",n.toFixed(2),r.a.createElement("br",null),l," penniless citizens \xa0 \xa0 Cost of Living: $",this.props.world.economy.getCostOfLiving().toFixed(2)," ",r.a.createElement("br",null),"Median: $",s.toFixed(2)," Average: $",i.toFixed(2)," ",r.a.createElement("br",null),"Top ",u.toFixed(1),"% of subjects own ",h.toFixed(1),"% of the wealth"),r.a.createElement("span",null,r.a.createElement("strong",null,"Unemployment")," ",d,"% (",m.jobless,")",r.a.createElement("br",null),r.a.createElement("strong",null,"Employment"),r.a.createElement("ul",{className:"boxes"},r.a.createElement("li",null,m.farmer," farmers"),r.a.createElement("li",null,m.builder," builders"),r.a.createElement("li",null,m.doc," doctors")))))}}]),a}(r.a.Component),Ue=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.events.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",null,e.icon),"\xa0",r.a.createElement("span",null,e.message))}));return 0===this.props.events.length&&(e=[r.a.createElement("div",{key:0},r.a.createElement("small",null,"No events yet this year"))]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,"Events")),e)}}]),a}(r.a.Component),We=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t="card button";return this.props.thin&&(t+=" thin"),this.props.singleLine&&(t+=" single"),r.a.createElement("button",{className:t,title:this.props.title,onClick:function(){e.props.onClick&&e.props.onClick()},type:"button"},this.props.icon," ",this.props.name,null!=this.props.subtext?r.a.createElement("small",null,this.props.subtext):null)}}]),a}(r.a.Component);function Je(e,t,a){switch(t){case"ego":case"state":case"fresh":case"sick":case"trad":case"prog":case"hungry":case"stuffed":case"podless":case"homeowner":case"circle":case"square":case"triangle":case"sane":case"confused":case"mad":return r.a.createElement(We,{icon:Ee[t],title:ut[t],name:"",subtext:ut[t],thin:!0,singleLine:!0,onClick:a});default:return null}}var $e=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).scan=function(){n.props.scan(n.props.bean)&&(n.setState({faceOverride:"\ud83e\udd28"}),n._resetFace())},n.insult=function(){n.props.insult(n.props.bean),n.setState({faceOverride:"\ud83d\ude21"}),n._resetFace()},n.support=function(){n.props.support(n.props.bean),n.setState({faceOverride:"\ud83e\udd29"}),n._resetFace()},n.state={},n}return Object(c.a)(a,[{key:"_resetFace",value:function(){var e=this;setTimeout((function(){e.setState({faceOverride:void 0})}),5e3)}},{key:"happyTable",value:function(e){return e.filter((function(e){return 0!=e.mod})).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"small text-right"},e.reason),r.a.createElement("td",{className:"small"},Math.round(100*e.mod),"%"))}))}},{key:"renderTraits",value:function(){return this.scanned?r.a.createElement("div",null,r.a.createElement("div",{className:"card-parent"},Je(this.props.bean,this.props.bean.ethnicity,void 0),Je(this.props.bean,this.props.bean.sanity,void 0)),r.a.createElement("div",{className:"card-parent"},Je(this.props.bean,this.props.bean.ideals,void 0),Je(this.props.bean,this.props.bean.community,void 0)),r.a.createElement("div",{className:"card-parent"},Je(this.props.bean,this.props.bean.food,void 0),Je(this.props.bean,this.props.bean.shelter,void 0),Je(this.props.bean,this.props.bean.health,void 0))):r.a.createElement("div",{className:"card-parent"},r.a.createElement(We,{icon:"\ud83d\udef0\ufe0f",name:"Scan",subtext:"-Energy +Info",onClick:this.scan}))}},{key:"render",value:function(){var e=this,t=this.props.bean.job+" "+this.props.bean.ethnicity;this.props.bean.chanceToDonate(this.props.economy,!0);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,this.props.bean.name,"\xa0",r.a.createElement("small",null,"of ",this.props.city.name)),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.props.clearCity()}},"\u274c")),r.a.createElement("div",{className:"bean-view"},r.a.createElement("span",{className:t+" bean"},void 0===this.state.faceOverride?this.props.bean.getFace():this.state.faceOverride)),this.renderTraits(),r.a.createElement("div",{className:"horizontal"},r.a.createElement("span",null,"\ud83d\udcb0 $",this.props.bean.cash.toFixed(2)),r.a.createElement("span",null,"\ud83d\ude42 ",Math.round(this.props.bean.lastHappiness),"%"),r.a.createElement("span",null,"\ud83d\udc4d ",Math.round(this.props.bean.lastPartySentiment),"%")),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,this.scanned?this.happyTable(this.props.bean.getHappinessModifiers(this.props.economy,this.props.city,this.props.law)):null,this.scanned?this.happyTable(this.props.bean.getSentimentModifiers(this.props.economy,this.props.city,this.props.law,this.props.party).party):null)),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",onClick:this.support,disabled:!this.props.bean.canSupport(),title:"Rewrite one of this being's beliefs"},"\ud83d\ude35 Brainwash",r.a.createElement("small",null,"-Psi -Sanity +Belief"))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",disabled:this.props.party.materialCapital<1,className:"button card",onClick:this.scan,title:"Increase this being's influence"},"\ud83e\uddd0 Empower",r.a.createElement("small",null,"-Psi +Influence")),r.a.createElement("button",{type:"button",className:"button card",onClick:this.scan,title:"Increase this being's wealth"},"\ud83e\udd11 Gift",r.a.createElement("small",null,"-Energy +Money"))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",onClick:this.scan,title:"Drain a bit of this being's brain"},"\ud83e\udd2a Siphon",r.a.createElement("small",null,"-Energy -Sanity +Psi")),r.a.createElement("button",{type:"button",className:"button card",onClick:this.insult,title:"Delete this being from the experiment"},"\u2620\ufe0f Disappear",r.a.createElement("small",null,"-Bots -Energy"))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",onClick:this.insult,title:"Remove this being for study"},"\ud83d\udc7e Abduct for Research",r.a.createElement("small",null,"-Bots -Sanity +Tech"))))}},{key:"scanned",get:function(){return this.props.alien.scanned_bean[this.props.bean.key]}}]),a}(r.a.Component),Ve=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onName=function(e){n.setState({name:e.target.value})},n.onSlogan=function(e){n.setState({slogan:e.target.value})},n.onCity=function(e){n.setState({cityKey:+e})},n.state={community:null,ideal:null,name:"Goodplace",slogan:"Perfection is achievable.",members:"Citizens",goal:"Legislation",cityKey:0},n}return Object(c.a)(a,[{key:"onCommunity",value:function(e){var t=this;this.setState({community:e},(function(){t.onBigFourChange()}))}},{key:"onIdeal",value:function(e){var t=this;this.setState({ideal:e},(function(){t.onBigFourChange()}))}},{key:"onBigFourChange",value:function(){"ego"===this.state.community&&"trad"===this.state.ideal?this.setState({name:"Arcadia",slogan:"A man belongs on the farm.",members:"Farmers",goal:"Tariffs"}):"ego"===this.state.community&&"prog"===this.state.ideal?this.setState({name:"Libertaria",slogan:"Freedom for every being!",members:"Builders",goal:"Right to Strike"}):"state"===this.state.community&&"trad"===this.state.ideal?this.setState({name:"Ultimate Kingdom",slogan:"Honor to King and family.",members:"Homeowners",goal:"Repeal Property Tax"}):"state"===this.state.community&&"prog"===this.state.ideal&&this.setState({name:"Equus",slogan:"True equality is peace.",members:"Penniless",goal:"Food Welfare"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Found your Utopia"),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"Perfect societies rely on the",r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"community",value:"state",checked:"state"===this.state.community,onChange:function(t){return e.onCommunity(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Government")," \ud83d\udc18 "),"\xa0\xa0or\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"community",value:"ego",checked:"ego"===this.state.community,onChange:function(t){return e.onCommunity(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Individual")," \ud83e\udd85 ")),"\xa0 to guarantee well-being."),r.a.createElement("div",null,"Perfect beings devote themselves to",r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"ideal",value:"trad",checked:"trad"===this.state.ideal,onChange:function(t){return e.onIdeal(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Traditional")," "," \ud83d\udc51"),"\xa0\xa0or\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"ideal",value:"prog",checked:"prog"===this.state.ideal,onChange:function(t){return e.onIdeal(t.currentTarget.value)}})," ",r.a.createElement("b",null,"Progressive")," "," \ud83c\udf93")),"\xa0 social values.")),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"My Utopia is named ",r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.onName})),r.a.createElement("div",null,"My Utopia's mantra is ",r.a.createElement("input",{type:"text",value:this.state.slogan,onChange:this.onSlogan}))),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",disabled:null==this.state.community||null==this.state.ideal,className:"important btn-found-party",onClick:function(){return e.props.onFound(e.state)}},"Found the ",this.state.name," Utopia"))}}]),a}(r.a.Component),Qe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.props.onChange(e.target.value)},n.state={key:e.value||null},n}return Object(c.a)(a,[{key:"hint",value:function(){if(this.props.hint)return r.a.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},this.props.hint)}},{key:"options",value:function(){var e=this;return this.props.options.map((function(t){return r.a.createElement("option",{value:t.key,key:t.key,title:e.getTitleForOption(t)},e.getTextForOption(t))}))}},{key:"render",value:function(){return r.a.createElement("select",{onChange:this.onChange,value:this.state.key,required:null!=this.props.hint},this.hint(),this.options())}},{key:"getTitleForOption",value:function(e){}}]),a}(r.a.Component),Ye=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getTextForOption",value:function(e){return"".concat(e.name," ").concat(e.community?Ee[e.community]:"").concat(e.ideals?Ee[e.ideals]:"")}},{key:"getTitleForOption",value:function(e){return e.hint}}]),a}(Qe),Ze=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"setPolicy",value:function(e){var t=this;return function(a){var n=ue(a);n&&t.props.setPolicy(e,n)}}},{key:"render",value:function(){this.props.world.cities.filter((function(e){return null!=e.partyHQ})).map((function(e,t){return r.a.createElement("i",null,t>0?", ":"",e.name)}));return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h2",{className:"inline"},this.props.world.party.name),"\xa0",r.a.createElement("i",null,this.props.world.party.slogan)),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"pull-r"},"\ud83e\uddea View Research Lab"))),r.a.createElement("div",{className:"policies"},this.props.world.party.availablePolicies.map((function(e){return function(e){return r.a.createElement("div",{className:"policy",key:e.key},r.a.createElement("b",null,e.key),r.a.createElement("p",null,e.fx.map((function(e){return function(e){return r.a.createElement("span",{className:"badge"},ut[e.key],function(e){switch(e){case-3:return"---";case-2:return"--";case-1:return"-";case 1:return"+";case 2:return"++";case 3:return"+++";default:return"/"}}(e.mag))}(e)}))))}(e)}))),r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h3",{className:"small"},"Platform"),r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Welfare"),r.a.createElement(Ye,{options:ce.wel_food,value:this.props.world.party.platform.wel_food,onChange:this.setPolicy("wel_food"),hint:"Nutrition"}),r.a.createElement(Ye,{options:ce.wel_house,value:this.props.world.party.platform.wel_house,onChange:this.setPolicy("wel_house"),hint:"Housing"}),r.a.createElement(Ye,{options:ce.wel_health,value:this.props.world.party.platform.wel_health,onChange:this.setPolicy("wel_health"),hint:"Healthcare"})),r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Taxation"),r.a.createElement(Ye,{options:ce.tax_basic,value:this.props.world.party.platform.tax_basic,onChange:this.setPolicy("tax_basic"),hint:"Basic Tax"}),r.a.createElement(Ye,{options:ce.tax_second,value:this.props.world.party.platform.tax_second,onChange:this.setPolicy("tax_second"),hint:"Secondary Tax"})),r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Economics"),r.a.createElement(Ye,{options:ce.econ_ex,value:this.props.world.party.platform.econ_ex,onChange:this.setPolicy("econ_ex"),hint:"External"}),r.a.createElement(Ye,{options:ce.econ_labor,value:this.props.world.party.platform.econ_labor,onChange:this.setPolicy("econ_labor"),hint:"Labor"}),r.a.createElement(Ye,{options:ce.econ_sub,value:this.props.world.party.platform.econ_sub,onChange:this.setPolicy("econ_sub"),hint:"Subsidies"})),r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Culture"),r.a.createElement(Ye,{options:ce.cul_rel,value:this.props.world.party.platform.cul_rel,onChange:this.setPolicy("cul_rel"),hint:"Religion"}),this.props.world.party.platform.cul_rel&&"20"==this.props.world.party.platform.cul_rel.key?r.a.createElement(Ye,{options:ce.cul_theo,value:this.props.world.party.platform.cul_theo,onChange:this.setPolicy("cul_theo"),hint:"Theocracy"}):null,r.a.createElement(Ye,{options:ce.cul_ed,value:this.props.world.party.platform.cul_ed,onChange:this.setPolicy("cul_ed"),hint:"Education"})),r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Law"),r.a.createElement(Ye,{options:ce.law_vote,value:this.props.world.party.platform.law_vote,onChange:this.setPolicy("law_vote"),hint:"Voting"}),r.a.createElement(Ye,{options:ce.law_bribe,value:this.props.world.party.platform.law_bribe,onChange:this.setPolicy("law_bribe"),hint:"Corruption"}),r.a.createElement(Ye,{options:ce.law_imm,value:this.props.world.party.platform.law_imm,onChange:this.setPolicy("law_imm"),hint:"Immigration"}))),r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"grow-1 platform-identity"},ut[this.props.world.party.community],"\xa0",Ee[this.props.world.party.community]),r.a.createElement("div",{className:"grow-1 platform-identity"},ut[this.props.world.party.ideals],"\xa0",Ee[this.props.world.party.ideals]))),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h3",{className:"small"},"Crime"),r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Suffrage")),r.a.createElement("div",{className:"vertical reverse"},r.a.createElement("div",{className:"platform-subheader"},"Suffrage")))),r.a.createElement("div",null)))}}]),a}(r.a.Component),Xe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=+new Date,a=e.change>0;n.setState({bubbles:n.state.bubbles.concat([{s:(a?"+":"")+e.change,t:t,c:a?"pos":"neg"}])}),setTimeout((function(){n.setState({bubbles:n.state.bubbles.filter((function(e){return e.t!=t}))})}),1500)},n.state={bubbles:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.changeEvent&&this.props.changeEvent.subscribe(this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.changeEvent&&this.props.changeEvent.unsubscribe(this.onChange)}},{key:"render",value:function(){var e=this,t=this.state.bubbles.map((function(t){return r.a.createElement("span",{key:t.t,className:[t.c,e.props.bubbleClass,"bubbler"].join(" ")},e.props.icon," ",t.s)}));return r.a.createElement("span",{className:"bubble-parent"},this.props.children,t)}}]),a}(r.a.Component),et=(a(19),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"social-graph"},this.props.beans.map((function(t){return r.a.createElement("div",{className:"bean-node",onClick:function(){return e.props.onClick(t)}},r.a.createElement(qe,{bean:t,static:!0,costOfLiving:e.props.costOfLiving,sitStill:!0,onClick:function(){e.props.onClick(t)}}))})))}}]),a}(r.a.Component)),tt=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e="capsule-label "+this.props.label||!1;return r.a.createElement("span",{className:e},r.a.createElement("span",{className:"capsule-icon"},this.props.icon),r.a.createElement("span",{className:"capsule-text"},this.props.label,":"),r.a.createElement("span",{className:"capsule-value"},this.props.children))}}]),a}(r.a.Component),at=a(7),nt=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"renderReward",value:function(e){return r.a.createElement("div",null,r.a.createElement("small",null,"\ud83c\udf81 ",de(e.reward||{},"+")))}},{key:"renderGoal",value:function(e){var t=null!=this.props.progress.goalProgress[e.key]&&this.props.progress.goalProgress[e.key].done;return r.a.createElement("li",null,t?"\u2611\ufe0f":"\u2b55\ufe0f",e.text,null!=e.tooltip?r.a.createElement("small",{title:e.tooltip},"\u2754"):null,t||null==e.reward?null:this.renderReward(e))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"goals"},r.a.createElement("div",null,r.a.createElement("b",null,"Goals")),r.a.createElement("ul",null,this.props.progress.goals.map((function(t){return e.renderGoal(ye[t])}))),r.a.createElement("div",null,r.a.createElement("b",null,"Report Card")),r.a.createElement("p",null,"Last Grade: ",r.a.createElement("b",null,"D")),r.a.createElement("p",null,"6 mo s til next grade."),r.a.createElement("table",{style:{margin:"auto"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Happiness"),r.a.createElement("td",null,"D"),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects happy?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Prosperity"),r.a.createElement("td",null,"D"),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects fed and healthy?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Stability"),r.a.createElement("td",null,"D"),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects sane and civil?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Dogma"),r.a.createElement("td",null,"B"),r.a.createElement("td",null,r.a.createElement("small",{title:"Do your society's rules match your utopian ideals?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("hr",null))),r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("td",null,"C"),r.a.createElement("td",null)))),r.a.createElement("p",null,'Receive an "A" in "Prosperity" ',r.a.createElement("br",null)," to receive 3 Psi"))}}]),a}(r.a.Component),it=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pad-4p"},r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Propaganda"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){}},"\ud83c\udf99\ufe0f Buy Propaganda")),r.a.createElement("span",null,"Propaganda changes beans' feelings on a wide variety of topics."),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udcfa Broadcast Campaign"),r.a.createElement("small",null,"Approval+ Cash-"),r.a.createElement("span",{className:"p"},"Small chance to increase Approval among all beans")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udc4b Canvassing"),r.a.createElement("small",null,"Approval+ Labor-"),r.a.createElement("span",{className:"p"},"Chance to increase Approval on a few random beans")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\uddde\ufe0f Print Campaign"),r.a.createElement("small",null,"Approval+ Cash-"),r.a.createElement("span",{className:"p"},"Chance to increase Approval on wealthy beans"))),r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Appearances"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){}},"\ud83d\udcac Schedule Appearance")),r.a.createElement("span",null,"Appearances have limited reach, but have powerful effects."),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83e\udd14 Debating"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Chance to gain or lose Influence")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udcf8 Photo Op"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Increases Approval within one Social Group")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83c\udfa4 Speechmaking"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Increases chance of Donations in a single City")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\ude4b Town Hall"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Suppresses negative Approval in a single city"))))}}]),a}(r.a.Component),rt=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("h2",null,"Government"),r.a.createElement("div",null)),r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h3",null,"Policy"),r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"vertical"},r.a.createElement("strong",null,"Welfare"),r.a.createElement("div",null,"Nutrition: ",this.props.world.law.policyTree.wel_food.name),r.a.createElement("div",null,"Housing: ",this.props.world.law.policyTree.wel_house.name),r.a.createElement("div",null,"Healthcare: ",this.props.world.law.policyTree.wel_health.name)),r.a.createElement("div",{className:"vertical"},r.a.createElement("strong",null,"Taxation"),r.a.createElement("div",null,this.props.world.law.policyTree.tax_basic.name),r.a.createElement("div",null,this.props.world.law.policyTree.tax_second.name)),r.a.createElement("div",{className:"vertical"},r.a.createElement("strong",null,"Economics"),r.a.createElement("div",null,"External: ",this.props.world.law.policyTree.econ_ex.name),r.a.createElement("div",null,"Labor: ",this.props.world.law.policyTree.econ_labor.name),r.a.createElement("div",null,"Subsidies: ",this.props.world.law.policyTree.econ_sub.name)),r.a.createElement("div",{className:"vertical"},r.a.createElement("strong",null,"Culture"),r.a.createElement("div",null,"Religion: ",this.props.world.law.policyTree.cul_rel.name),"20"==this.props.world.law.policyTree.cul_rel.key?r.a.createElement("div",null,"Theocracy: ",this.props.world.law.policyTree.cul_theo.name):null,r.a.createElement("div",null,"Education: ",this.props.world.law.policyTree.cul_ed.name)),r.a.createElement("div",{className:"vertical"},r.a.createElement("strong",null,"Law"),r.a.createElement("div",null,"Voting: ",this.props.world.law.policyTree.law_vote.name),r.a.createElement("div",null,"Corruption: ",this.props.world.law.policyTree.law_bribe.name),r.a.createElement("div",null,"Immigration: ",this.props.world.law.policyTree.law_imm.name)))))}}]),a}(r.a.Component),st=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("h2",null,"Research Lab"),r.a.createElement("div",null,"Currently probing 0 beings")))}}]),a}(r.a.Component),lt=(a(20),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"s-p-f button-group"},r.a.createElement("button",{type:"button",className:0==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(0)}},"\u23f9"),r.a.createElement("button",{type:"button",className:1==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(1)}},"\u25b6\ufe0f"),r.a.createElement("button",{type:"button",className:2==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(2)}},"\u23e9"))}}]),a}(r.a.Component)),ot=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("small",null,de(this.props.cost,"-"))}}]),a}(r.a.Component),ct=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"emptyPanel",value:function(){var e=this,t=this.props.difficulty.cost.emptyHex;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Empty Lot")," in ",r.a.createElement("strong",null,this.props.city.name),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.props.clearHex()}},"\u274c")),r.a.createElement("h3",null,"Build:"),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return e.props.build(e.props.hex,"house")}},L.house," House",r.a.createElement(ot,{cost:t.build.house})),r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return e.props.build(e.props.hex,"farm")}},L.farm," Farm",r.a.createElement(ot,{cost:t.build.farm}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return e.props.build(e.props.hex,"hospital")}},L.hospital," Hospital",r.a.createElement(ot,{cost:t.build.hospital})),r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return e.props.build(e.props.hex,"theater")}},L.theater," Theater",r.a.createElement(ot,{cost:t.build.theater}))),r.a.createElement("h3",null,"Beings:"),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return e.props.kidnap(e.props.hex)}},"\ud83d\udef8 Kidnap New Subject",r.a.createElement(ot,{cost:this.props.difficulty.cost.hex.kidnap}))))}},{key:"buildingPanel",value:function(e){return r.a.createElement("div",null,r.a.createElement("strong",null,ut[e.type])," in ",r.a.createElement("strong",null,this.props.city.name))}},{key:"render",value:function(){var e=this.props.city.lookupBuilding(this.props.hex);return e?this.buildingPanel(e):this.emptyPanel()}}]),a}(r.a.Component),ut={state:"Statist",ego:"Egoist",trad:"Traditionalist",prog:"Progressive",circle:"Brunette",square:"Blonde",triangle:"Redhead",book:"Book",heart:"Heart",music:"Music",noFaith:"Faithless",hungry:"Hungry",sated:"Sated",stuffed:"Stuffed",podless:"Homeless",crowded:"Crowded",homeowner:"Homeowner",sick:"Sick",bruised:"Bruised",fresh:"Robust",sane:"Sane",confused:"Confused",mad:"Mad",house:"House",hospital:"Hospital",farm:"Farm",theater:"Theater",church:"Church",courthouse:"Courthouse"};var ht=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).previousTimeMS=0,n.logicTickAccumulatorMS=0,n.tick=function(e){var t=(e-n.previousTimeMS)*n.state.timeScale;n.previousTimeMS=e,t>0&&(n.logicTickAccumulatorMS+=t,n.state.world.simulate_beans(t),n.logicTickAccumulatorMS>2e3&&(n.state.world.simulate_world(),n.setState({world:n.state.world}),n.logicTickAccumulatorMS=0)),window.requestAnimationFrame(n.tick)},n.keyupHandler=function(e){" "===e.key&&(n.state.timeScale>0?n.setState({timeScale:0}):n.setState({timeScale:1}))},n.foundParty=function(e){n.state.world.party.name=e.name,n.state.world.party.slogan=e.slogan,e.community&&(n.state.world.party.community=e.community),e.ideal&&(n.state.world.party.ideals=e.ideal);var t=n.state.world.cities.find((function(t){return t.key==e.cityKey}));t&&n.state.world.party,n.state.world.calculateComputedState(),n.setState({world:n.state.world,activeModal:null})},n.build=function(e,t,a){var i=n.difficulty.cost.emptyHex.build[a];n.state.world.alien.canAfford(i)&&(n.state.world.alien.purchase(i),De(e,a,t)),n.setState({world:n.state.world})},n.kidnap=function(e,t){var a=n.difficulty.cost.hex.kidnap;n.state.world.alien.canAfford(a)&&(n.state.world.alien.purchase(a),e.historicalBeans.push(He(e,e.historicalBeans.length))),n.setState({world:n.state.world})},n.foundCharity=function(e,t,a){n.state.world.addCharity(e,t,a),n.setState({world:n.state.world})},n.insult=function(e){n.state.world.party.politicalCapital+=1,e.lastInsultDate=f(n.state.world),e.city&&e.calculateBeliefs(n.state.world.economy,e.city,n.state.world.law,n.state.world.party),n.setState({world:n.state.world}),n.state.world.bus.politicalCapital.publish({change:1})},n.support=function(e){n.state.world.party.politicalCapital-=1,e.lastApprovalDate=f(n.state.world),e.city&&e.calculateBeliefs(n.state.world.economy,e.city,n.state.world.law,n.state.world.party),n.setState({world:n.state.world}),n.state.world.bus.politicalCapital.publish({change:-1})},n.scan=function(e){return!!n.state.world.alien.canAfford(n.state.world.alien.difficulty.cost.bean.scan)&&(n.state.world.alien.purchase(n.state.world.alien.difficulty.cost.bean.scan),n.state.world.alien.scanned_bean[e.key]=!0,n.setState({world:n.state.world}),!0)},n.setPolicy=function(e,t){n.state.world.party.platform[e]=t,n.state.world.calculateComputedState(),n.setState({world:n.state.world})},n.state={world:Pe(),activeCityID:null,activeBeanID:null,activeHex:null,activeMain:"geo",activeModal:"party_creation",activeRightPanel:"overview",timeScale:1},n.state.world.calculateComputedState(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",this.keyupHandler,!1),window.requestAnimationFrame((function(t){e.previousTimeMS=t,window.requestAnimationFrame(e.tick)}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyupHandler)}},{key:"getPanel",value:function(){var e=this;switch(this.state.activeRightPanel){case"overview":if(null==this.state.activeCityID)return r.a.createElement(Fe,{beans:this.state.world.beans,clearCity:function(){return e.setState({activeCityID:null})}});var t=this.state.world.cities.find((function(t){return t.key==e.state.activeCityID}));if(t){if(null!=this.state.activeHex)return r.a.createElement(ct,{city:t,hex:this.state.activeHex,difficulty:this.state.world.alien.difficulty,clearHex:function(){return e.setState({activeHex:null})},kidnap:function(a){return e.kidnap(t,a)},build:function(a,n){e.build(t,a,n)}});if(null!=this.state.activeBeanID){var a=t.beans.find((function(t){return t.key==e.state.activeBeanID}));if(a)return r.a.createElement($e,{bean:a,city:t,alien:this.state.world.alien,economy:this.state.world.economy,party:this.state.world.party,bus:this.state.world.bus,law:this.state.world.law,scan:this.scan,insult:this.insult,support:this.support,clearCity:function(){return e.setState({activeCityID:null,activeBeanID:null})}})}return r.a.createElement(Fe,{beans:null===t||void 0===t?void 0:t.beans,city:t,clearCity:function(){return e.setState({activeCityID:null})}})}return r.a.createElement("div",null);case"goals":return r.a.createElement(nt,{player:this.state.world.alien,progress:this.state.world.alien});case"events":return r.a.createElement(Ue,{events:this.state.world.yearsEvents})}}},{key:"renderGeo",value:function(){var e=this,t=this.state.world.economy.getCostOfLiving();return this.state.world.cities.map((function(a){return r.a.createElement(ze,{tile:a,city:a,costOfLiving:t,key:a.key,onClick:function(){return e.setState({activeCityID:a.key,activeRightPanel:"overview",activeHex:null,activeBeanID:null})},onBeanClick:function(t){return e.setState({activeCityID:a.key,activeRightPanel:"overview",activeHex:null,activeBeanID:t.key})},onHexClick:function(t){e.setState({activeCityID:a.key,activeHex:t,activeBeanID:null,activeRightPanel:"overview"})}})}))}},{key:"renderNetwork",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"horizontal max-w-500 m-t-2em"},r.a.createElement("button",{type:"button"},"\ud83d\ude0e Influence"),r.a.createElement("button",{type:"button"},"\ud83d\udea9 Party Preference"),r.a.createElement("button",{type:"button"},"\ud83d\udcc8 Demographics")),r.a.createElement(et,{costOfLiving:this.state.world.economy.getCostOfLiving(),beans:this.state.world.beans,onClick:function(t){return e.setState({activeCityID:t.cityKey,activeRightPanel:"overview",activeBeanID:t.key})}}))}},{key:"main",value:function(){switch(this.state.activeMain){case"network":return this.renderNetwork();default:return this.renderGeo()}}},{key:"render",value:function(){var e=this,t=n[this.state.world.date.season];return r.a.createElement("div",{className:"canvas"},r.a.createElement(at.b,{defaultScale:1,wheel:{step:48}},r.a.createElement(at.a,null,r.a.createElement("div",{className:"world"},this.main()))),r.a.createElement("div",{className:"overlay"},r.a.createElement(Le,{show:"party_creation"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})},hideCloseButton:!0},r.a.createElement(Ve,{cities:this.state.world.cities,onFound:this.foundParty})),r.a.createElement(Le,{show:"party"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ze,{world:this.state.world,setPolicy:this.setPolicy})),r.a.createElement(Le,{show:"polisci"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})},hideCloseButton:!0},r.a.createElement(st,null)),r.a.createElement(Le,{show:"policy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(rt,{world:this.state.world})),r.a.createElement(Le,{show:"campaign"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(it,null)),r.a.createElement(Le,{show:"economy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},"economy"==this.state.activeModal?r.a.createElement(Ke,{world:this.state.world}):""),r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"top"},r.a.createElement("span",null,"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Lab"),r.a.createElement("span",null,"\xa0 Year ",this.state.world.date.year,", \xa0",t," ",this.state.world.date.day),r.a.createElement("span",null,"6 mo 5 days til Grade"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeMain:"network"})}},"\ud83c\udf10"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeMain:"geo"})}},"\ud83c\udf0e"),r.a.createElement(lt,{timeScale:this.state.timeScale,setTimeScale:function(t){e.setState({timeScale:t})}})),r.a.createElement("div",{className:"bottom"},r.a.createElement(Xe,{changeEvent:this.state.world.alien.energy.change,icon:"\u26a1\ufe0f"},r.a.createElement(tt,{icon:"\u26a1\ufe0f",label:"Energy"},this.state.world.alien.energy.amount.toFixed(1))),r.a.createElement(Xe,{changeEvent:this.state.world.alien.psi.change,icon:"\ud83e\udde0"},r.a.createElement(tt,{icon:"\ud83e\udde0",label:"Psi"},this.state.world.alien.psi.amount.toFixed(1))),r.a.createElement(Xe,{changeEvent:this.state.world.alien.bots.change,icon:"\ud83e\udd16"},r.a.createElement(tt,{icon:"\ud83e\udd16",label:"Bots"},this.state.world.alien.bots.amount.toFixed(1))),r.a.createElement("span",null,r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"economy"})}},"State of the Utopia"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"party"})}},"Gov"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeModal:"polisci"})}},"Research"),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({activeModal:"campaign"})}},"Campaigns")))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"full-width-tabs"},r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"overview"})}},"\ud83d\udcc8 Overview"),r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"events"})}},"\ud83d\udce3 Events"),r.a.createElement("button",{onClick:function(){return e.setState({activeRightPanel:"goals"})}},"\ud83c\udfc6 Goals")),r.a.createElement("div",{className:"right-panel"},this.getPanel()))))}},{key:"difficulty",get:function(){return this.state.world.alien.difficulty}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.6307f491.chunk.js.map