(this.webpackJsonpsocsim=this.webpackJsonpsocsim||[]).push([[0],{19:function(e,t,n){e.exports=n(38)},24:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),l=n.n(i),c=(n(24),n(1)),o=n(2),s=n(4),u=n(3),d=n(8),m=n(16),y=(n(29),n(30),n(7)),p=function(){function e(t){Object(c.a)(this,e),this.onPublish=t,this.callbacks=[],this.current=void 0}return Object(o.a)(e,[{key:"publish",value:function(e){this.onPublish&&this.onPublish(e),this.current=e,this.callbacks.forEach((function(t){return t(e)}))}},{key:"subscribe",value:function(e){this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)}}]),e}(),h=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(p);var f,b=new(function(){function e(){Object(c.a)(this,e),this.Dirty=new p,this.Saving=new p}return Object(o.a)(e,[{key:"HasContinueGame",value:function(){var e=localStorage.getItem("last-game-id");if(null!=e){var t=parseInt(e);if(!isNaN(t))return null!=localStorage.getItem("".concat("game-").concat(t))?t:void 0}}},{key:"GetGameSlots",value:function(){for(var e=[],t=0;t<3;t++){var n=localStorage.getItem("".concat("game-brief-").concat(t+1));e.push({id:t+1,brief:n?JSON.parse(n):void 0})}return e}},{key:"GetGame",value:function(e){var t=localStorage.getItem("".concat("game-").concat(e));if(!t)return{errors:["Cannot find game"]};try{return{game:JSON.parse(t)}}catch(n){return{errors:[n]}}}},{key:"SaveGame",value:function(e){var t=JSON.stringify(e),n={Name:e.cities.byID[0].name,Population:e.beans.allIDs.map((function(t){return e.beans.byID[t]})).filter((function(e){return"dead"!=e.lifecycle})).length,Age:{day:e.date.day,hour:e.date.hour,season:e.date.season,year:e.date.year}};localStorage.setItem("".concat("game-").concat(e.saveSlot),t),localStorage.setItem("".concat("game-brief-").concat(e.saveSlot),JSON.stringify(n)),localStorage.setItem("last-game-id",e.saveSlot.toString()),this.Dirty.publish(!1),this.Saving.publish()}}]),e}()),v=new(function(){function e(){Object(c.a)(this,e),this.cache={ufo:{},bean:{},pickup:{}}}return Object(o.a)(e,[{key:"Get",value:function(e,t){return this.cache[e][t]||(this.cache[e][t]=new p),this.cache[e][t]}}]),e}()),g={x:.94,y:.94},E=60,k=9,w=10,x={x:.94,y:.94},N=10,S=4,D=10,j={state:"\ud83d\udd4a\ufe0f",ego:"\ud83e\udd85",prog:"\u2696\ufe0f",trad:"\ud83d\udc51",circle:"\ud83e\udd0e",square:"\ud83d\udc9b",triangle:"\ud83e\udde1",rocket:"\ud83d\ude80",music:"\ud83c\udfb5",dragon:"\ud83d\udc32",noFaith:"\u26ab\ufe0f",starving:"\ud83c\udf74",hungry:"\ud83c\udf7d\ufe0f",sated:"\ud83e\udd5c",stuffed:"\ud83e\udd69",homeless:"\ud83c\udf28\ufe0f",sleepy:"\ud83c\udf19",awake:"\u2600\ufe0f",rested:"\ud83c\udf1e",sick:"\ud83e\udd22",sickly:"\ud83d\ude37",bruised:"\ud83e\ude79",fresh:"\ud83d\udcaa",psychotic:"\ud83e\udd2a",disturbed:"\ud83e\udd24",stressed:"",sane:"\ud83e\udde0"};!function(e){e[e.Deficient=-.25]="Deficient",e[e.Sufficient=0]="Sufficient",e[e.Abundant=.15]="Abundant"}(f||(f={}));f.Deficient,f.Sufficient,f.Sufficient,f.Abundant,f.Deficient,f.Sufficient,f.Sufficient,f.Abundant,f.Deficient,f.Sufficient,f.Sufficient,f.Abundant;var K={warning:.5,sufficient:1,abundant:3},C={warning:.5,sufficient:1,abundant:3};function I(e){switch(e){case"builder":return"shelter";case"doc":return"medicine";case"entertainer":return"fun";default:case"farmer":return"food"}}var M={food:"\ud83e\udd6a",shelter:"\ud83c\udfe0",medicine:"\ud83d\udc8a",fun:"\ud83d\udc4f"},O={love:"\ud83d\udc9b",happiness:"\ud83d\udc4d",unhappiness:"\ud83d\udca2",hate:"\ud83d\udc94"},_={love:5,happiness:1,unhappiness:-1,hate:-5},B={love:1,happiness:.2,unhappiness:0,hate:-1};var A=n(6),P={common:3,uncommon:2,rare:1},T={prog:{noun:"Progressivism",adj:"Progressive",icon:"\u2696\ufe0f",description:"Strives to help others",rarity:"common"},trad:{noun:"Elitism",adj:"Elitist",icon:"\ud83d\udc51",description:"Strives for individual power",rarity:"common"},state:{noun:"Collectivism",adj:"Collectivist",icon:"\ud83d\udd4a\ufe0f",description:"Trusts in the social group",rarity:"common"},ego:{noun:"Independence",adj:"Independent",icon:"\ud83e\udd85",description:"Trusts only in oneself",rarity:"common"}},G={rocket:{noun:"Futurism",adj:"Futuristic",icon:"\ud83d\ude80",description:"Loves stories of the far future",rarity:"common"},dragon:{noun:"Mythology",adj:"Mythical",icon:"\ud83d\udc32",description:"Loves stories of the legendary past",rarity:"common"},music:{noun:"Drama",adj:"Dramatic",icon:"\ud83c\udfb5",description:"Loves stories of emotional bonding",rarity:"common"},noFaith:{noun:"Nihilism",adj:"Nihilist",icon:"\u26ab\ufe0f",description:"Hates fairy tales",rarity:"common"}},H={Diligence:{noun:"Diligence",adj:"Diligence",icon:"\ud83d\udcaa",rarity:"common",description:"\ud83c\udfb2 to \ud83d\udc4d while working"},Natalism:{noun:"Natalism",adj:"Natalist",icon:"\ud83d\udc76",rarity:"common",description:"Extra \ud83c\udfb2 for \ud83d\udc76;Extra \ud83d\udc4d after birth"},Antinatalism:{noun:"Antinatalism",adj:"Antinatalist",icon:"\ud83d\udeb7",rarity:"uncommon",description:"Less \ud83c\udfb2 for \ud83d\udc76;\ud83d\udca2 after birth"},Charity:{noun:"Charity",adj:"Charitable",icon:"\ud83d\ude07",rarity:"uncommon",description:"\ud83c\udfb2 to gift \ud83d\udcb0 to the penniless; and spread \ud83d\udc4d"},Progressivism:{noun:"Progressivism",adj:"Progressive",icon:"\u2696\ufe0f",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when paying taxes"},Libertarianism:{noun:"Libertarianism",adj:"Libertarian",icon:"\ud83d\udd2b",rarity:"rare",description:"\ud83c\udfb2 to \ud83d\udca2 when paying taxes"},Wanderlust:{noun:"Wanderlust",adj:"Wanderer",icon:"\ud83d\udd2d",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when travelling"},Germophobia:{noun:"Germophobia",adj:"Germophobic",icon:"\ud83e\udd27",rarity:"rare",description:"\ud83d\udca2 when sick or working in hospital"},Parochialism:{noun:"Parochialism",adj:"Parochial",icon:"\ud83d\udc2e",rarity:"common",description:"Extra \ud83d\udc4d working \ud83c\udf3e; \ud83d\udca2 from dense houses"},Cosmopolitanism:{noun:"Cosmopolitanism",adj:"Cosmopolitan",icon:"\ud83c\udf78",rarity:"common",description:"Extra \ud83d\udc4d working \ud83c\udfbb; \ud83d\udca2 from rural houses"},Capitalism:{noun:"Capitalism",adj:"Capitalist",icon:"\ud83c\udfa9",rarity:"common",description:"\ud83d\udca2 working in co-ops and communes; Extra \ud83d\udc4d when owner"},Socialism:{noun:"Socialism",adj:"Socialist",icon:"\ud83e\udd1d",rarity:"common",description:"Extra \ud83d\udc4d working in co-ops"},Communism:{noun:"Communism",adj:"Communist",icon:"\u2692\ufe0f",rarity:"common",description:"\ud83d\udca2 working in companies"},Fraud:{noun:"Fraud",adj:"Fraudulent",icon:"\ud83e\udd25",rarity:"uncommon",description:"\ud83c\udfb2 to avoid taxes; Extra \ud83c\udfb2 for theft \ud83d\ude08 Crime"},Naturalism:{noun:"Naturalism",adj:"Naturalist",icon:"\ud83d\udef6",rarity:"uncommon",description:"Extra \ud83d\udc4d from \ud83d\ude0e; \ud83d\ude0e 3x longer"},Hedonism:{noun:"Hedonism",adj:"Hedonistic",icon:"\ud83d\udc8b",rarity:"uncommon",description:"\ud83c\udfb2 to emote extra \ud83d\udc4d;\ud83c\udfb2 to \ud83d\udca2 when working;"},Gluttony:{noun:"Gluttony",adj:"Glutton",icon:"\ud83c\udf83",rarity:"common",description:"Extra \ud83d\udc4d when stuffed; Extra \ud83d\udca2 when hungry;"},Paranoia:{noun:"Paranoia",adj:"Paranoid",icon:"\ud83d\udc7d",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udca2 at any time"},Depression:{noun:"Depression",adj:"Depressive",icon:"\ud83d\ude13",rarity:"common",description:"\ud83c\udfb2 to \ud83d\udca2 when unhappy"},Optimism:{noun:"Optimism",adj:"Optimistic",icon:"\ud83d\ude3a",rarity:"uncommon",description:"\ud83c\udfb2 to \ud83d\udc4d when happy"},Authority:{noun:"Authority",adj:"Authoritarian",icon:"\ud83d\udc62",rarity:"common",description:"Less \ud83c\udfb2 for all \ud83d\ude08 Crime"},Anarchism:{noun:"Anarchism",adj:"Anarchist",icon:"\ud83d\udd95",rarity:"uncommon",description:"Extra \ud83c\udfb2 for all \ud83d\ude08 Crime"},Greed:{noun:"Greed",adj:"Greedy",icon:"\ud83e\udd11",rarity:"common",description:"Extra \ud83c\udfb2 for theft \ud83d\ude08 Crime; Extra \ud83d\udc4d when rich"},Bloodthirst:{noun:"Bloodthirst",adj:"Bloodthirsty",icon:"\ud83e\ude78",rarity:"rare",description:"High \ud83c\udfb2 to \u2620\ufe0f Kill during \ud83d\ude08 Crime"},Extroversion:{noun:"Extroversion",adj:"Extroverted",icon:"\ud83e\udd29",rarity:"common",description:"Extra \ud83c\udfb2 to start a \ud83d\udde3\ufe0f"},Introversion:{noun:"Introversion",adj:"Introverted",icon:"\ud83e\udd13",rarity:"uncommon",description:"Less \ud83c\udfb2 to be in a \ud83d\udde3\ufe0f"},Charisma:{noun:"Charisma",adj:"Charismatic",icon:"\ud83d\ude0f",rarity:"uncommon",description:"More \ud83c\udfb2 to persuade in a \ud83d\udde3\ufe0f"},Gossip:{noun:"Gossip",adj:"Gossipy",icon:"\ud83d\udcde",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udca2 in a \ud83d\udde3\ufe0f; \ud83c\udfb2 to \ud83d\udc4d after \ud83d\udde3\ufe0f"},Antagonism:{noun:"Antagonism",adj:"Antagonistic",icon:"\ud83e\udd2c",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udca2 in a \ud83d\udde3\ufe0f"},Enthusiasm:{noun:"Enthusiasm",adj:"Enthusiastic",icon:"\ud83e\udd73",rarity:"common",description:"\ud83c\udfb2 to spread \ud83d\udc4d in a \ud83d\udde3\ufe0f"},Sadism:{noun:"Sadism",adj:"Sadistic",icon:"\ud83d\ude08",rarity:"rare",description:"\ud83c\udfb2 to \u2620\ufe0f Kill in a \ud83d\udde3\ufe0f;\ud83d\udc4d from \u2620\ufe0f Kill"},Vandalism:{noun:"Vandalism",adj:"Vandal",icon:"\ud83d\udca9",rarity:"rare",description:"\ud83c\udfb2 to destroy goods;\ud83d\udc4d from \ud83d\ude08 Theft Crime"},Neuroticism:{noun:"Neuroticism",adj:"Neurotic",icon:"\ud83d\ude31",rarity:"rare",description:"+100% \ud83e\udde0 damage"},Dogmatism:{noun:"Dogmatism",adj:"Dogmatic",icon:"\ud83d\udc36",rarity:"uncommon",description:"Cannot change beliefs"}};var F=Object.keys(H).map((function(e){return e})),q=Object.keys(H).reduce((function(e,t){for(var n=t,a=P[H[n].rarity],r=0;r<a;r++)e.push(n);return e}),[]);function R(e,t,n){return Math.max(Math.min(e,n),t)}function L(e){var t,n,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.125;do{t=(n=2*ke(e)-1)*n+(a=2*ke(e)-1)*a}while(t>=1||0===t);return r+i*n*Math.sqrt(-2*Math.log(t)/t)}var z=function e(t,n){Object(c.a)(this,e),this.q=t,this.r=n},W=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}];function U(e){return W[e]}function J(e,t){var n=U(t);return{q:e.q+n.q,r:e.r+n.r}}function V(e,t){for(var n,a,r=[],i=function(e,t){return{q:e.q+t.q,r:e.r+t.r}}(e,(n=U(4),a=t,{q:n.q*a,r:n.r*a})),l=0;l<6;l++)for(var c=0;c<t;c++)r.push(i),i=J(i,l);return r}function $(e,t){for(var n=[e],a=0;a<t;a++)n=n.concat(V(e,a));return n}var X={point:{x:0,y:0},velocity:{x:0,y:0}};function Y(e,t,n,a,r,i){var l={x:t.x-e.point.x,y:t.y-e.point.y},c=Math.sqrt(l.x*l.x+l.y*l.y);return c<=r||(l.x/=c,l.y/=c,e.velocity.x+=l.x*n,e.velocity.y+=l.y*n,e.velocity.x=R(e.velocity.x,-a,a),e.velocity.y=R(e.velocity.y,-a,a),Z(e,i),!1)}function Z(e,t){e.velocity.x*=t.x,e.velocity.y*=t.y,e.point.x+=e.velocity.x,e.point.y+=e.velocity.y}function Q(e,t,n){return e+(t-e)*n}function ee(e,t,n){return{x:Q(e.x,t.x,n),y:Q(e.y,t.y,n),z:Q(e.z,t.z,n)}}function te(e){var t=Math.round(e.x),n=Math.round(e.y),a=Math.round(e.z),r=Math.abs(t-e.x),i=Math.abs(n-e.y),l=Math.abs(a-e.z);return r>i&&r>l?t=-n-a:i>l?n=-t-a:a=-t-n,{x:t,y:n,z:a}}function ne(e){var t=e.x,n=e.z;return new z(t,n)}function ae(e){return{x:e.q,z:e.r,y:-e.q-e.r}}function re(e,t){for(var n=function(e,t){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)+Math.abs(e.z-t.z))/2}(e,t),a=[],r=0;r<=n;r++)a.push(ne(te(ee(e,t,1/n*r))));return a}var ie=new function e(t,n,a,r,i,l,o,s,u){Object(c.a)(this,e),this.f0=t,this.f1=n,this.f2=a,this.f3=r,this.b0=i,this.b1=l,this.b2=o,this.b3=s,this.start_angle=u}(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0),le={x:0,y:0};function ce(e,t,n){var a=ie,r=(a.f0*n.q+a.f1*n.r)*e.x,i=(a.f2*n.q+a.f3*n.r)*e.y;return{x:r+t.x,y:i+t.y}}function oe(e){return{x:e.r*Math.cos(e.az),y:e.r*Math.sin(e.az)}}function se(e){return{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}var ue={farm:"\ud83d\udc04",house:"\ud83c\udfe1",hospital:"\ud83c\udfe5",church:"\u26ea",theater:"\ud83c\udfaa",courthouse:"\ud83c\udfeb",park:"\u26f2\ufe0f",nature:"\ud83c\udfde\ufe0f"},de={farm:"\ud83d\ude9c",house:"\ud83c\udfd8\ufe0f",hospital:"\ud83c\udfd9\ufe0f",church:"\u26ea",theater:"\ud83c\udfdf\ufe0f",courthouse:"\ud83c\udfeb",park:"\ud83c\udfa1",nature:"\ud83c\udfde\ufe0f"},me={farm:"\ud83c\udf3e",house:"\ud83d\udcea",hospital:"\ud83d\udecf\ufe0f",church:"\u26ea",theater:"\ud83e\ude91",courthouse:"\ud83c\udfeb",park:"\ud83d\udc90",nature:"\u2668\ufe0f"},ye={farm:"food",house:"shelter",hospital:"medicine",church:"fun",theater:"fun",courthouse:"fun",park:"fun",nature:"fun"},pe={food:"farm",shelter:"house",medicine:"hospital",fun:"theater"},he={farmer:"farm",builder:"house",doc:"hospital",entertainer:"theater",cleric:"church",jobless:"house",polit:"house"},fe={farm:"farmer",house:"builder",hospital:"doc",theater:"entertainer",church:"cleric",park:"entertainer",nature:"entertainer",courthouse:"polit"};var be=n(17),ve={};function ge(e){return null==ve[e]&&(ve[e]=new be.b(e,be.a.sfc32)),ve[e]}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=ge(e).next();return t=Math.ceil(t),n=Math.floor(n),Math.floor(a*(n-t+1))+t}function ke(e){return ge(e).next()}function we(e,t){return 1==t.length?t[0]:t[function(e,t){return Ee(e,0,t-1)}(e,t.length)]}function xe(e){return we(e,["prog","trad"])}function Ne(e){return we(e,["state","ego"])}function Se(e){return we(e,["rocket","music","dragon","noFaith"])}Math.PI;var De=["New ","Old ","Fort ","St. ","Mount ","Grand ","","","","","","","","","",""],je=["Spring","Timber","Over","West","East","North","South","Rock","Sand","Clay","Iron","Ore","Coal","Liver","Hawk","Red","Yellow","Gold","Blue","Black","White","Sunny","Reed","Ox","Mill","Fern","Down","Bel","Bald","Ash"],Ke=["water "," Springs","ville","dale","lane","peak","coast","beach","port","market","ton","brook"," Creek","land","burgh","bridge","ford","bury","chester","son","vale"," Valley","hill","more","wood"," Oaks"," Cove","mouth","way","crest"];function Ce(){return Object(A.a)(Object(A.a)({},{numberOfRings:5,hexes:$({q:0,r:0},5),hex_size:{x:70,y:70},petriRadius:545,petriOrigin:{x:545,y:545}}),{},{key:0,name:"string",deadBeanKeys:[],beanKeys:[],ufoKeys:[],pickupKeys:[],buildingKeys:[],pickupMagnetPoint:void 0,costOfLiving:0,buildingMap:{}})}function Ie(e,t,n,a,r){var i,l={key:e.beans.nextID++,cityKey:t.key,name:"",ethnicity:(i=e.seed,we(i,["circle","square","triangle"])),community:Ne(e.seed),ideals:xe(e.seed),faith:Se(e.seed),stamina:"awake",health:"fresh",food:"sated",discrete_food:3,discrete_health:2,discrete_sanity:10,discrete_stamina:7,discrete_fun:0,graceTicks:0,dob:{year:e.date.year,season:e.date.season,day:e.date.day,hour:e.date.hour},sanity:"sane",beliefs:[],lifecycle:"alive",hedonHistory:[{},{},{},{},{}],priorities:[],job:"jobless",happiness:{flatAverage:0,all:{},maxSource:"",minSource:"",weightedAverage:0},lastHappiness:0,hedonFiveDayRecord:{max:0,min:0},fairGoodPrice:0,bornInPetri:null!=n,cash:3,ticksSinceLastSale:0,ticksSinceLastRelax:0,lastChatMS:0,action:"idle",actionData:{act:"idle"},activity_duration:{buy:0,chat:0,craze:0,crime:0,idle:0,relax:0,sleep:0,soapbox:0,travel:0,work:0}};l.name=we(e.seed,["Joe","Frank","Jill","Jose","Johnny","Isabelle","Carmen","Ace","Carl","Zander","Jean","Anne","Leslie","Ben","Ron","Ellen","Dallas","Kane","Ash","Jim","James","Leonard","Nyota","Christine","Scotty","Tasha","Geordi","Beverly","Deanna","Wesley","Majel","Malcolm","River","Luke","Han","Owen","Rey","Mace","Cody","Dana","Walter","Rick","Holden","Roy","Pris","Eldon","Rachael","Rose","Donna","Jack","Amy","Rory","Martha","Clara","Arnold","Dave","Holly","Kara","Gaius","William","Lee","Laura","Saul","Max","Edison","Theora","Bryce","Murray","Ned","Daniel","Samantha","Logan","Francis","Jessica","Thomas","Benny","James","John Henry","Sarah","Piper","Nick","Shaun","Preston"])+" ",l.name+=we(e.seed,["Ripley","Bishop","Hicks","Vasquez","Hudson","Rico","Flores","Ibanez","Levy","Jenkins","Barlow","Zim","Rasczak","Kirk","McCoy","Sulu","Uhura","Chekov","Chapel","Rand","Riker","Crusher","Barret","O'Brien","Reynolds","Tam","Scully","Mulder","Skinner","Connor","Rex","Thrace","Baltar","Smith","Adama","Roslin","Tigh","Song","Oswald","Deckard","Bryant","Tyrell","Sebastian","Voight","Kampff","Tyler","Harkness","Jones","Noble","Pond","Williams","Rimmer","Lister","Head","Carter","Lynch","McKenzie","Grossberg","O'Neil","Jackson","Carter","Whitmore","House","Mitchell","Eden","Lyons","Valentine","Garvey"]);for(var c=Math.ceil(3*Math.random());l.beliefs.length<c;){var o=we(e.seed,q);l.beliefs.includes(o)||l.beliefs.push(o)}return n&&(l.ethnicity=n.ethnicity,l.name=l.name.split(" ")[0]+" "+n.name.split(" ")[1],l.cash=n.cash/2,n.cash/=2),l}function Me(e,t){return Array.isArray(e)?e.some((function(e){return Oe(e,t)})):Oe(e,t)}function Oe(e,t){return t[e]}function _e(e){return H[e].icon+" "+H[e].noun}var Be={food_aid:{key:"food_aid",group:"Welfare",name:"Food Aid",axis:"wel_food",icon:"\ud83d\udc68\u200d\ud83c\udf3e",description:"The government buys Hungry Subjects food.",prereqs:[["Gluttony","Parochialism"],["Charity","Socialism"]]},medical_aid:{key:"medical_aid",group:"Welfare",name:"Med Aid",axis:"wel_health",icon:"\ud83d\udc69\u200d\u2695\ufe0f",description:"The government buys Sick Subjects medicine.",prereqs:["Charity","Cosmopolitanism"]},poll_tax:{key:"poll_tax",group:"Taxation",name:"Head Tax",axis:"tax_basic",prereqs:[],icon:"\ud83d\udc51",description:"Subjects must pay a flat tax."},sales_tax:{key:"sales_tax",group:"Taxation",name:"Sales Tax",axis:"tax_basic",prereqs:[],icon:"\ud83d\udcb8",description:"Subjects must pay a percentage tax for every transaction."},death_tax:{key:"death_tax",group:"Taxation",name:"Death Tax",axis:"tax_second",prereqs:[],icon:"\u2620\ufe0f",description:"Dead subjects pay a portion of their cash to the government."}};function Ae(e,t){var n;return(null===(n=e.lawTree[Be[t].axis])||void 0===n?void 0:n.key)===t}function Pe(e,t,n){if(void 0!=(a=t).food&&void 0!=a.sick)switch(n){case"food":return("starving"===t.food||"hungry"===t.food)&&Ae(e,"food_aid");case"medicine":return("sick"===t.health||"sickly"===t.health)&&Ae(e,"medical_aid")}var a;return!1}function Te(e,t){return e.cash>=t}var Ge=["food","shelter","medicine","fun"];function He(e,t,n,a,r,i,l){qe(e,t,n,a);var c=t.price*a,o=c*l,s=c+o;return r.cash-=s,i.cash+=c,i.ticksSinceLastSale=0,{bought:a,price:c,tax:o}}function Fe(e,t,n,a,r,i){qe(e,n,a,r);var l=n.price*r,c=l;return t.cash-=c,i.cash+=l,i.ticksSinceLastSale=0,{bought:r,price:l,tax:0}}function qe(e,t,n,a){t.quantity-=a,t.quantity<=0&&e.listings[n].splice(0,1)}function Re(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;e.monthlyDemand[a]+=l;var c=We(e.market,a,i);if(null!=c){var o=Math.min(c.quantity,l),s=Ae(t,"sales_tax")?.05:0;if(c.price*(1+s)<=n.cash*o){var u=He(e.market,c,a,o,n,r(c),s);return u.tax&&(t.cash+=u.tax),u}if(Pe(t,n,a)&&Te(t,c.price))return Fe(e.market,t,c,a,o,r(c));e.unfulfilledMonthlyDemand[a]+=o}else e.unfulfilledMonthlyDemand[a]+=l}function Le(e,t){var n=e.monthlySupply[t]||1,a=e.monthlyDemand[t];return.25+.75*Math.min(a/n,1)}function ze(e){return Le(e,"food")+Le(e,"shelter")+Le(e,"medicine")}function We(e,t,n){var a=e.listings[t].filter((function(e){return e.quantity>=n}));if(a.length>0){for(var r=1,i=a[0].price,l=1;l<a.length;l++){if(a[l].price>i)break;r++}var c=Math.floor(Math.random()*r);if(c>=a.length)throw"invalid index";return a[c]}return null}function Ue(e,t){return{key:0,point:Object(A.a)({},(v.Get("bean",e.key).current||X).point),type:t,velocity:{x:0,y:0}}}function Je(e,t){return e.discrete_health>=C.abundant?e.health="fresh":e.discrete_health>=C.sufficient?e.health="bruised":e.discrete_health>=C.warning?e.health="sickly":e.health="sick",e.health}function Ve(e,t){return e.discrete_stamina<0?e.stamina="homeless":e.stamina="rested",e.stamina}function $e(e,t){return e.discrete_food>=K.abundant?e.food="stuffed":e.discrete_food>=K.sufficient?e.food="sated":e.discrete_food>=K.warning?e.food="hungry":e.food="starving",e.food}function Xe(e){if(e.lastChatMS+4e3>Date.now())return!1;if("chat"===e.action)return!1;var t=Math.random(),n="state"===e.community?.2:.1;return Ze(e,"Extroversion")&&(n+=.25),Ze(e,"Introversion")&&(n+=-.15),t<n}function Ye(e,t,n){e.discrete_sanity=R(e.discrete_sanity+B[t],0,10),e.hedonHistory[0][n]=(e.hedonHistory[0][n]||0)+_[t];var a=[Ue(e,t)];return Ze(e,"Hedonism")&&("happiness"===t||"love"===t)&&Math.random()<.1&&a.push.apply(a,Object(y.a)(Ye(e,"happiness","Hedonism"))),a}function Ze(e,t){return-1!==e.beliefs.indexOf(t)}function Qe(e,t,n){return function(e,t){return"alive"===e.lifecycle&&e.cash>3*t&&!rt(e)}(e,n)&&function(e,t){return ke(e)<=t}(t,function(e){var t=.008;Ze(e,"Natalism")&&(t+=.04);Ze(e,"Antinatalism")&&(t+=-.002);return t}(e))?(Ze(e,"Natalism")?Ye(e,"love","Natalist Parent"):Ze(e,"Antinatalism")?Ye(e,"hate","Antinatalism"):Ye(e,"happiness","Proud Parent"),{icon:"\ud83c\udf89",trigger:"birth",message:"".concat(e.name," has a baby!"),key:0}):void 0}function et(e,t,n,a,r){if(a&&Math.random()<=r){if(e.graceTicks<=0)return tt(e,t,n);e.graceTicks--}}function tt(e,t,n){e.lifecycle="dead";var a=Ee(t,2,3),r=new Array(a).map((function(t){return Ue(e,"hate")}));return{death:{icon:"\u2620\ufe0f",trigger:"death",message:"".concat(e.name," died of ").concat(n,"!"),beanKey:e.key,cityKey:e.cityKey,point:(v.Get("bean",e.key).current||X).point,key:0},emotes:r}}function nt(e,t){var n=Ze(e,"Neuroticism")?2:1;e.discrete_sanity-=n*t}function at(e){var t;if("chat"===e.action&&("speaker"===(null===(t=e.actionData.chat)||void 0===t?void 0:t.participation)&&e.actionData.chat.preachBelief))return"\ud83d\udcac"+H[e.actionData.chat.preachBelief].icon}function rt(e){return"starving"===e.food||"homeless"===e.stamina||"sick"===e.health}function it(e,t,n){return void 0===t.sanity||e.discrete_sanity>=t.sanity+n}function lt(e){var t,n;if("dead"===e.lifecycle)return"\ud83d\udc80";if("sleep"===e.actionData.act)return"\ud83d\ude34";if("crime"===e.actionData.act)return"\ud83d\ude08";if("relax"===e.actionData.act)return"\ud83d\ude0e";if("chat"===e.actionData.act){var a;if("speaker"===(null===(a=e.actionData.chat)||void 0===a?void 0:a.participation))switch(null===(t=e.actionData)||void 0===t||null===(n=t.chat)||void 0===n?void 0:n.type){default:return"\ud83d\ude03";case"gift":return"\ud83d\ude07";case"praise":return"\ud83e\udd73";case"bully":return"\ud83d\ude08"}return"\ud83e\udd28"}return"starving"===e.food?"\ud83d\ude2b":"sick"===e.health?"\ud83e\udd22":"homeless"===e.stamina?"\ud83e\udd76":"jobless"===e.job?"\ud83d\ude27":e.lastHappiness<0?"\u2639\ufe0f":e.lastHappiness>=50?"\ud83d\ude42":"\ud83d\ude10"}var ct=new function e(){Object(c.a)(this,e),this.alienEnergy=new h,this.alienBots=new h,this.alienHedons=new h,this.newTraitSeen=new p,this.events=new p,this.autosave=new p},ot={found_utopia:{key:"found_utopia",text:"Found your Utopia",check:function(e){return e.buildings.allIDs.length>0}},build_house_n_farm:{key:"build_house_n_farm",text:"Build a house and farm",check:function(e){return null!=e.buildings.allIDs.find((function(t){return"farm"==e.buildings.byID[t].type}))&&null!=e.buildings.allIDs.find((function(t){return"house"==e.buildings.byID[t].type}))},reward:{energy:3,bots:3}},beam_3:{key:"beam_3",text:"Beam in 3 new beings",check:function(e){return e.beans.allIDs.filter((function(t){return!e.beans.byID[t].bornInPetri})).length>=3}},scan:{key:"scan",text:"Scan a Subject",check:function(e){return Object.keys(e.alien.scanned_bean).length>0}},set_policy:{key:"set_policy",text:"Set a Gov Policy",check:function(e){return!1}},brainwash:{key:"brainwash",text:"Brainwash a Subject",check:function(e){return!1}},"c+_grade":{key:"c+_grade",text:"Receive a C+ Grade",check:function(e){return!1}}},st={GradeWorld:function(e){return{Happiness:dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return e.lastHappiness>-.2})),Prosperity:dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return"hungry"!==e.food})),Stability:dt(e.beans.allIDs.map((function(t){return e.beans.byID[t]})),(function(e){return"sane"===e.sanity})),Dogma:ut(e.alien.speechcrimes[e.date.year]||0,10,10)}},RubricDescription:{Happiness:"Subjects are at least 20% happy",Prosperity:"Subjects are not hungry",Stability:"Subjects are all sane",Dogma:"Up to 10 Speechcrimes"}};function ut(e,t,n){return mt(1-Math.min(1,Math.max(0,e-t)/n))}function dt(e,t){return e.length<1?"F":mt(e.filter(t).length/e.length)}function mt(e){return e<.58?"F":e<.68?"D":e<.78?"C":e<.88?"B":"A"}var yt={A:5,B:4,C:3,D:2,F:1};var pt={sanity_bonus:{tech:"sanity_bonus",name:"Surgical Psychops",techPoints:30,description:"Brainwashing causes -1 \ud83e\udde0 Sanity damage"},fast_resources:{tech:"fast_resources",name:"0 Dimensional Supersiphons",techPoints:30,description:"Faster \u26a1\ufe0f and \ud83e\udd16 accumulation"},trauma_nanobots:{tech:"trauma_nanobots",name:"Trauma Nanobots",techPoints:30,description:"Spend \ud83e\udd16 to stop Subject from dying"},neural_duplicator:{tech:"neural_duplicator",name:"Level 2 Neural Duplication",techPoints:30,description:"Copy \ud83e\udde0 Traits 1 additional time"}};function ht(e,t){t.bots&&(e.bots.amount+=t.bots,ct.alienBots.publish({change:t.bots})),t.energy&&(e.energy.amount+=t.energy,ct.alienEnergy.publish({change:t.energy})),t.hedons&&(e.hedons.amount+=t.hedons,ct.alienHedons.publish({change:t.hedons}))}function ft(e,t){return null!=e[t]&&e[t].researchPoints>=pt[t].techPoints}function bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(void 0===t.bots||e.bots.amount>=t.bots*n)&&(void 0===t.energy||e.energy.amount>=t.energy*n)&&(void 0===t.hedons||e.hedons.amount>=t.hedons*n)}function vt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return!!bt(e,t,n)&&(gt(e,t,n),!0)}function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.bots&&(e.bots.amount-=t.bots*n,ct.alienBots.publish({change:-t.bots*n})),t.energy&&(e.energy.amount-=t.energy*n,ct.alienEnergy.publish({change:-t.energy*n})),t.hedons&&(e.hedons.amount-=t.hedons*n,ct.alienHedons.publish({change:-t.hedons*n}))}var Et=n(9),kt=n(12),wt=(n(31),{x:25,y:25});function xt(e){return ce(wt,le,e)}function Nt(e){return se(xt(e))}var St={2:0,0:1,4:2,1:3,5:4,3:5},Dt=function(e){return r.a.createElement(jt,{building:e.building,style:{},cityName:e.city.name,getStyle:Nt})},jt=function(e){return r.a.createElement("div",{key:e.building.type+e.building.key,style:e.style,className:"building "+e.building.type},e.building.upgraded?de[e.building.type]:ue[e.building.type],r.a.createElement(Kt,{building:e.building,getStyle:e.getStyle}),"courthouse"===e.building.type?r.a.createElement("span",{className:"tile-label"},e.cityName):null)},Kt=function(e){return r.a.createElement(r.a.Fragment,null,W.map((function(t,n){var a=St[n],i=null!=e.building.jobs[a];return r.a.createElement("span",{key:n,className:"slot",style:e.getStyle(t)},i?me[e.building.type]:null)})))},Ct=n(5),It=["farm","hospital","house","theater"];function Mt(e){return[0,1,2,3,4,5].filter((function(t,n){return null==e.jobs[+t]&&(n<3||e.upgraded)})).map((function(e){return+e}))}function Ot(e,t,n,a,r){var i={type:n,key:e.buildings.nextID++,address:a,jobs:[],upgraded:!1};e.buildings.allIDs.push(i.key),e.buildings.byID[i.key]=i,t.buildingKeys.push(i.key),t.buildingMap["".concat(a.q,",").concat(a.r)]=i.key,It.some((function(e){return n}))&&(i.enterpriseKey=i.key,e.enterprises.allIDs.push(i.key),e.enterprises.byID[i.key]={cash:0,cityKey:t.key,enterpriseType:"company",key:i.key,ticksSinceLastSale:0});var l=ye[n];return"fun"!=l&&e.economy.market.listings[l].push({price:1,quantity:3,sellerCityKey:t.key,sellerEnterpriseKey:i.key}),i}function _t(e,t){"jobless"!==t.job&&function(e,t){var n=e.jobs.length;return e.jobs=e.jobs.filter((function(e){return e!=t})),n===e.jobs.length+1}(e,t.key)&&(t.employerEnterpriseKey=void 0,t.job="jobless")}var Bt={travel:{enter:function(e){},act:function(e,t,n,a){var r=t.cities.byID[e.cityKey],i=e.actionData.destinationIndex||0;if(null==e.actionData.destinations||0===e.actionData.destinations.length||i>=e.actionData.destinations.length)return e.actionData.intent?{newActivity:e.actionData.intent}:{newActivity:{act:"idle"}};var l=e.actionData.destinations[i];if(isNaN(l.x)||isNaN(l.y))return console.warn("NaN destination, resetting to idle"),{newActivity:{act:"idle"}};var c=Object(A.a)({},v.Get("bean",e.key).current||X),o=Y(c,l,N*a/1e3,S,D,x);if(v.Get("bean",e.key).publish(c),o)return{action:Jn({beanKey:e.key})};if(r){var s=function(e,t){var n=v.Get("bean",t.key).current;return n?e.beanKeys.filter((function(e){if(e==t.key)return!1;var a=v.Get("bean",e).current;if(!a)return!1;var r=Math.pow(a.point.x-n.point.x,2)+Math.pow(a.point.y-n.point.y,2);return r<1600&&r>600})):[]}(r,e);if(s.length&&Xe(e)){var u=s.filter((function(e){return Xe(t.beans.byID[e])}));if(u.length<1)return{};var d=function(e,t,n){if(e.beliefs.length){if(Ze(e,"Charity")&&e.cash>=2){var a=n();if(a)return{participation:"speaker",type:"gift",targetBeanKey:a.key}}else{if(Ze(e,"Enthusiasm")&&Math.random()<.45)return{participation:"speaker",type:"praise",preachBelief:"Enthusiasm"};if(Ze(e,"Antagonism")&&Math.random()<.45)return{participation:"speaker",type:"bully",preachBelief:"Antagonism"};if(Ze(e,"Gossip")&&Math.random()<.35)return{participation:"speaker",type:"bully",preachBelief:"Gossip"}}return{participation:"speaker",type:"preach",preachBelief:we(t,e.beliefs),persuasionStrength:1+(Ze(e,"Charisma")?2:0)}}return{participation:"speaker",type:"praise"}}(e,t.seed,(function(){return u.map((function(e){return t.beans.byID[e]})).filter((function(t){return t.cash<=e.cash-1})).reduce((function(e,t){return null==e||t.cash<e.cash?t:e}),void 0)}));return{newActivity:{act:"chat",chat:d,intent:e.actionData},action:u.map((function(e){return Wn({beanKey:e,newState:{act:"chat",chat:Object(A.a)(Object(A.a)({},d),{},{participation:"listener"}),intent:t.beans.byID[e].actionData}})}))}}if(Ze(e,"Wanderlust")&&Math.random()<Gt)return{action:Un({beanKey:e.key,emote:"happiness",source:"Wanderlust"})}}return{}},exit:function(e){}},work:{enter:function(e){},act:function(e,t,n){return n>3e3&&e.actionData.good?{action:Vn({beanKey:e.key}),newActivity:{act:"idle"}}:{}},exit:function(e){}},sleep:{enter:function(e){},act:function(e,t,n){return n>3e3?{newActivity:{act:"idle"}}:{}},exit:function(e){}},chat:{enter:function(e){},act:function(e,t,n){return n>1e3&&e.actionData.intent?{newActivity:{act:"travel",intent:e.actionData.intent}}:{}},exit:function(e,t){if(e.actionData.chat&&"listener"===e.actionData.chat.participation)switch(e.actionData.chat.type){case"bully":return Un({beanKey:e.key,emote:"unhappiness",source:"Antagonism"});case"praise":return Un({beanKey:e.key,emote:"happiness",source:"Enthusiasm"});case"preach":if(e.actionData.chat.preachBelief&&e.actionData.chat.persuasionStrength&&function(e,t,n,a){if(Ze(e,"Dogmatism"))return!1;if(!e.beliefs.includes(n)){var r=10+Ee(t,1,6);return r+=e.beliefs.length-2,Ee(t,1,20)+a>r}return!1}(e,t,e.actionData.chat.preachBelief,e.actionData.chat.persuasionStrength))return Zn({beanKey:e.key,belief:e.actionData.chat.preachBelief})}}},soapbox:{enter:function(e){},act:function(e){return{}},exit:function(e){}},craze:{enter:function(e){},act:function(e){return{}},exit:function(e){}},idle:{enter:function(e){},act:function(e,t,n){if(n<200)return{};for(var a=e.priorities.slice(0),r=a[0],i=void 0,l=void 0;r&&null==i;){var c=At(e,t,r);if(null===c||void 0===c?void 0:c.intent){if(null!=(i=Tt(e,t.cities.byID[e.cityKey],c.intent,t)))return{newActivity:i,action:l}}else(null===c||void 0===c?void 0:c.sideEffect)&&(l=c.sideEffect);r=a.shift()}return{action:l}},exit:function(e){if(function(e){if(Ze(e,"Paranoia")&&Math.random()<.05)return!0}(e))return Un({beanKey:e.key,emote:"unhappiness",source:"Paranoia"})}},buy:{enter:function(e){},act:function(e,t,n){return e.actionData.buyReceipt?{newActivity:{act:"shelter"===e.actionData.good?"sleep":"idle"}}:n>1100||(e.actionData.buyAttempts||0)>=3?{newActivity:{act:"idle"}}:n>250&&e.actionData.good?{action:Xn({beanKey:e.key,good:e.actionData.good})}:{}},exit:function(e){}},crime:{enter:function(e){},act:function(e,t,n){return n>1500?{newActivity:{act:"idle"},action:Yn({beanKey:e.key,good:e.actionData.crimeGood||"food"})}:{}},exit:function(e){}},relax:{enter:function(e){},act:function(e,t,n){var a=1e3;return Ze(e,"Naturalism")&&(a*=3),n>a?{newActivity:{act:"idle"}}:{}},exit:function(e){return $n({beanKey:e.key})}}};function At(e,t,n){if("buy"===n.act&&null!=n.good){var a=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=We(e.market,a,r);if(null==l)return"nosupply";var c=Math.min(l.quantity,i);return l.price<=n.cash*c||Pe(t,n,a)&&Te(t,l.price)?"yes":"pricedout"}(t.economy,t.law,e,n.good);return"yes"!=a&&"fun"===n.good?{intent:{act:"relax"}}:"pricedout"===a?"food"!=n.good&&"medicine"!=n.good||!function(e,t){if("shelter"===t)return!1;if("fun"===t)return!1;var n=Math.random(),a=.05;return"ego"===e.community&&(a+=.1),rt(e)&&(a+=.1),Ze(e,"Greed")&&(a+=.25),Ze(e,"Anarchism")&&(a+=.33),Ze(e,"Authority")&&(a+=-.25),("food"===t&&"starving"===e.food||"medicine"===t&&"sick"===e.health)&&(a+=.25),a<=n}(e,n.good)?"food"===n.good||"medicine"===n.good||"shelter"===n.good?{sideEffect:Un({beanKey:e.key,emote:"unhappiness",source:M[n.good]+" Poverty"})}:void 0:{intent:{act:"crime",crimeGood:n.good}}:"nosupply"===a?n.good&&function(e,t){var n=!1;return("food"!==t||"starving"!==e.food&&"hungry"!==e.food)&&("shelter"!==t||"homeless"!==e.stamina&&"sleepy"!==e.stamina)&&("medicine"!==t||"sick"!==e.health&&"sickly"!==e.health)||(n=!0),n}(e,n.good)?{sideEffect:Un({beanKey:e.key,emote:"unhappiness",source:"Scarcity"})}:void 0:{intent:Object(A.a)(Object(A.a)({},n),{},{buyAttempts:0})}}return{intent:n}}function Pt(e,t,n,a){switch(n.act){case"buy":if(n.good)return Wt(t,a,e,pe[n.good]);case"work":return Wt(t,a,e,he[e.job]);case"relax":var r=function(e,t){var n=e.buildingKeys.filter((function(e){return"nature"===t.buildings.byID[e].type||"park"===t.buildings.byID[e].type||"theater"===t.buildings.byID[e].type}));if(!(n.length<1)){var a=we(t.seed,n);return t.buildings.byID[a]}}(t,a);if(r)return Ut(a.seed,t,e,r)}return[]}function Tt(e,t,n,a){var r=Pt(e,t,n,a);return r?{act:"travel",destinations:r,destinationIndex:0,intent:n}:void 0}var Gt=.002,Ht=function(e,t,n){return"jobless"==e.job?0:0===e.cash?L(t,.75):n?L(t,.5+.125*Math.min(1,n.costOfLiving/e.cash)):L(t)},Ft=function(e,t,n){return L(t,.5+.75*Math.min(1,n.bean_life.vital_thresh.food.warning/e.discrete_food))},qt=function(e,t,n){return L(t,.5+.5*Math.min(1,n.bean_life.vital_thresh.shelter.warning/e.discrete_stamina))},Rt=function(e,t,n){return L(t,.5+.25*Math.min(1,n.bean_life.vital_thresh.medicine.warning/e.discrete_health))},Lt=function(e,t,n){return L(t,.5+.125*Math.min(1,-e.lastHappiness/100))};function zt(e,t,n,a){var r=[{act:"work",good:I(e.job),priority:Ht(e,t,n)},{act:"buy",good:"shelter",priority:qt(e,t,a)},{act:"buy",good:"food",priority:Ft(e,t,a)},{act:"buy",good:"medicine",priority:Rt(e,t,a)},{act:"buy",good:"fun",priority:Lt(e,t,a)}];return r.sort((function(e,t){return t.priority-e.priority})),r}function Wt(e,t,n,a){var r=function(e,t,n){var a=e.buildingKeys.filter((function(e){return t.buildings.byID[e].type===n}));if(!(a.length<1)){var r=we(t.seed,a);return t.buildings.byID[r]}}(e,t,a);return void 0===r?null:Ut(t.seed,e,n,r)}function Ut(e,t,n,a){var r,i,l=v.Get("bean",n.key).current||Object(A.a)({},X),c=function(e,t,n){var a=ie,r=(n.x-t.x)/e.x,i=(n.y-t.y)/e.y,l=a.b0*r+a.b1*i,c=a.b2*r+a.b3*i;return new z(l,c)}(t.hex_size,t.petriOrigin,l.point);return(r=c,i=a.address,re(ae(r),ae(i))).map((function(e){return ce(t.hex_size,t.petriOrigin,e)})).map((function(t,n,a){if(n===a.length-1){var r=function(e){return xt(we(e,W))}(e);return{x:t.x+r.x,y:t.y+r.y}}return t}))}var Jt=new(function(){function e(){Object(c.a)(this,e),this.cache={bean:{},ufo:{}}}return Object(o.a)(e,[{key:"Get",value:function(e,t){return this.cache[e][t]||(this.cache[e][t]={elapsed:0,duration:0}),this.cache[e][t]}}]),e}());function Vt(e,t){for(var n=function(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),a=e[--t];e[t]=e[n],e[n]=a}return e}(e.cities.byID[t.cityKey].buildingKeys.map((function(t){return e.buildings.byID[t]})).filter((function(e){var t=["farm","house","theater","hospital"].includes(e.type),n=Mt(e).length>0;return t&&n}))),a=0;a<n.length;a++){var r=n[a];if(Mt(r).length>0)return $t(t,r,e.enterprises.byID[r.key]),!0}return!1}function $t(e,t,n){t.jobs.push(e.key),e.employerEnterpriseKey=t.key,n&&null==n.ownerBeanKey&&(n.ownerBeanKey=e.key),e.job=fe[t.type]}function Xt(e){return{byID:e.reduce((function(e,t){return e[t.key]=t,e}),{}),allIDs:e.map((function(e){return e.key})),hxPosition:{},nextID:e.reduce((function(e,t){return Math.max(t.key+1,e)}),0)}}function Yt(e,t){var n=e.nextID++;t.key=n,e.allIDs.push(n),e.byID[n]=t}var Zt,Qt="drop.mp3",en="ding_soft.mp3",tn="ding_bad.wav",nn="death_bell.wav",an="scan.mp3",rn="squish_pop.mp3",ln="squish_suck.mp3",cn="baby_squeak.wav",on="mhmm.mp3",sn="pill-shake.wav",un="cow-moo.wav",dn="door-open.wav",mn="teleport.wav",yn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(c.a)(this,e),this.file=t,this.volume=n,this.buffer=[]}return Object(o.a)(e,[{key:"play",value:function(){if(this.buffer.length>0&&this.buffer[0].ended){var e=this.buffer.shift();null===e||void 0===e||e.play(),e&&this.buffer.push(e)}else{var t=new Audio("/socsim/"+this.file);t.volume=this.volume,t.play(),this.buffer.push(t)}}}]),e}(),pn=new(function(){function e(){Object(c.a)(this,e),this.lib={drop:new yn(Qt,.2),love:new yn(en),happiness:new yn(en),unhappiness:new yn(tn),hate:new yn(tn),death:new yn(nn),scan:new yn(an,.3),wash_in:new yn(rn),wash_out:new yn(ln),squeak:new yn(cn,.3),mhmm:new yn(on,.5),moo:new yn(un,1),pills:new yn(sn,1),door:new yn(dn,1),teleport:new yn(mn,.6)}}return Object(o.a)(e,[{key:"play",value:function(e){this.lib[e].play()}}]),e}()),hn={common:3,uncommon:5,rare:7},fn={common:3,uncommon:5,rare:7};function bn(e,t){var n=H[t].rarity;return{trait:t,cost:{hedons:hn[n]+Ee(e,0,fn[n])}}}!function(e){e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Fall=2]="Fall",e[e.Winter=3]="Winter"}(Zt||(Zt={}));var vn;!function(e){e[e.Midnight=0]="Midnight",e[e.Morning=2]="Morning",e[e.Noon=4]="Noon",e[e.Evening=6]="Evening"}(vn||(vn={}));function gn(e){if(e.date.hour++,e.date.hour>=8&&(e.date.hour=0,e.date.day++,function(e){e.beans.allIDs.forEach((function(t){var n=e.beans.byID[t];n.hedonHistory.length>=5&&n.hedonHistory.pop(),n.hedonHistory.unshift({})})),e.enterprises.allIDs.forEach((function(t){var n=e.enterprises.byID[t],a=e.buildings.byID[t].jobs.map((function(t){return e.beans.byID[t]}));switch(n.enterpriseType){case"company":if(a.length<1);else if(1===a.length)a[0].cash+=n.cash,n.cash>0&&(a[0].ticksSinceLastSale=0),n.cash=0;else{var r=n.cash/(a.length+.25);n.cash=0;var i=a.find((function(e){return e.key===n.ownerBeanKey}));null==i&&(i=a[0],n.ownerBeanKey=i.key),a.forEach((function(e){var t=e===i?1.25*r:r;e.cash+=t,t>0&&(e.ticksSinceLastSale=0)}))}break;case"co-op":var l=n.cash/a.length;n.cash=0,a.forEach((function(e){e.cash+=l,l>0&&(e.ticksSinceLastSale=0)}));break;case"commune":var c=n.cash/a.length;n.cash=0,a.forEach((function(e){e.cash+=c,c>0&&(e.ticksSinceLastSale=0)}))}}))}(e),e.date.day%7===0&&function(e){if(e.marketTraitsForSale=function(e){for(var t=[],n=0;n<3;n++){var a=we(e,q);t.push(bn(e,a))}return t}(e.seed),En(e,{key:0,message:"New traits in the Emotion Market!",icon:"\ud83d\udecd\ufe0f",trigger:"marketrefresh"}),Ae(e.law,"poll_tax")){var t=0;e.cities.allIDs.forEach((function(n){oa(e,n).forEach((function(e){e.cash>=.1&&(e.cash-=.1,t+=.1)}))})),e.law.cash=e.law.cash+t}!function(e,t){var n=1*t.length;if(e.cash>n){var a=(e.cash-n)/t.length;e.cash=n,t.forEach((function(e){return e.cash+=a}))}}(e.law,Object.values(e.beans.byID))}(e)),e.date.day>30&&(e.date.day=1,function(e){e.economy.unfulfilledMonthlyDemand={food:0,shelter:0,medicine:0,fun:0},e.economy.monthlyDemand={food:0,shelter:0,medicine:0,fun:0},e.economy.monthlySupply={food:0,shelter:0,medicine:0,fun:0}}(e),e.date.season++),e.date.season>3&&(e.date.year++,function(e){!function(e){var t=e.beans.allIDs.reduce((function(t,n){return t.push(e.beans.byID[n]),t}),[]),n=t.reduce((function(e,t){return e+t.cash}),0)/100,a=Math.round(1*n);if(a>0){var r=t.reduce((function(e,t){return t.cash>e.max&&(e.winner=t,e.max=t.cash),e}),{max:0});r.winner&&(r.winner.cash+=a)}}(e)}(e),e.date.season=0),e.alien.bots.amount+=e.alien.bots.income,e.alien.energy.amount+=e.alien.energy.income,ft(e.alien.techProgress,"fast_resources")&&(e.alien.bots.amount+=.5*e.alien.bots.income,e.alien.energy.amount+=.5*e.alien.energy.income),e.alien.currentlyResearchingTech){var t=e.alien.currentlyResearchingTech;null==e.alien.techProgress[t]&&(e.alien.techProgress[t]={researchPoints:0});var n=pt[t].techPoints,a=e.alien.techProgress[t].researchPoints;a<n&&(e.alien.techProgress[t].researchPoints+=e.alien.abductedBeanKeys.length),a>=n&&("neural_duplicator"===e.alien.currentlyResearchingTech&&e.alien.beliefInventory.forEach((function(e){return e.charges+=1})),e.alien.currentlyResearchingTech=void 0)}var r=ze(e.economy);return e.beans.allIDs.forEach((function(t,n){var a=e.beans.byID[t];if("alive"==a.lifecycle){var i=function(e,t,n){if("alive"==e.lifecycle){var a=[],r="starving"!==e.food,i="sick"!==e.health;e.discrete_food-=n.bean_life.degrade_per_tick.food,e.discrete_food<0&&(e.discrete_health-=n.bean_life.penalty.starving_health),$e(e);var l=et(e,t,"starvation","starving"===e.food,.6);if(l)return l;"starving"===e.food&&r&&(a.push.apply(a,Object(y.a)(Ye(e,"unhappiness","Starving"))),Ze(e,"Gluttony")&&(a.push.apply(a,Object(y.a)(Ye(e,"unhappiness","Gluttony"))),a.push.apply(a,Object(y.a)(Ye(e,"unhappiness","Gluttony"))))),e.discrete_stamina-=n.bean_life.degrade_per_tick.stamina,Ve(e);var c=et(e,t,"exposure","homeless"===e.stamina,.2);if(c)return c;e.discrete_health-=n.bean_life.degrade_per_tick.health,e.discrete_health=Math.min(e.discrete_health,3),Je(e);var o=et(e,t,"sickness","sick"===e.health,.4);return o||("sick"===e.health&&i&&(a.push.apply(a,Object(y.a)(Ye(e,"unhappiness","Sick"))),Ze(e,"Germophobia")&&a.push.apply(a,Object(y.a)(Ye(e,"unhappiness","Germophobia")))),e.discrete_fun-=n.bean_life.degrade_per_tick.fun,e.discrete_fun=Math.max(0,e.discrete_fun),rt(e)||(e.graceTicks=R(e.graceTicks+1,0,6)),a.length?{emotes:a}:void 0)}}(a,e.seed,e.alien.difficulty);(null===i||void 0===i?void 0:i.emotes)&&i.emotes.map((function(t){return Yt(e.pickups,t)})),(null===i||void 0===i?void 0:i.death)&&Yt(e.events,i.death);var l=Qe(a,e.seed,r);if(l){var c=Ie(e,e.cities.byID[a.cityKey],a);a.lastPoint&&(c.lastPoint=a.lastPoint,v.Get("bean",c.key).publish({point:{x:a.lastPoint.x,y:a.lastPoint.y},velocity:{x:0,y:0}})),e.beans.byID[c.key]=c,e.beans.allIDs.push(c.key),e.cities.byID[a.cityKey].beanKeys.push(c.key),En(e,l),pn.play("squeak")}if("jobless"===a.job)Vt(e,a)||En(e,{icon:"\ud83c\udfda\ufe0f",trigger:"nojobslots",message:"A subject cannot find a job; build or upgrade more buildings.",key:0});a.happiness=function(e){if(0===e.length)return{all:{},flatAverage:0,weightedAverage:0,maxSource:"",minSource:""};for(var t={},n=0,a=0,r=0;r<e.length;r++){for(var i=e[r],l=0,c=Object.keys(i),o=0;o<c.length;o++){var s=c[o];l+=i[s],t[s]||(t[s]=0),t[s]+=i[s]}n+=l/(r+1),a+=l}var u=Object.keys(t);return{flatAverage:a/e.length,weightedAverage:n,maxSource:u.reduce((function(e,n){return t[n]>e.val?{source:n,val:t[n]}:e}),{source:"",val:0}).source,minSource:u.reduce((function(e,n){return t[n]<e.val?{source:n,val:t[n]}:e}),{source:"",val:0}).source,all:t}}(a.hedonHistory)}})),e.cities.allIDs.forEach((function(t){var n,a,r=e.cities.byID[t];n=r,a=e.economy,n.costOfLiving=ze(a)})),e.beans.allIDs.forEach((function(t){var n,a,r=e.beans.byID[t];r&&"alive"==r.lifecycle&&(n=r,a=e.economy,e.alien.difficulty,e.law,n.hedonFiveDayRecord={min:Math.min(n.hedonFiveDayRecord.min,n.happiness.flatAverage),max:Math.max(n.hedonFiveDayRecord.max,n.happiness.flatAverage)},0===n.happiness.flatAverage?n.lastHappiness=0:n.lastHappiness=n.happiness.flatAverage>=0?n.happiness.flatAverage/Math.abs(n.hedonFiveDayRecord.max)*100:n.happiness.flatAverage/Math.abs(n.hedonFiveDayRecord.min)*100,$e(n),Je(n),function(e,t){e.discrete_sanity>=8?e.sanity="sane":e.discrete_sanity>=5?e.sanity="stressed":e.discrete_sanity>=3?e.sanity="disturbed":e.sanity="psychotic",e.sanity}(n),Ve(n),"jobless"===n.job?n.fairGoodPrice=1:n.fairGoodPrice=Le(a,I(n.job)))})),function(e,t){for(var n=0;n<t.goals.length;n++){var a=t.goals[n];if(null==t.goalProgress[a]&&(t.goalProgress[a]={done:!1,step:0}),!t.goalProgress[a].done){var r=ot[a].check(e),i=ot[a].reward;t.goalProgress[a].done=r,r&&null!=i&&ht(t,i)}}}(e,e.alien),function(e,t){t.workingReportCard=st.GradeWorld(e)}(e,e.alien),e}function En(e,t){t.key=e.events.nextID++,e.events.byID[t.key]=t,e.events.allIDs.push(t.key),ct.events.publish(t)}function kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[];return e.energy&&a.push(t+e.energy*n+" Energy"),e.bots&&a.push(t+e.bots*n+" Bots"),e.hedons&&a.push(t+e.hedons*n+" Hedons"),e.tortrons&&a.push(t+e.tortrons*n+" Antihedons"),a.join(" ")}var wn={cost:{emptyHex:{build:{house:{energy:1,bots:3},farm:{energy:1,bots:3},theater:{energy:1,bots:4},hospital:{energy:1,bots:4},church:{energy:1,bots:4},courthouse:{energy:999,bots:999},park:{energy:1,bots:4},nature:{energy:1,bots:4}}},hex:{beam:{energy:3},upgrade:{energy:1,bots:4}},bean_brain:{brainwash_ideal:{sanity:4},brainimplant_secondary:{sanity:1},brainwash_secondary:{sanity:2}},bean:{scan:{energy:1},abduct:{bots:3},gift:{},empower:{},vaporize:{energy:2,bots:4},siphon:{}},market:{scrubHedons:{energy:5},resource:{bots:{hedons:6},energy:{hedons:5}},beliefs:{common:{},uncommon:{},rare:{}}}},bean_life:{vital_thresh:{food:{warning:.6,sufficient:1,abundant:3},shelter:{warning:2,sufficient:3,abundant:7},medicine:{warning:.6,sufficient:1,abundant:3},fun:{warning:.1,sufficient:1,abundant:3}},degrade_per_tick:{food:1/24,health:1/40,stamina:1/8,fun:1/40},penalty:{homeless_health:1/56,starving_health:1/56},death_chance:{starvation:1/8,sickness:1/8,exposure:1/8,vaporization:1}},report_card_progression:[]};var xn=Object(Et.b)({name:"world",initialState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"abcdef";return{buildings:{byID:{},allIDs:[],hxPosition:{},nextID:0},enterprises:{byID:{},allIDs:[],hxPosition:{},nextID:0},cities:Xt([Ce()]),beans:{byID:{},allIDs:[],hxPosition:{},nextID:0},ufos:{byID:{},allIDs:[],hxPosition:{},nextID:0},events:{byID:{},allIDs:[],hxPosition:{},nextID:0},pickups:{byID:{},allIDs:[],hxPosition:{},nextID:0},economy:{unfulfilledMonthlyDemand:{food:0,shelter:0,medicine:0,fun:0},monthlyDemand:{food:0,shelter:0,medicine:0,fun:0},monthlySupply:{food:0,shelter:0,medicine:0,fun:0},market:{listings:{food:[],fun:[],medicine:[],shelter:[]}}},law:{cash:0,lawTree:{},laws:[],ticksSinceLastSale:0},date:{year:1,season:Zt.Spring,day:1,hour:1},marketTraitsForSale:[],alien:{scanned_bean:{},seenBeliefs:{},beliefInventory:[],speechcrimes:{},abductedBeanKeys:[],energy:{amount:16,income:2/30},bots:{amount:10,income:2/30},hedons:{amount:0,income:0},next_grade:{year:1,season:3,day:1,hour:0},difficulty:Object(A.a)({},wn),goals:["found_utopia","build_house_n_farm","beam_3","scan","brainwash","set_policy","c+_grade"],goalProgress:{},pastReportCards:[],workingReportCard:{Happiness:"D",Prosperity:"D",Stability:"D",Dogma:"D"},techProgress:{},currentlyResearchingTech:void 0},spotlightEvent:void 0,saveSlot:1,seed:e}}(),reducers:{refreshMarket:function(e){},magnetChange:function(e,t){e.cities.byID[t.payload.cityKey].pickupMagnetPoint=t.payload.px},worldTick:function(e){gn(e)},newGame:function(e,t){var n,a=e.cities.byID[0];e.seed=t.payload.seed,a.name=(n=e.seed,"".concat(we(n,De)).concat(we(n,je)).concat(we(n,Ke))),Ot(e,a,"courthouse",{q:0,r:0},e.economy),Ot(e,a,"nature",a.hexes[Ee(e.seed,15,20)],e.economy),Ot(e,a,"nature",a.hexes[Ee(e.seed,21,25)],e.economy),Ot(e,a,"nature",a.hexes[Ee(e.seed,26,60)],e.economy)},loadGame:function(e,t){return t.payload.newState.beans.allIDs.map((function(e){var n,a,r=t.payload.newState.beans.byID[e];r&&v.Get("bean",e).publish({point:{x:(null===(n=r.lastPoint)||void 0===n?void 0:n.x)||0,y:(null===(a=r.lastPoint)||void 0===a?void 0:a.y)||0},velocity:{x:0,y:0}})})),t.payload.newState},build:function(e,t){var n=e.alien.difficulty.cost.emptyHex.build[t.payload.what];if(vt(e.alien,n))switch(Ot(e,e.cities.byID[t.payload.city],t.payload.what,t.payload.where,e.economy),t.payload.what){case"farm":pn.play("moo");break;case"hospital":pn.play("pills");break;case"house":pn.play("door")}},changeEnterprise:function(e,t){e.enterprises.byID[t.payload.enterpriseKey].enterpriseType=t.payload.newType},fireBean:function(e,t){var n=e.beans.byID[t.payload.beanKey];if(n.employerEnterpriseKey){var a=e.buildings.byID[n.employerEnterpriseKey],r=e.enterprises.byID[n.employerEnterpriseKey];r.ownerBeanKey==n.key&&(r.ownerBeanKey=a.jobs.find((function(e){return e!=n.key}))),_t(a,n)}},upgrade:function(e,t){var n=e.alien.difficulty.cost.hex.upgrade,a=e.buildings.byID[t.payload.buildingKey];vt(e.alien,n)&&(a.upgraded=!0)},beam:function(e,t){var n=e.alien.difficulty.cost.hex.beam;if(bt(e.alien,n)){gt(e.alien,n);var a={key:e.ufos.nextID++,action:"beam-in",duration:0,point:Object(A.a)({},t.payload.where),cityKey:t.payload.cityKey};e.ufos.allIDs.push(a.key),e.ufos.byID[a.key]=a,e.cities.byID[t.payload.cityKey].ufoKeys.push(a.key)}},remove_ufo:function(e,t){var n=e.ufos.byID[t.payload.ufoKey],a=Ie(e,e.cities.byID[0],void 0,n.point);a.priorities=zt(a,e.seed,e.cities.byID[a.cityKey],e.alien.difficulty),delete e.ufos.byID[t.payload.ufoKey],e.ufos.allIDs=e.ufos.allIDs.filter((function(e){return e!=t.payload.ufoKey})),e.cities.byID[n.cityKey].ufoKeys=e.cities.byID[n.cityKey].ufoKeys.filter((function(e){return e!=t.payload.ufoKey})),e.beans.byID[a.key]=a,e.beans.allIDs.push(a.key),e.cities.byID[n.cityKey].beanKeys.push(a.key),v.Get("bean",a.key).current={point:ce(e.cities.byID[n.cityKey].hex_size,e.cities.byID[n.cityKey].petriOrigin,n.point),velocity:{x:0,y:0}}},abduct:function(e,t){if(vt(e.alien,e.alien.difficulty.cost.bean.abduct)){var n=e.beans.byID[t.payload.beanKey];if("alive"===n.lifecycle){if(n.lifecycle="abducted",n.employerEnterpriseKey)_t(e.buildings.byID[n.employerEnterpriseKey],n);e.cities.byID[n.cityKey].beanKeys=e.cities.byID[n.cityKey].beanKeys.filter((function(e){return e!=n.key})),e.alien.abductedBeanKeys.push(n.key)}}},cheatAdd:function(e){e.alien.energy.amount+=10,e.alien.bots.amount+=10,e.alien.hedons.amount+=10},release:function(e){if(e.alien.abductedBeanKeys.length>0){var t=e.alien.abductedBeanKeys.shift();if(null!=t){var n=e.beans.byID[t];n.lifecycle="alive",e.cities.byID[n.cityKey].beanKeys.push(t)}}},washCommunity:function(e,t){},washMotive:function(){},washNarrative:function(e,t){var n=e.beans.byID[t.payload.beanKey];if(it(n,e.alien.difficulty.cost.bean_brain.brainwash_ideal,0)){nt(n,e.alien.difficulty.cost.bean_brain.brainwash_ideal.sanity||0);for(var a=n.faith;n.faith===a;)n.faith=we(e.seed,["rocket","dragon","music","noFaith"])}},washBelief:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=ft(e.alien.techProgress,"sanity_bonus")?-1:0;if(it(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary,a)){nt(n,e.alien.difficulty.cost.bean_brain.brainwash_secondary.sanity||0),n.beliefs.splice(n.beliefs.indexOf(t.payload.trait),1);var r=e.alien.beliefInventory.find((function(e){return e.trait===t.payload.trait})),i=ft(e.alien.techProgress,"neural_duplicator")?1:0;r?r.charges+=2+i:e.alien.beliefInventory.push({trait:t.payload.trait,charges:2+i}),pn.play("wash_out")}},setResearch:function(e,t){e.alien.currentlyResearchingTech=t.payload.t},implant:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=ft(e.alien.techProgress,"sanity_bonus")?-1:0;it(n,e.alien.difficulty.cost.bean_brain.brainimplant_secondary,a)&&e.alien.beliefInventory.filter((function(e){return e.trait==t.payload.trait&&e.charges>0}))&&(n.beliefs.push(t.payload.trait),function(e,t){var n=e.beliefInventory,a=n.find((function(e){return e.trait===t}));a&&(a.charges-=1,e.beliefInventory=Object(y.a)(n.filter((function(e){return e.charges>0}))))}(e.alien,t.payload.trait),pn.play("wash_in"),nt(n,e.alien.difficulty.cost.bean_brain.brainimplant_secondary.sanity||0))},scan:function(e,t){var n=e.beans.byID[t.payload.beanKey];vt(e.alien,e.alien.difficulty.cost.bean.scan)&&(e.alien.scanned_bean[n.key]=!0,n.beliefs.forEach((function(t){e.alien.seenBeliefs[t]||(e.alien.seenBeliefs[t]=!0,ct.newTraitSeen.publish({k:H[t].noun,v:!0}))})),pn.play("scan"))},vaporize:function(e,t){if(vt(e.alien,e.alien.difficulty.cost.bean.vaporize)){var n=tt(e.beans.byID[t.payload.beanKey],e.seed,"vaporization");Yt(e.events,n.death),n.emotes.map((function(t){return Yt(e.pickups,t)}))}},pickUpPickup:function(e,t){var n=e.pickups.byID[t.payload.pickupKey],a=_[n.type];e.alien.hedons.amount+=a,e.cities.byID[t.payload.cityKey].pickupKeys=e.cities.byID[t.payload.cityKey].pickupKeys.filter((function(e){return e!=t.payload.pickupKey})),e.pickups.allIDs=e.pickups.allIDs.filter((function(e){return e!=t.payload.pickupKey})),delete e.pickups.byID[t.payload.pickupKey],ct.alienHedons.publish({change:a}),pn.play(n.type)},changeState:function(e,t){var n,a=e.beans.byID[t.payload.beanKey].action,r=e.beans.byID[t.payload.beanKey],i=Jt.Get("bean",r.key);"chat"===a&&(r.lastChatMS=Date.now()),"idle"===t.payload.newState.act&&(r.priorities=zt(r,e.seed,e.cities.byID[r.cityKey],e.alien.difficulty)),r.activity_duration[a]+=i.elapsed,r.action=t.payload.newState.act,r.actionData=t.payload.newState;var l=null===(n=v.Get("bean",r.key).current)||void 0===n?void 0:n.point;l&&(r.lastPoint=Object(A.a)({},l)),i.elapsed=0},beanHitDestination:function(e,t){var n=e.beans.byID[t.payload.beanKey];null!=n.actionData.destinationIndex&&n.actionData.destinationIndex++},beanBePersuaded:function(e,t){var n=e.beans.byID[t.payload.beanKey];n.beliefs.push(t.payload.belief),En(e,{key:0,icon:"\ud83d\udde3\ufe0f",trigger:"persuasion",message:"".concat(n.name," now believes in ").concat(H[t.payload.belief].icon," ").concat(H[t.payload.belief].noun,"!"),beanKey:n.key,cityKey:n.cityKey,point:n.lastPoint}),pn.play("mhmm")},beanGiveCharity:function(e,t){var n=e.beans.byID[t.payload.senderBeanKey];n.cash-=.5,Sn(n,e,{emote:"happiness",source:"Charity"});var a=e.beans.byID[t.payload.needyBeanKey];a.cash+=.5,Sn(a,e,{emote:"happiness",source:"Charity"})},beanWork:function(e,t){var n,a=e.beans.byID[t.payload.beanKey];if("jobless"===a.job);else{switch(a.job){case"farmer":a.discrete_food=Math.min(a.discrete_food+1,2*K.sufficient),Nn(e,a,"Parochialism","happiness",.25);break;case"doc":a.discrete_health=Math.min(a.discrete_health+1,2*C.sufficient),Nn(e,a,"Germophobia","unhappiness",.25);break;case"builder":a.stamina="awake",a.discrete_stamina=7;break;case"entertainer":Nn(e,a,"Cosmopolitanism","happiness",.25)}if(Nn(e,a,"Diligence","happiness",.25),Nn(e,a,"Hedonism","unhappiness",.15),a.ticksSinceLastSale++,a.ticksSinceLastSale>8&&null!=a.employerEnterpriseKey)if(e.enterprises.byID[a.employerEnterpriseKey].ownerBeanKey!=a.key&&Math.random()>.5){var r=(n=e.economy,Ge.reduce((function(e,t){return n.unfulfilledMonthlyDemand[t]>e.max&&(e.max=n.unfulfilledMonthlyDemand[t],e.job=function(e){switch(e){case"shelter":return"builder";case"medicine":return"doc";case"fun":return"entertainer";default:case"food":return"farmer"}}(t)),e}),{max:0,job:null}).job);r&&(_t(e.buildings.byID[a.employerEnterpriseKey],a),function(e,t,n){if("jobless"===n)return!1;for(var a=e.cities.byID[t.cityKey].buildingKeys.map((function(t){return e.buildings.byID[t]})).filter((function(e){return e.type===he[n]})),r=0;r<a.length;r++){var i=a[r];if(Mt(i).length>0)return $t(t,i,e.enterprises.byID[i.key]),!0}}(e,a,r))}var i=!1;if(a.employerEnterpriseKey){var l=e.enterprises.byID[a.employerEnterpriseKey];if(l)switch(function(e,t,n,a,r){e.monthlySupply[n]+=a;var i=e.market.listings[n].find((function(e){return e.sellerEnterpriseKey==t.key}));i?(i.quantity+=a,i.price=r,i.quantity=Math.min(i.quantity,20)):e.market.listings[n].push({sellerEnterpriseKey:t.key,price:r,quantity:a}),e.market.listings[n].sort((function(e,t){return e.price-t.price}))}(e.economy,l,I(a.job),4,a.fairGoodPrice),i=!0,l.enterpriseType){case"company":Nn(e,a,"Communism","unhappiness",.1),l.ownerBeanKey===a.key&&Nn(e,a,"Capitalism","happiness",.1);break;case"co-op":Nn(e,a,"Capitalism","unhappiness",.1),Nn(e,a,"Socialism","happiness",.1);break;case"commune":Nn(e,a,"Capitalism","unhappiness",.1)}}i||function(e,t,n,a,r){e.monthlySupply[n]+=a;var i=e.market.listings[n].find((function(e){return e.sellerBeanKey==t.key}));i?(i.quantity+=a,i.price=r,i.quantity=Math.min(i.quantity,20)):e.market.listings[n].push({sellerBeanKey:t.key,sellerCityKey:t.cityKey,price:r,quantity:a}),e.market.listings[n].sort((function(e,t){return e.price-t.price}))}(e.economy,a,I(a.job),4,a.fairGoodPrice)}},beanEmote:function(e,t){var n=e.beans.byID[t.payload.beanKey];Sn(n,e,t.payload),Ze(n,"Hedonism")&&("happiness"===t.payload.emote||"love"===t.payload.emote)&&Math.random()<.1&&Sn(n,e,{emote:"happiness",source:"Hedonism"})},beanCrime:function(e,t){var n=e.beans.byID[t.payload.beanKey],a=we(e.seed,e.economy.market.listings[t.payload.good]);if(null==a);else{var r=Math.min(a.quantity,3);if(qe(e.economy.market,a,t.payload.good,r),null!=r)switch(t.payload.good){case"food":n.discrete_food+=r;break;case"medicine":n.discrete_health+=r}}},beanRelax:function(e,t){var n=e.beans.byID[t.payload.beanKey];n.discrete_fun+=1,Sn(n,e,{emote:"happiness",source:"Relaxation"}),Ze(n,"Naturalism")&&Sn(n,e,{emote:"happiness",source:"Naturalism"})},enactLaw:function(e,t){var n=Be[t.payload.lawKey];e.law.lawTree[n.axis]=n},repealLaw:function(e,t){var n=Be[t.payload.lawKey];delete e.law.lawTree[n.axis]},buyBots:function(e,t){var n=e.alien.difficulty.cost.market.resource.bots;vt(e.alien,n,t.payload.amount)&&(e.alien.bots.amount+=t.payload.amount)},buyEnergy:function(e,t){var n=e.alien.difficulty.cost.market.resource.bots;vt(e.alien,n,t.payload.amount)&&(e.alien.energy.amount+=t.payload.amount)},scrubHedons:function(e){var t=e.alien.difficulty.cost.market.scrubHedons;if(vt(e.alien,t)){e.alien.hedons.amount;e.alien.hedons.amount=0}},buyTrait:function(e,t){if(vt(e.alien,t.payload.l.cost)){var n=e.alien.beliefInventory.find((function(e){return e.trait===t.payload.l.trait}));n?n.charges+=3:e.alien.beliefInventory.push({trait:t.payload.l.trait,charges:3})}},beanBuy:function(e,t){var n,a,r,i,l,c=e.beans.byID[t.payload.beanKey],o=function(t){return null!=t.sellerEnterpriseKey?e.enterprises.byID[t.sellerEnterpriseKey]:t.sellerBeanKey?e.beans.byID[t.sellerBeanKey]:e.law};switch(t.payload.good){case"food":(null===(n=l=Re(e.economy,e.law,c,"food",o,.5,3))||void 0===n?void 0:n.bought)&&(c.discrete_food+=l.bought,"stuffed"===c.food&&(Sn(c,e,{emote:"happiness",source:"Stuffed"}),Nn(e,c,"Gluttony","happiness",1)));break;case"shelter":(null===(a=l=Re(e.economy,e.law,c,"shelter",o))||void 0===a?void 0:a.bought)?(c.discrete_stamina=10,c.stamina="awake"):c.discrete_stamina<=0&&(c.stamina="homeless");break;case"medicine":(null===(r=l=Re(e.economy,e.law,c,"medicine",o,.5,3))||void 0===r?void 0:r.bought)&&(c.discrete_health+=l.bought,"fresh"===c.health&&Sn(c,e,{emote:"happiness",source:"Robust"}));break;case"fun":(null===(i=l=Re(e.economy,e.law,c,"fun",o))||void 0===i?void 0:i.bought)&&(c.discrete_fun=1,Sn(c,e,{emote:"happiness",source:"Entertainment"}),Sn(c,e,{emote:"happiness",source:"Entertainment"}))}c.actionData.buyAttempts=(c.actionData.buyAttempts||0)+1,l&&(l.tax&&(Nn(e,c,"Libertarianism","unhappiness",.1),Nn(e,c,"Progressivism","happiness",.1)),c.actionData.buyReceipt=l)}}});function Nn(e,t,n,a,r){Ze(t,n)&&Math.random()<r&&Sn(t,e,{emote:a,source:n})}function Sn(e,t,n){e.discrete_sanity=R(e.discrete_sanity+B[n.emote],0,10),e.hedonHistory[0][n.source]=(e.hedonHistory[0][n.source]||0)+_[n.emote];var a=v.Get("bean",e.key).current||X,r={key:t.pickups.nextID++,point:{x:a.point.x,y:a.point.y},type:n.emote,velocity:{x:0,y:0}};t.cities.byID[e.cityKey].pickupKeys.push(r.key),t.pickups.byID[r.key]=r,t.pickups.allIDs.push(r.key),v.Get("pickup",r.key).publish({point:{x:a.point.x,y:a.point.y},velocity:{x:0,y:0}})}var Dn=xn.actions,jn=(Dn.refreshMarket,Dn.magnetChange),Kn=Dn.worldTick,Cn=Dn.remove_ufo,In=Dn.newGame,Mn=Dn.loadGame,On=Dn.build,_n=Dn.changeEnterprise,Bn=Dn.fireBean,An=Dn.upgrade,Pn=Dn.beam,Tn=Dn.abduct,Gn=Dn.release,Hn=Dn.scan,Fn=Dn.vaporize,qn=Dn.pickUpPickup,Rn=Dn.implant,Ln=Dn.washBelief,zn=Dn.washNarrative,Wn=(Dn.washCommunity,Dn.washMotive,Dn.changeState),Un=Dn.beanEmote,Jn=(Dn.beanGiveCharity,Dn.beanHitDestination),Vn=Dn.beanWork,$n=Dn.beanRelax,Xn=Dn.beanBuy,Yn=Dn.beanCrime,Zn=Dn.beanBePersuaded,Qn=Dn.cheatAdd,ea=Dn.enactLaw,ta=Dn.repealLaw,na=Dn.setResearch,aa=Dn.buyBots,ra=Dn.buyEnergy,ia=Dn.buyTrait,la=Dn.scrubHedons,ca=function(e,t){return e.cities.byID[t].beanKeys},oa=Object(kt.a)(ca,(function(e){return e.beans.byID}),(function(e,t){return e.reduce((function(e,n){return e.push(t[n]),e}),[])})),sa=(Object(kt.a)(oa,(function(e){var t=e.reduce((function(e,t){switch(t.ethnicity){case"circle":e.circle++;break;case"square":e.square++;break;case"triangle":e.triangle++}return e}),{circle:0,square:0,triangle:0});return t.circle>t.square&&t.circle>t.triangle?"circle":t.square>t.circle&&t.square>t.triangle?"square":"triangle"})),xn.reducer,function(){return Object(d.b)()}),ua=d.c,da=Object(Et.b)({name:"selected",initialState:{selectedHexKey:void 0,selectedCityKey:void 0,selectedBeanKey:void 0},reducers:{doSelectCity:function(e,t){return{selectedHexKey:void 0,selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:void 0}},doSelectHex:function(e,t){return{selectedHexKey:"".concat(t.payload.hex.q,",").concat(t.payload.hex.r),selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:void 0}},doSelectBuilding:function(e,t){return{selectedHexKey:"".concat(t.payload.hex.q,",").concat(t.payload.hex.r),selectedCityKey:t.payload.cityKey,selectedBeanKey:void 0,selectedBuildingKey:t.payload.buildingKey}},doSelectBean:function(e,t){return{selectedHexKey:void 0,selectedCityKey:t.payload.cityKey,selectedBeanKey:t.payload.beanKey,selectedBuildingKey:void 0}},doSelectNone:function(e){return{selectedBeanKey:void 0,selectedCityKey:void 0,selectedHexKey:void 0,selectedBuildingKey:void 0}}}}),ma=da.actions,ya=ma.doSelectHex,pa=ma.doSelectNone,ha=ma.doSelectBean,fa=ma.doSelectCity,ba=ma.doSelectBuilding,va=Object(Et.a)({reducer:{world:xn.reducer,selected:da.reducer},middleware:Object(Et.c)().concat([function(e){return function(e){return function(t){switch(t.type){case"world/magnetChange":break;default:t.type.startsWith("selected")||b.Dirty.publish(!0)}return e(t)}}}])}),ga=function(e){return null!=e.selected.selectedCityKey?e.world.cities.byID[e.selected.selectedCityKey]:void 0},Ea=function(e){return null!=e.selected.selectedBeanKey?e.world.beans.byID[e.selected.selectedBeanKey]:void 0},ka=function(e){var t=null!=e.selected.selectedCityKey&&e.world.cities.byID[e.selected.selectedCityKey];if(t&&null!=e.selected.selectedHexKey){var n=t.buildingMap[e.selected.selectedHexKey];return e.world.buildings.byID[n]}},wa=function(e){return e.world.events.allIDs.map((function(t){return e.world.events.byID[t]}))},xa=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={confirming:!1},a}return Object(o.a)(n,[{key:"click",value:function(){this.state.confirming?(this.props.onConfirm(),this.setState({confirming:!1})):this.setState({confirming:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:this.props.className,onClick:function(){return e.click()},disabled:this.props.disabled},this.state.confirming?this.props.confirmText:this.props.children)}}]),n}(r.a.Component),Na=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.props.onChange(e.target.value),a.setState({key:e.target.value})},a.state={key:e.value||null},a}return Object(o.a)(n,[{key:"hint",value:function(){if(this.props.hint)return r.a.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},this.props.hint)}},{key:"getTextForOption",value:function(e){return this.props.titleCase&&(e=e[0].toUpperCase()+e.slice(1)),e}},{key:"options",value:function(){var e=this;return this.props.options.map((function(t){return r.a.createElement("option",{value:t,key:t,title:e.getTitleForOption(t)},e.getTextForOption(t))}))}},{key:"render",value:function(){return r.a.createElement("select",{onChange:this.onChange,value:this.state.key,required:null!=this.props.hint},this.hint(),this.options())}},{key:"getTitleForOption",value:function(e){}}]),n}(r.a.Component),Sa=(n(32),function(e){return r.a.createElement("div",{className:"belief"},r.a.createElement("div",{className:"horizontal badger"},r.a.createElement("div",{className:"vertical"},r.a.createElement("div",{className:"circular"},e.data.icon),e.leftButton),r.a.createElement("div",{className:"vertical"},r.a.createElement("div",{className:"text-center"},e.titleView,e.cost?r.a.createElement("span",{className:"pull-r"},e.cost,"\ud83e\udde0"):null),e.data.description?e.data.description.split(";").map((function(e,t){return r.a.createElement("small",{className:"marg-b-6",key:t}," ",e)})):null,r.a.createElement("div",{className:"grow-1 text-center"},e.bottomView))))}),Da=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"belief"},r.a.createElement("div",{className:"horizontal badger"},r.a.createElement("div",{className:"vertical"},r.a.createElement("div",{className:"circular"},this.props.data.icon),this.props.frozen?null:r.a.createElement(xa,{className:"callout pad-4 marg-0",confirmText:"-"+this.props.cost.toString()+"\ud83e\udde0?",disabled:this.props.available<this.props.cost,onConfirm:this.props.wash},"\ud83d\udebf ",r.a.createElement("small",null,"Wash"))),r.a.createElement("div",{className:"vertical"},r.a.createElement("div",{className:"text-center"},r.a.createElement("strong",{title:this.props.data.description,className:this.props.divergent?"divergent marg-r-6":"marg-r-6"},this.props.data.noun),r.a.createElement("span",{className:"pull-r"},this.props.cost,"\ud83e\udde0")),r.a.createElement("small",{className:"marg-b-6"},this.props.data.description),r.a.createElement("div",{className:"grow-1 text-center"}))))}}]),n}(r.a.Component),ja=F.slice().sort((function(e,t){return e.localeCompare(t)})),Ka=(r.a.Component,n(33),function(e){var t=ua((function(e){return e.world.alien.beliefInventory})),n=sa();return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement(Sa,{key:t.trait,data:H[t.trait],titleView:r.a.createElement("strong",null,H[t.trait].noun),leftButton:r.a.createElement(xa,{onConfirm:function(){return n(Rn({beanKey:e.beanKey,trait:t.trait}))},className:"callout marg-0",confirmText:"-1 \ud83e\udde0?",disabled:t.charges<1||e.dogmatic},"Implant"),bottomView:r.a.createElement("span",null,t.charges," \ud83e\udde0")})})))}),Ca=function(){var e=ua(Ea),t=ua((function(t){return null!=(null===e||void 0===e?void 0:e.key)&&t.world.alien.scanned_bean[e.key]})),n=ua((function(e){return e.world.alien.difficulty})),a=ua((function(e){return e.world.alien.techProgress})),i=sa(),l=ft(a,"sanity_bonus")?-1:0;if(null==e)return r.a.createElement("div",null);var c=Ze(e,"Dogmatism");return r.a.createElement("div",null,r.a.createElement("div",{className:"horizontal fancy-header"},r.a.createElement("div",null,"BRAIN"),r.a.createElement("div",{className:"emoji-3"},"\ud83e\udde0\ud83d\udebf"),r.a.createElement("div",null,"WASH")),r.a.createElement("div",null,r.a.createElement("p",{className:"pad-4p"},r.a.createElement("strong",null,e.name)," has ",e.discrete_sanity.toFixed(0)," sanity \ud83e\udde0.","stressed"===e.sanity||"disturbed"===e.sanity?r.a.createElement("small",{className:"pull-r"},"(Low sanity \ud83e\udde0 causes ",O.unhappiness,"; Negative sanity \ud83e\udde0 causes extremely negative traits)"):null),c?r.a.createElement("div",{className:"text-center"},"\ud83d\udc36 Dogmatic subjects cannot change their minds"):null,t?r.a.createElement("div",{className:"horizontal scroll"},r.a.createElement(Da,{available:e.discrete_sanity,frozen:c,wash:function(){return i(zn({beanKey:e.key,faith:e.faith}))},cost:n.cost.bean_brain.brainwash_ideal.sanity||0,data:G[e.faith]}),e.beliefs.map((function(t){return r.a.createElement(Da,{key:t,available:e.discrete_sanity,frozen:c&&"Dogmatism"!=t,divergent:!1,wash:function(){return i(Ln({beanKey:e.key,trait:t}))},cost:(n.cost.bean_brain.brainwash_secondary.sanity||0)+l,data:H[t]})}))):r.a.createElement("div",{className:"text-center"},"\ud83d\udef0\ufe0f Scan this subject to reveal its Traits! "),r.a.createElement("h3",{className:"pad-4p"},"\ud83e\udde0 Trait Inventory"),r.a.createElement("div",{className:"horizontal scroll"},r.a.createElement(Ka,{beanKey:e.key,dogmatic:c}))))},Ia=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"pad-4p"},r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Propaganda"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){}},"\ud83c\udf99\ufe0f Buy Propaganda")),r.a.createElement("span",null,"Propaganda changes beans' feelings on a wide variety of topics."),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udcfa Broadcast Campaign"),r.a.createElement("small",null,"Approval+ Cash-"),r.a.createElement("span",{className:"p"},"Small chance to increase Approval among all beans")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udc4b Canvassing"),r.a.createElement("small",null,"Approval+ Labor-"),r.a.createElement("span",{className:"p"},"Chance to increase Approval on a few random beans")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\uddde\ufe0f Print Campaign"),r.a.createElement("small",null,"Approval+ Cash-"),r.a.createElement("span",{className:"p"},"Chance to increase Approval on wealthy beans"))),r.a.createElement("div",{className:"subheader"},r.a.createElement("h3",null,"Appearances"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){}},"\ud83d\udcac Schedule Appearance")),r.a.createElement("span",null,"Appearances have limited reach, but have powerful effects."),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83e\udd14 Debating"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Chance to gain or lose Influence")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\udcf8 Photo Op"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Increases Approval within one Social Group")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83c\udfa4 Speechmaking"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Increases chance of Donations in a single City")),r.a.createElement("button",{type:"button",className:"card button"},r.a.createElement("span",{className:"h"},"\ud83d\ude4b Town Hall"),r.a.createElement("small",null,"Labor-"),r.a.createElement("span",{className:"p"},"Suppresses negative Approval in a single city"))))}}]),n}(r.a.Component),Ma={state:"Collectivist",ego:"Independent",trad:"Elitist",prog:"Progressive",circle:"Brunette",square:"Blonde",triangle:"Redhead",rocket:"Futuristic",dragon:"Mythical",music:"Dramatic",noFaith:"Nihilistic",starving:"Starving",hungry:"Hungry",sated:"Sated",stuffed:"Stuffed",homeless:"Homeless",sleepy:"Sleepy",awake:"Awake",rested:"Rested",sick:"Sick",sickly:"Sickly",bruised:"Bruised",fresh:"Robust",sane:"Sane",stressed:"Confused",disturbed:"Disturbed",psychotic:"Psychotic",house:"House",hospital:"Hospital",farm:"Farm",theater:"Theater",church:"Church",courthouse:"Courthouse",park:"Park",nature:"Elysian Scenery"},Oa=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"header",value:function(){return this.props.children?r.a.createElement("b",null,this.props.children):null}},{key:"render",value:function(){var e=this,t=this.props.beans.filter((function(t){return e.props.need(t)==e.props.dire})).length,n={width:Math.floor(t/this.props.beans.length*100)+"%"},a=this.props.beans.filter((function(t){return e.props.need(t)==e.props.abundant})).length,i={width:Math.floor(a/this.props.beans.length*100)+"%"};return r.a.createElement("div",{className:this.props.className},this.header(),r.a.createElement("div",{className:"bar"},r.a.createElement("div",{className:"bar-inner dire",style:n},t>0?"".concat(t," ").concat(Ma[this.props.dire]):""),r.a.createElement("div",{className:"bar-inner abundant",style:i},a>0?a:"")))}}]),n}(r.a.Component);function _a(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}var Ba=function(){var e=ua((function(e){return oa(e.world,0)})),t=ua((function(e){return e.world.economy})),n=_a(e.map((function(e){return e.discrete_food}))),a=_a(e.map((function(e){return e.discrete_health}))).toFixed(1),i=_a(e.map((function(e){return e.discrete_stamina}))).toFixed(1),l=e.reduce((function(e,t){return e+t.cash}),0),c=l/(e.length||1),o=_a(e.map((function(e){return e.cash}))),s=e.filter((function(e){return e.cash<1})).length,u=Math.max(c,o),d=e.filter((function(e){return e.cash>u})),m=d.length/(e.length||1)*100,y=d.reduce((function(e,t){return e+t.cash}),0)/l*100,p=e.reduce((function(e,t){return e[t.job]=(e[t.job]||0)+1,e}),{}),h=((p.jobless||0)/e.length*100).toFixed(1);function f(e,t){return e.supply+=t.quantity,e.price+=t.price,e.count++,e.avg=e.price/e.count,e}var b=t.market.listings.food.reduce(f,{supply:0,price:0,avg:0,count:0}),v=t.market.listings.medicine.reduce(f,{supply:0,price:0,avg:0,count:0}),g=t.market.listings.shelter.reduce(f,{supply:0,price:0,avg:0,count:0});return r.a.createElement("div",null,r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h2",null,"State of the Utopia")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udf5e Food Security"),r.a.createElement(Oa,{beans:e,need:function(e){return e.food},dire:"hungry",abundant:"stuffed",className:"big"}),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Median ",n.toFixed(1)," \ud83c\udf5e"),r.a.createElement("td",{className:"text-center"},"Supply: ",b.supply," \ud83c\udf5e @ $",b.avg.toFixed(2)),r.a.createElement("td",{className:"text-right"},"Deficit: ",t.unfulfilledMonthlyDemand.food," \ud83c\udf5e"))))),r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83e\ude7a Healthcare"),r.a.createElement(Oa,{beans:e,need:function(e){return e.health},dire:"sick",abundant:"fresh",className:"big"}),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Median ",a," \ud83e\ude7a"),r.a.createElement("td",{className:"text-center"},"Supply: ",v.supply," \ud83e\ude7a @ $",v.avg.toFixed(2)),r.a.createElement("td",{className:"text-right"},"Deficit: ",t.unfulfilledMonthlyDemand.medicine," \ud83e\ude7a")))))),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83c\udfe1 Housing")," ",r.a.createElement("br",null),r.a.createElement(Oa,{beans:e,need:function(e){return e.stamina},dire:"homeless",abundant:"rested",className:"big"}),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Median ",i," \ud83c\udfe1"),r.a.createElement("td",{className:"text-center"},"Supply: ",g.supply," \ud83c\udfe1 @ $",g.avg.toFixed(2)),r.a.createElement("td",{className:"text-right"},"Deficit: ",t.unfulfilledMonthlyDemand.shelter," \ud83c\udfe1")))))),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83d\udcb0 Wealth")," ",r.a.createElement("br",null),s," penniless citizens \xa0 \xa0 Cost of Living: $",ze(t).toFixed(2)," ",r.a.createElement("br",null),r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Total $",l.toFixed(2)),r.a.createElement("td",{className:"text-center"},"Median: $",o.toFixed(2)),r.a.createElement("td",{className:"text-right"},"Avg: $",c.toFixed(2))))),"Top ",m.toFixed(1),"% of subjects own ",y.toFixed(1),"% of the wealth"),r.a.createElement("span",null,r.a.createElement("strong",null,"Unemployment")," ",h,"% (",p.jobless,")",r.a.createElement("br",null),r.a.createElement("ul",{className:"boxes"},r.a.createElement("li",null,p.farmer||0," farmers"),r.a.createElement("li",null,p.builder||0," builders"),r.a.createElement("li",null,p.doc||0," doctors"),r.a.createElement("li",null,p.entertainer||0," entertainers")))))},Aa=function(e){return r.a.createElement("div",null)},Pa=function(e){var t=ua((function(e){return e.world.law.cash}));return r.a.createElement("div",{className:"pad-4p"},r.a.createElement("div",null,r.a.createElement("strong",null,"\ud83d\udcb0 Treasury: ",t.toFixed(2))))},Ta=function(e){var t=Object(a.useState)("Welfare"),n=Object(Ct.a)(t,2),i=n[0],l=n[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("h2",{className:"marg-b-0"},"Utopia Government"),r.a.createElement("div",null,r.a.createElement("div",{className:"horizontal blue-orange cylinder f-size-125em marg-t-20"},r.a.createElement("button",{type:"button",onClick:function(){return l("Welfare")},className:"Welfare"===i?"active":""},"\ud83e\udd32 Welfare"),r.a.createElement("button",{type:"button",onClick:function(){return l("Crime")},className:"Crime"===i?"active":""},"\ud83d\udea8 Crime"),r.a.createElement("button",{type:"button",onClick:function(){return l("Taxation")},className:"Taxation"===i?"active":""},"\ud83d\udcb0 Taxes"),r.a.createElement("button",{type:"button",onClick:function(){return l("funds")},className:"funds"===i?"active":""},"\ud83d\udcb8 Funds")))),"funds"===i?r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement(Pa,null)),r.a.createElement("div",null)):r.a.createElement(Ga,{group:i}))},Ga=function(e){var t=Object.values(Be).filter((function(t){return t.group===e.group})),n=ua((function(e){return e.world.alien.seenBeliefs})),a=ua((function(e){return e.world.alien.beliefInventory})),i=ua((function(e){return e.world.law})),l=sa();return r.a.createElement("div",{className:"pad-4p"},r.a.createElement("strong",null,e.group," Laws"),r.a.createElement("div",{className:"horizontal scroll"},t.map((function(e){return r.a.createElement(Ha,{seenBeliefs:n,id:e.key,beliefs:a,key:e.key,enacted:Ae(i,e.key),enactLaw:function(e){return l(ea({lawKey:e}))},revokeLaw:function(e){return l(ta({lawKey:e}))}})}))))},Ha=function(e){var t,n,a=Be[e.id],i=(t=a.prereqs,n=e.seenBeliefs,0===t.length||t.some((function(e){return Me(e,n)}))),l=function(e,t){return 0===e.length||e.every((function(e){return Me(e,t)}))}(a.prereqs,e.seenBeliefs);return r.a.createElement("div",{className:"vertical law-formula"},r.a.createElement("div",{className:"horizontal"},r.a.createElement("div",{className:"circular"},i?a.icon:"\u2754"),r.a.createElement("div",null,r.a.createElement("strong",null,i?a.name:"Unknown"),r.a.createElement("div",null,i?r.a.createElement("small",null," ",a.description," "):null))),r.a.createElement("div",{className:"vertical"},a.prereqs.map((function(t){var n,a=Me(t,e.seenBeliefs),i=(n=t,Array.isArray(n)?n.join("/"):n);return a?r.a.createElement("span",{className:"law-formula-ingredient",key:i},function(e){return Array.isArray(e)?e.map((function(e){return _e(e)})).join(" / "):_e(e)}(t)):r.a.createElement("span",{className:"law-formula-ingredient unknown",key:i},"\u2754 Unknown")}))),e.enacted?r.a.createElement("button",{className:"callout",onClick:function(){return e.revokeLaw(e.id)}},"\ud83d\uddd1\ufe0f\xa0Revoke Active Law"):r.a.createElement("button",{className:"callout",disabled:!l,onClick:function(){return e.enactLaw(e.id)}},l?"\u2712\ufe0f":r.a.createElement("span",{className:"grey"},"\ud83d\udd12"),"\xa0Enact"),e.children)},Fa=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h3",null,"Welcome to the"),r.a.createElement("h2",null,"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Laboratory"),r.a.createElement("div",null,"Thank you for joining the ",r.a.createElement("select",null,r.a.createElement("option",null,"Human"))," Cultivation Division of the ",r.a.createElement("strong",null,"\ud83c\udf0c\xa0Galactic Xenosensation Federation!")," Interdimensional petri dish ",r.a.createElement("span",{style:{whiteSpace:"nowrap"}},"#",r.a.createElement("input",{type:"text",value:e.seed,onChange:function(t){return e.changeSeed(t.currentTarget.value)},maxLength:19,style:{width:"115px",fontFamily:"monospace",fontSize:"11px"}}))," is ready for farming."),r.a.createElement("p",null,"As a ",r.a.createElement("select",null,r.a.createElement("option",null,"Human Emotion Farmer")),", you are required to execute the following duties:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Construct ",r.a.createElement("strong",null,"\ud83c\udfe0 Buildings")," for your ",r.a.createElement("select",null,r.a.createElement("option",null,"Human"))," subjects."),r.a.createElement("li",null,r.a.createElement("strong",null,"\ud83d\udef8 Beam In")," ",r.a.createElement("select",null,r.a.createElement("option",null,"Human"))," subjects for cultivation."),r.a.createElement("li",null,"Harvest your subject's positive ",r.a.createElement("strong",null,O.happiness," Hedons"),"."),r.a.createElement("li",null,"Sell the Hedons on the ",r.a.createElement("br",null),r.a.createElement("strong",null,"\ud83c\udf0c Galactic \ud83d\ude28 Emotion \ud83d\udcb0 Market"),".")),r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("p",null,"The GXF's records indicate ",r.a.createElement("select",null,r.a.createElement("option",null,"Humans"))," are a",r.a.createElement("br",null),r.a.createElement("u",null,"mentally malleable")," and ",r.a.createElement("u",null,"physically fragile")," species. Try the following cultivation methods:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",null,"\ud83d\udef0\ufe0f Scan")," your subject's primitive minds for information on what pleases them."),r.a.createElement("li",null,r.a.createElement("strong",null,"\ud83d\udebf Brainwash")," subjects to change their ",r.a.createElement("strong",null,"\ud83e\udde0\xa0Traits"),". Try to add Traits that emit more ",r.a.createElement("strong",null,O.happiness,"\xa0Hedons"),"."),r.a.createElement("li",null,"Avoid letting your subjects die or endure pain; this makes ",r.a.createElement("strong",null,O.unhappiness,"\xa0Antihedons")," which are less profitable."),r.a.createElement("li",null,"Use your knowledge of Traits to modify the farm's ",r.a.createElement("strong",null,"\ud83d\uddf3\ufe0f\xa0Government")," to maximize Hedon generation."),r.a.createElement("li",null,"Use the GXF's ",r.a.createElement("strong",null,"\ud83e\uddea Research Lab")," to upgrade your farm, when stocked with ",r.a.createElement("strong",null,"\ud83d\udc7e Abducted")," subjects.")),r.a.createElement("h3",null,"\ud83c\udf0c Galactic Xenosensation Federation ",r.a.createElement("br",null),r.a.createElement("div",{className:"text-right"},r.a.createElement("small",null,r.a.createElement("i",null,"1 trillion sensations. 100% organic. 100% gourmet.")))))))},qa=function(e){return r.a.createElement("div",null)},Ra=function(e){var t=Object(a.useState)("main"),n=Object(Ct.a)(t,2),i=n[0],l=n[1],c=b.HasContinueGame(),o=b.GetGameSlots();return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center"},"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Lab"),"main"===i?r.a.createElement("div",null,null!=c?r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return e.loadGame(c)}},"\ud83e\uddeb Continue Game")):null,r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return e.startGame()}},"\ud83d\udef8 Start New Game")),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"callout button f-size-15em",onClick:function(){return l("showslots")},disabled:o.every((function(e){return null==e.brief}))},"\ud83d\uddc2\ufe0f Load Game"))):r.a.createElement("div",{className:"card-parent vertical load-menu pad-4p"},o.map((function(t){return r.a.createElement("div",{key:t.id,className:"card marg-b-20"},r.a.createElement("button",{disabled:null==t.brief,className:"",onClick:function(){t.brief&&e.loadGame(t.id)}},t.brief?r.a.createElement("span",{className:"f-size-125em"},r.a.createElement("strong",null,t.brief.Name),"\xa0",r.a.createElement("span",null,"Year ",t.brief.Age.year),"\xa0",r.a.createElement("span",null,t.brief.Population," \ud83d\ude10")):r.a.createElement("span",{className:"f-size-125em"},"Slot ",t.id)))}))))},La=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("svg",{width:"100",height:"300",xmlns:"http://www.w3.org/2000/svg",style:{},className:this.props.classN+" robot-arm"},r.a.createElement("g",null,r.a.createElement("title",null,"robotarm"),r.a.createElement("rect",{fill:"transparent",id:"canvas_background",height:"302",width:"102",y:"-1",x:"-1"}),r.a.createElement("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid"},r.a.createElement("rect",{fill:"url(#gridpattern)",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"}))),r.a.createElement("g",null,r.a.createElement("title",null,"Layer 1"),r.a.createElement("rect",{id:"svg_2",height:"200",width:"48",y:"91.63545",x:"25",strokeWidth:"1.5",stroke:"#000",fill:"#BBBBBB"}),r.a.createElement("ellipse",{ry:"48",rx:"48",id:"svg_1",cy:"50",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#999999"}),r.a.createElement("ellipse",{ry:"20",rx:"20",id:"svg_3",cy:"50",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#444444"}),r.a.createElement("ellipse",{ry:"48",rx:"48",id:"svg_4",cy:"250",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#999999"}),r.a.createElement("ellipse",{ry:"20",rx:"20",id:"svg_5",cy:"250",cx:"50",strokeWidth:"1.5",stroke:"#000",fill:"#444444"},this.props.tool)),r.a.createElement("text",{y:"250",x:"-20",fontSize:"4em"},this.props.tool))}}]),n}(r.a.Component);n(34);var za=["\ud83d\udce1","\ud83d\udddc\ufe0f","\ud83d\udd2c","\ud83d\udc89","\ud83d\udd0e","\ud83e\uddfc","\ud83e\uddf2","\ud83c\udfa5","\ud83d\udd27"];function Wa(e){var t=e+1;return t===za.length&&(t=0),t}var Ua=function(){var e=ua((function(e){return e.world.alien.abductedBeanKeys})),t=ua((function(e){return e.world.alien.techProgress})),n=ua((function(e){return e.world.alien.currentlyResearchingTech})),i=sa(),l=Object(a.useState)(0),c=Object(Ct.a)(l,2),o=c[0],s=c[1],u=Object(a.useState)(3),d=Object(Ct.a)(u,2),m=d[0],y=d[1],p=Object(a.useState)(2),h=Object(Ct.a)(p,2),f=h[0],b=h[1],v=Object(a.useState)(1),g=Object(Ct.a)(v,2),E=g[0],k=g[1];Object(a.useEffect)((function(){var e=window.setInterval((function(){Math.random()<.51&&s(Wa(o)),Math.random()<.51&&y(Wa(m)),Math.random()<.51&&b(Wa(f)),Math.random()<.51&&k(Wa(E))}),1e3);return function(){window.clearInterval(e)}}));var w=Object.values(pt);return r.a.createElement("div",null,r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,r.a.createElement("h2",null,"Research \ud83e\uddea Lab"),r.a.createElement("div",{className:"vertical"},w.map((function(e){return function(e,t,n,a){var i=null==t[e.tech]?0:t[e.tech].researchPoints,l=e.techPoints,c={width:Math.min(i/l*100,100)+"%"},o=i>=l,s=n===e.tech,u=o?"\u2705":s?"\ud83d\udd2c":"\u2b55\ufe0f",d=s?"active":"inactive";return r.a.createElement("div",{className:"card-parent "+d,key:e.tech},r.a.createElement("button",{className:"card button",onClick:function(){return a(e.tech)}},r.a.createElement("strong",null,e.name),r.a.createElement("strong",{className:"pull-r f-size-125em"},u),r.a.createElement("div",null,e.description),r.a.createElement("div",{className:"bar f-size-12 h-12"},r.a.createElement("div",{className:"bar-inner text-center",style:c}),i,"/",l," tech")))}(e,t,n,(function(e){return i(na({t:e}))}))})))),r.a.createElement("div",{className:"vertical"},r.a.createElement("div",null,r.a.createElement("div",{className:"robot"},"\ud83e\udd16",r.a.createElement(La,{classN:"far-left",tool:za[o]}),r.a.createElement(La,{classN:"left",tool:za[m]}),r.a.createElement(La,{classN:"near-right",tool:za[f]}),r.a.createElement(La,{classN:"far-right",tool:za[E]}))),r.a.createElement("div",{className:"h-42em"},e.map((function(e){return r.a.createElement("span",{key:e,className:"victim bean triangle shake"},"\ud83d\ude28")}))),r.a.createElement("div",{className:"text-center"},"Currently probing ",e.length," beings for ",e.length," tech a day",r.a.createElement("p",null,r.a.createElement("small",null,"1 tech per research subject per day"))),e.length>0?r.a.createElement("div",{className:"text-right"},r.a.createElement(xa,{className:"callout",onConfirm:function(){i(Gn())},confirmText:"-1 Research Subject?"},"\ud83c\udf88 Release Research Subject")):null)),r.a.createElement("div",null))},Ja=function(){var e=ua((function(e){return e.world.alien.beliefInventory})),t=ua((function(e){return e.world.alien.seenBeliefs})),n=Object(a.useState)(),i=Object(Ct.a)(n,2),l=(i[0],i[1],[]);return Object.keys(t).forEach((function(e){null!=H[e]&&l.push(H[e])})),l.sort((function(e,t){return e.noun.localeCompare(t.noun)})),r.a.createElement("div",{className:"vertical"},r.a.createElement("div",{className:"pad-4p"},r.a.createElement("h2",null,"Subject \ud83e\udde0 Traits")),r.a.createElement("div",{className:"col-2-30-60"},r.a.createElement("div",null,r.a.createElement("div",{className:"scroll"},r.a.createElement("div",{className:"scoll-sticky-h"},r.a.createElement("strong",null,"Trait Inventory")),e.length<1?r.a.createElement("div",null,"No Traits! ",r.a.createElement("br",null),"\ud83d\ude35 Brainwash your subjects  ",r.a.createElement("br",null),"or buy from the \ud83d\udecd\ufe0f Market"):e.map((function(e){return r.a.createElement("div",{key:e.trait},r.a.createElement("div",null,r.a.createElement("strong",null,H[e.trait].icon," ",H[e.trait].noun)),r.a.createElement("div",null,"This can be implanted ",e.charges," more times"))})))),r.a.createElement("div",null,r.a.createElement("div",{className:"modal-scroll-v"},r.a.createElement("div",{className:"sticky-t-0"},r.a.createElement("strong",null,"Discovered ",l.length," of ",F.length," Traits")),l.length<1?r.a.createElement("div",null,"No Traits! ",r.a.createElement("br",null),"\ud83d\udef0\ufe0f Scan some of your subjects."):l.map((function(e){return r.a.createElement(Sa,{key:e.noun,data:e,cost:0,titleView:r.a.createElement("strong",null,e.noun),bottomView:r.a.createElement("span",null)})}))))))},Va=function(e){var t=Object(a.useState)(!1),n=Object(Ct.a)(t,2),i=n[0],l=n[1],c=ua((function(t){return t.world.cities.byID[e.cityKey]})),o=ua((function(t){return t.world.ufos.byID[e.ufoKey]}));Object(a.useEffect)((function(){setTimeout((function(){l(!0),pn.play("teleport"),setTimeout((function(){l(!1)}),1800)}),1800)}),[]);var s=Object(A.a)({},se(ce(c.hex_size,c.petriOrigin,o.point)));return r.a.createElement("span",{style:s,className:"ufo"},"\ud83d\udef8",i?r.a.createElement("span",{className:"beam"}):null)},$a=function(e){var t=ua((function(t){return function(e,t,n){var a=e.cities.byID[t].buildingMap[n];return null!=a?function(e,t){return e.buildings.byID[t]}(e,a):void 0}(t.world,e.cityKey,"".concat(e.hex.q,",").concat(e.hex.r))})),n=ua((function(t){return function(e,t){return e.cities.byID[t]}(t.world,e.cityKey)}));return t?r.a.createElement(Dt,{city:n,building:t}):null},Xa=function(e){var t=sa(),n=ua((function(t){return t.selected.selectedHexKey===e.hexString}))?"hex-selected":"";return r.a.createElement("div",{className:"hex "+n,key:e.i,style:Object(A.a)(Object(A.a)({},lr),se(e.xy)),onMouseEnter:function(n){t(jn({cityKey:e.cityKey,px:e.xy}))},onClick:function(n){return null!=e.buildingKey?t(ba({cityKey:e.cityKey,buildingKey:e.buildingKey,hex:e.hex})):t(ya({cityKey:e.cityKey,hex:e.hex})),n.stopPropagation(),!1}},e.children)},Ya=function(e){var t=ua((function(t){return t.world.cities.byID[e.cityKey]})),n=ua((function(t){var n;return null===(n=t.world.cities.byID[e.cityKey])||void 0===n?void 0:n.hexes}));return r.a.createElement(r.a.Fragment,null,n.map((function(n,a){var i=ce(t.hex_size,t.petriOrigin,n),l=n.q+","+n.r,c=t.buildingMap[l];return r.a.createElement(Xa,{i:a,hex:n,xy:i,hexString:l,cityKey:e.cityKey,buildingKey:c,key:l},r.a.createElement($a,{cityKey:e.cityKey,hex:n}))})))},Za=function(e){var t=ua((function(t){return function(e,t){return function(e,t){return e.cities.byID[t].buildingKeys}(e,t).reduce((function(t,n){return t.push(e.buildings.byID[n]),t}),[])}(t.world,e.city.key)}));return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement("div",{key:t.key,className:"building-node",onClick:function(){return e.onClickBuilding(t)}},r.a.createElement(jt,{cityName:e.city.name,building:t,style:{},getStyle:function(){return{}}}))})))},Qa=function(e){Object(a.useRef)(null);var t=ua((function(t){return t.world.cities.byID[e.cityKey].pickupMagnetPoint}));return t?r.a.createElement("div",{className:"magnet",style:{transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}},"\ud83e\uddf2"):null};function er(e){return"buy"==e.actionData.act&&"shelter"!=e.actionData.good}var tr=function(e){var t=ua((function(t){return function(e,t){var n=e.world.beans.byID[t],a="work"===n.actionData.act;return{speech:at(n),face:lt(n),good:er(n)?M[n.actionData.good||"food"]:void 0,classes:[n.job,n.ethnicity,"travel"!=n.actionData.act||"dead"===n.lifecycle?"paused":""].join(" "),animationClasses:["bean-walker",a?"spin":""].join(" ")}}(t,e.beanKey)})),n=ua((function(t){return t.selected.selectedBeanKey===e.beanKey})),a=["bean interactable",t.classes,e.sitStill?"":t.animationClasses,n?"selected":""].join(" "),i=sa();return r.a.createElement("span",{className:a,onClick:function(t){t.stopPropagation(),i(ha({cityKey:e.cityKey,beanKey:e.beanKey}))}},t.face," ",t.good?r.a.createElement("span",{className:"purchase"},r.a.createElement("span",{className:"money"},"\ud83d\udcb8"),r.a.createElement("span",{className:"purchase-good"},t.good)):null," ",t.speech?r.a.createElement("span",{className:"speech"},r.a.createElement("span",{className:""},t.speech)):null)},nr=function(e){var t=Object(a.useState)(!1),n=Object(Ct.a)(t,2),i=n[0],l=n[1],c=ua((function(t){return t.world.pickups.byID[e.pickupKey]})),o=r.a.useContext(Ur);return Object(a.useEffect)((function(){!i&&o&&(o.play("drop"),l(!0))})),r.a.createElement("span",{className:"pickup bob"},O[c.type])},ar=function(e){var t=r.a.useContext(Jr),n=Object(a.useRef)(null),i=function(e){n.current&&e&&(n.current.style.transform="translate(".concat(e.point.x,"px, ").concat(e.point.y,"px)"))};return Object(a.useEffect)((function(){var n=t.Get(e.moverType,e.moverKey);return n.subscribe(i),n.current&&i(n.current),function(){return t.Get(e.moverType,e.moverKey).unsubscribe(i)}}),[]),r.a.createElement("div",{ref:n},e.children)},rr=function(e){var t=ua((function(t){return ca(t.world,e.cityKey)}));return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement(ar,{moverKey:t,key:t,moverType:"bean"},r.a.createElement(tr,{cityKey:e.cityKey,beanKey:t}))})))},ir=function(e){var t=ua((function(t){return t.world.cities.byID[e.cityKey].pickupKeys}));return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(ar,{moverKey:e,key:e,moverType:"pickup"},r.a.createElement(nr,{pickupKey:e}))})))},lr={width:"120px",height:"120px",top:"-60px",left:"-60px"},cr=function(e){for(var t=ua((function(t){return t.world.cities.byID[e.cityKey]})),n=ua((function(t){return t.world.cities.byID[e.cityKey].ufoKeys})),a=(ua((function(e){return e.world.spotlightEvent})),ua((function(e){if(e.world.spotlightEvent&&e.world.spotlightEvent.beanKey)return e.world.beans.byID[e.world.spotlightEvent.beanKey]})),sa()),i=[],l=t.petriRadius-20,c=0;c<72;c++){var o=oe({r:l,az:5*c*Math.PI/180});o.x+=t.petriRadius,o.y+=t.petriRadius,i.push(se(o))}t.deadBeanKeys.map((function(e,t){return r.a.createElement("span",{key:t,className:"dead",style:{left:10*t+"px"}},"\u26b0\ufe0f")}));var s={height:2*t.petriRadius+"px",width:2*t.petriRadius+"px"};return r.a.createElement("div",{className:"tile",onClick:function(){return e.onClick()},onMouseLeave:function(){a(jn({cityKey:t.key}))},style:s},r.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-base"},r.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 1)"})),r.a.createElement(Ya,{cityKey:t.key}),i.map((function(e,t){return r.a.createElement("span",{key:t,style:e,className:"mtn"},"\u26f0\ufe0f")})),r.a.createElement(ir,{cityKey:e.cityKey}),r.a.createElement(rr,{cityKey:e.cityKey}),n.map((function(e,n){return r.a.createElement(Va,{ufoKey:e,key:e,cityKey:t.key})})),r.a.createElement(Qa,{cityKey:e.cityKey}),r.a.createElement("svg",{style:{width:"100%",height:"100%"},className:"petri-lid"},r.a.createElement("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"grey",fill:"rgba(255, 255, 255, 0.2)"})))},or=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t="card button";return this.props.thin&&(t+=" thin"),this.props.singleLine&&(t+=" single"),r.a.createElement("button",{className:t,title:this.props.title,onClick:function(){e.props.onClick&&e.props.onClick()},type:"button",disabled:this.props.disabled},this.props.icon," ",this.props.name,null!=this.props.subtext?r.a.createElement("small",null,this.props.subtext):null)}}]),n}(r.a.Component);function sr(e,t,n){switch(t){case"trad":case"prog":case"ego":case"state":return r.a.createElement(or,{icon:j[t],title:T[t].description,name:"",subtext:Ma[t],thin:!0,singleLine:!0,onClick:n});case"fresh":case"sick":case"hungry":case"starving":case"stuffed":case"homeless":case"rested":case"circle":case"square":case"triangle":case"sane":case"disturbed":case"stressed":return r.a.createElement(or,{icon:j[t],title:Ma[t],name:"",subtext:Ma[t],thin:!0,singleLine:!0,onClick:n});case"noFaith":case"rocket":case"dragon":case"music":return r.a.createElement(or,{icon:j[t],title:G[t].description,name:"",subtext:Ma[t],thin:!0,singleLine:!0,onClick:n});default:return null}}var ur=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("small",null,kn(this.props.cost,"-",this.props.qty)," ",this.props.rider)}}]),n}(r.a.Component);n(35);function dr(e,t,n,a,i){if(!e)return r.a.createElement("div",{className:"width-100p text-center"},r.a.createElement("small",null,"Subject needs a Scan to reveal their thoughts"));switch(t){case"beliefs":return e?n.beliefs.map((function(e,t){var n,a="belief-name shadow text-left "+H[e].rarity;return r.a.createElement("table",{className:"width-100p",key:e+t},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:a},H[e].icon," ",H[e].adj),r.a.createElement("td",{className:"text-right"},(H[e].idealPro||[]).map((function(e){return r.a.createElement("span",{key:e},"+",j[e])})),(H[e].idealCon||[]).map((function(e){return r.a.createElement("span",{key:e},"-",j[e])})))),r.a.createElement("tr",null,r.a.createElement("td",{className:"small text-center",colSpan:2},H[e].description?null===(n=H[e].description)||void 0===n?void 0:n.split(";").map((function(e,t){return r.a.createElement("div",{key:t},e)})):null))))})):null;case"feelings":return r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,e?function(e){return Object.keys(e.happiness.all).map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"small text-right"},e.happiness.all[t]," ",e.happiness.all[t]>=0?O.happiness:O.unhappiness," from "),r.a.createElement("td",{className:"small"},t))}))}(n):null));default:case"priorities":return r.a.createElement("table",{className:"width-100p"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Currently ",function(e){var t;switch(e.act){case"chat":return"chatting";case"crime":return"commiting crime";case"sleep":return"sleeping \ud83d\ude34";case"relax":return"relaxing";case"travel":return"travelling to "+(null===(t=e.intent)||void 0===t?void 0:t.act)||!1;case"work":return e.good?"working to make "+M[e.good]:"working";case"buy":return e.good?"buying "+M[e.good]:"buying"}return""}(n.actionData))),n.priorities.map((function(e){return r.a.createElement("tr",{key:"p-".concat(e.act,"-").concat(e.good)},r.a.createElement("td",null,e.priority.toFixed(2)," ",function(e){switch(e.act){case"sleep":return"\ud83d\ude34";case"work":return e.good?"\ud83d\udcaa "+M[e.good]:"\ud83d\udcaa";case"buy":return e.good?"\ud83d\udcb8 "+M[e.good]:"\ud83d\udcb8"}return""}(e)))})),function(e){var t=Object.keys(e.activity_duration).map((function(e){return e}));return t.sort((function(t,n){return e.activity_duration[n]-e.activity_duration[t]})),t}(n).filter((function(e){return n.activity_duration[e]>0})).map((function(e){var t=e;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e),r.a.createElement("td",null,(n.activity_duration[t]/1e3).toFixed(1),"s"))}))))}}var mr=function(e){var t=sa(),n=Object(a.useState)(void 0),i=Object(Ct.a)(n,2),l=i[0],c=i[1],o=Object(a.useState)("beliefs"),s=Object(Ct.a)(o,2),u=s[0],d=s[1],m=ua((function(e){return e.world.alien})),y=ua(Ea),p=ua(ga);function h(){setTimeout((function(){c(void 0)}),5e3)}if(!y||!p)return null;var f=y.job+" "+y.ethnicity;return r.a.createElement("div",{className:"vertical bean-panel"},r.a.createElement("div",{className:"bean-panel-header"},r.a.createElement("div",null,r.a.createElement("b",null,y.name,"\xa0",p?r.a.createElement("small",null," of ",p.name," "):null),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){t(pa())}},"\u274c")),r.a.createElement("div",{className:"bean-view"},r.a.createElement("span",{className:f+" bean"},void 0===l?lt(y):l)),r.a.createElement("div",{className:"horizontal"},r.a.createElement("span",{className:"text-center"},"\ud83d\udcb0 $",y.cash.toFixed(2)),r.a.createElement("span",{className:"text-center"},"\ud83d\ude42 ",Math.round(y.lastHappiness),"%"),r.a.createElement("span",{className:"text-center"},Math.round(y.happiness.flatAverage)," ",O.happiness," /day")),function(e,t,n,a,i){return e?r.a.createElement("div",null,r.a.createElement("div",{className:"card-parent"},sr(0,t.ethnicity,void 0),sr(0,t.faith,a)),r.a.createElement("div",{className:"card-parent"},t.beliefs.map((function(e){return r.a.createElement(or,{key:e,icon:H[e].icon,title:H[e].adj,name:"",thin:!0,singleLine:!0,onClick:function(){}})}))),r.a.createElement("div",{className:"card-parent"},sr(0,t.food,void 0),sr(0,t.stamina,void 0),sr(0,t.health,void 0))):r.a.createElement("div",{className:"card-parent"},r.a.createElement(or,{icon:"\ud83d\udef0\ufe0f",name:"Scan",subtext:"-Energy +Info",onClick:i,disabled:!bt(n,n.difficulty.cost.bean.scan)}))}(m.scanned_bean[y.key],y,m,(function(){t(function(){throw new Error("Function not implemented.")}())}),(function(){t(Hn({beanKey:y.key})),c("\ud83d\ude28"),h()}))),r.a.createElement("div",{className:"grow-1 pad-4 bean-panel-content"},r.a.createElement("div",{className:"cylinder blue-orange horizontal"},r.a.createElement("button",{type:"button",className:"beliefs"==u?"active":"",onClick:function(){return d("beliefs")}},"\ud83d\ude07 Traits"),r.a.createElement("button",{type:"button",className:"feelings"==u?"active":"",onClick:function(){return d("feelings")}},"\ud83d\ude10 Feelings"),r.a.createElement("button",{type:"button",className:"priorities"==u?"active":"",onClick:function(){return d("priorities")}},"\ud83d\udcaa Priorities")),dr(m.scanned_bean[y.key],u,y)),r.a.createElement("div",{className:"bean-action-card-parent"},r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",onClick:function(){e.brainwash()},title:"Rewrite one of this being's traits"},"\ud83d\ude35 Brainwash",r.a.createElement("small",null,"-Sanity +-Trait"))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",onClick:function(){t(Fn({beanKey:y.key})),c("\ud83d\ude28"),h()},disabled:!bt(m,m.difficulty.cost.bean.vaporize),title:"Delete this being from the experiment"},"\u2620\ufe0f Vaporize",r.a.createElement(ur,{cost:m.difficulty.cost.bean.vaporize}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{type:"button",className:"button card",disabled:"alive"!=y.lifecycle||!bt(m,m.difficulty.cost.bean.abduct),onClick:function(){return t(Tn({beanKey:y.key}))},title:"Remove this being for study"},"\ud83d\udc7e Abduct for Research",r.a.createElement(ur,{cost:m.difficulty.cost.bean.abduct,rider:"+Tech"})))))};var yr=function(e){return r.a.createElement("div",{className:"horizontal blue-orange cylinder f-size-125em marg-t-20"+(e.additionalClasses||"")},e.options.map((function(t){return r.a.createElement("button",{type:"button",key:t.value,onClick:function(){return t.onClick()},className:e.active===t.value?"active":""},t.icon," ",t.text)})))},pr=["company","co-op","commune"],hr={company:"\ud83c\udfa9","co-op":"\ud83e\udd1d",commune:"\u2692\ufe0f"},fr=function(e){var t=sa();return r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return t(Pn({cityKey:e.city,where:xr(e.hex)}))}},"\ud83d\udef8 Beam In New Subject",r.a.createElement(ur,{cost:e.difficulty.cost.hex.beam,rider:"+Subject"})))},br=function(e){var t=Object(d.c)((function(e){return e.selected.selectedHexKey})),n=Object(d.c)(ka),a=Object(d.c)(ga),i=sa();if(a&&n)return r.a.createElement(vr,{building:n,city:a,difficulty:e.difficulty});if(a&&t){var l=e.difficulty.cost.emptyHex;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Empty Lot")," in ",r.a.createElement("strong",null,a.name),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return i(fa({cityKey:a.key}))}},"\u274c")),r.a.createElement("h3",null,"Build:"),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(On({city:a.key,where:xr(t),what:"house"}))}},ue.house," House",r.a.createElement(ur,{cost:l.build.house}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(On({city:a.key,where:xr(t),what:"farm"}))}},ue.farm," Farm",r.a.createElement(ur,{cost:l.build.farm})),r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(On({city:a.key,where:xr(t),what:"hospital"}))}},ue.hospital," Hospital",r.a.createElement(ur,{cost:l.build.hospital}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(On({city:a.key,where:xr(t),what:"theater"}))}},ue.theater," Theater",r.a.createElement(ur,{cost:l.build.theater})),r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(On({city:a.key,where:xr(t),what:"park"}))}},ue.park," Park",r.a.createElement(ur,{cost:l.build.park}))),r.a.createElement("h3",null,"Beings:"),r.a.createElement(fr,{difficulty:e.difficulty,hex:t,city:a.key}))}return r.a.createElement("div",null)},vr=function(e){var t,n=e.building,a=ua((function(e){return null!=n.enterpriseKey?e.world.enterprises.byID[n.enterpriseKey]:void 0})),i=sa(),l=Mt(n),c="park"!=n.type&&"nature"!=n.type,o="".concat(n.address.q,",").concat(n.address.r);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,n.upgraded&&c?"Dense ":"Small ",Ma[n.type]),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return i(pa())}},"\u274c")),r.a.createElement("div",{className:"text-right"},r.a.createElement("small",null,"in\xa0",r.a.createElement("strong",null,e.city.name))),null!=a?r.a.createElement("div",null,r.a.createElement("small",null,"$",null===(t=a.cash)||void 0===t?void 0:t.toFixed(2)," from sales today"),r.a.createElement(wr,{enterpriseKey:a.key,good:ye[n.type]})):null,n.upgraded&&c?r.a.createElement("div",null,gr(n.type)):null,null!=a?r.a.createElement(kr,{enter:a,changeEnterprise:function(e){return i(_n({enterpriseKey:n.key,newType:e}))}}):null,r.a.createElement(Er,{cityKey:e.city.key,building:n}),c?r.a.createElement("div",null,"This ",Ma[n.type]," can support ",l.length," more jobs.",n.upgraded?null:r.a.createElement("span",null,r.a.createElement("br",null),"Upgrade it to add 3 more job slots.")):null,n.upgraded||!c?null:r.a.createElement("div",null,r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",type:"button",onClick:function(){return i(An({buildingKey:n.key}))}},"\ud83d\udee0\ufe0f Upgrade",r.a.createElement(ur,{cost:e.difficulty.cost.hex.upgrade}))),gr(n.type)),r.a.createElement(fr,{city:e.city.key,difficulty:e.difficulty,hex:o}))},gr=function(e){return"house"===e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("small",null,"\ud83d\udc2e Parochial subjects may emit \ud83d\udc4e",r.a.createElement("br",null),"when living in dense buildings")),r.a.createElement("div",{className:"text-center"},r.a.createElement("small",null,"\ud83c\udf78 Cosmopolitan subjects may emit \ud83d\udc4e",r.a.createElement("br",null),"when living in small buildings"))):r.a.createElement("div",null)},Er=function(e){var t=sa(),n=ua((function(t){return e.building.jobs.map((function(e){return t.world.beans.byID[e]}))})),a=ua((function(t){return t.world.enterprises.byID[e.building.key]}));return n.length<0?r.a.createElement("div",null,"No Workers"):r.a.createElement("div",null,r.a.createElement("strong",null,"Workers:"),n.map((function(n){return r.a.createElement("div",{key:n.key},me[e.building.type]," ",n.name," ",a&&"company"===a.enterpriseType&&n.key===a.ownerBeanKey?"\ud83c\udfa9":"",r.a.createElement("button",{title:"Fire",className:"callout marg-0",onClick:function(){return n?t(Bn({cityKey:e.cityKey,beanKey:n.key})):null}},"\ud83d\udd25"))})))},kr=function(e){var t=pr.map((function(t){return{icon:hr[t],text:t[0].toUpperCase()+t.substring(1),value:t,onClick:function(){e.changeEnterprise(t)}}}));return r.a.createElement(yr,{active:e.enter.enterpriseType,options:t})},wr=function(e){var t=ua((function(t){return t.world.economy.market.listings[e.good]}));return r.a.createElement("div",null,t.filter((function(t){return t.sellerEnterpriseKey===e.enterpriseKey})).map((function(t,n){return r.a.createElement("div",{key:n},t.quantity," ",M[e.good]," @ $",t.price.toFixed(2))})))};function xr(e){var t=e.split(",");return{q:+t[0],r:+t[1]}}var Nr=function(e){var t=ua((function(t){return oa(t.world,e.city.key)})),n=r.a.createElement("div",null,"Human Emotion Farm",r.a.createElement("div",null,r.a.createElement("small",null,"Part of the \ud83c\udf0c Galactic Xenosensation Federation")));e.city&&(n=r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,e.city.name),r.a.createElement("button",{type:"button",className:"pull-r",onClick:function(){return e.clearCity()}},"\u274c"))));var a=t.reduce((function(e,t){return e+t.lastHappiness}),0)/(t.length||1),i=t.reduce((function(e,t){return e+t.cash}),0)/(t.length||1);return r.a.createElement("div",null,n,r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"\ud83d\udc65 Subjects")),r.a.createElement("div",null,r.a.createElement("b",null,"Population"),"\xa0",r.a.createElement("span",null,t.length)),r.a.createElement(Oa,{beans:t,need:function(e){return e.food},dire:"starving",abundant:"stuffed"},"Food Security"),r.a.createElement(Oa,{beans:t,need:function(e){return e.stamina},dire:"homeless",abundant:"rested"},"Housing"),r.a.createElement(Oa,{beans:t,need:function(e){return e.health},dire:"sick",abundant:"fresh"},"Healthcare"),r.a.createElement("b",null,"Avg. Money")," $",i.toFixed(2)," \xa0",r.a.createElement("b",null,"Avg. Happiness")," ",Math.round(a),"%",t&&t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("b",null,"\ud83e\udde0 Traits")),r.a.createElement("div",{className:"max-w-300"},function(e,t){return Array.from(t.reduce((function(t,n){return e[n.key]?n.beliefs.forEach((function(e){var n=t.get(e)||0;t.set(e,n+1)})):t.set("Unknown",(t.get("Unknown")||0)+1),t}),new Map).entries()).sort((function(e,t){var n=Object(Ct.a)(e,2),a=(n[0],n[1]),r=Object(Ct.a)(t,2);r[0];return r[1]-a})).map((function(e){var t=Object(Ct.a)(e,2),n=t[0],a=t[1];return"Unknown"===n?{icon:"\u2754",noun:"Unknown",count:a}:{icon:H[n].icon,noun:H[n].noun,count:a}}))}(e.alien.scanned_bean,t).map((function(e){return r.a.createElement("span",{key:e.noun,className:"overview-belief"},e.icon,"\xa0",e.noun,"\xa0x",e.count)})))):null,t.length?r.a.createElement("div",{className:"card-parent"},r.a.createElement(or,{icon:"\ud83d\udef0\ufe0f",name:"Scan All",disabled:!0,subtext:"-Energy +Info",onClick:function(){}})):null)},Sr=(r.a.Component,function(e){var t=ua(ga),n=ua((function(e){return e.selected.selectedHexKey})),a=ua(Ea),i=ua((function(e){return e.world.alien})),l=sa();return a&&t?r.a.createElement(mr,{bean:a,city:t,alien:i,brainwash:function(){return e.openBrainwash()}}):n?r.a.createElement(br,{difficulty:i.difficulty}):t?r.a.createElement(Nr,{city:t,clearCity:function(){return l(pa())},alien:i}):r.a.createElement("div",null)});var Dr=function(e){var t=ua(wa),n=sa(),a=t.map((function(e,t){var a="\ud83d\udea8"===e.icon,i="nojobslots"===e.trigger||"persuasion"===e.trigger;return r.a.createElement("div",{key:t,className:a||i?"tall":""},r.a.createElement("span",{className:a?"police-siren":""},e.icon),"\xa0",function(e){return null!=e.beanKey&&("speechcrime"===e.trigger||"birth"===e.trigger)}(e)?r.a.createElement("a",{onClick:function(){e.beanKey&&e.cityKey&&n(ha({beanKey:e.beanKey,cityKey:e.cityKey}))},href:"javascript:void(0)"},e.message):r.a.createElement("span",null,e.message))}));return 0===t.length&&(a=[r.a.createElement("div",{key:0},r.a.createElement("small",null,"No events yet"))]),r.a.createElement("div",{className:"events-panel"},r.a.createElement("div",null,r.a.createElement("b",null,"Events")),a)};function jr(e,t){return r.a.createElement("li",null,(null===e||void 0===e?void 0:e.done)?"\u2611\ufe0f":"\u2b55\ufe0f",t.text,null!=t.tooltip?r.a.createElement("small",{title:t.tooltip},"\u2754"):null,(null===e||void 0===e?void 0:e.done)||null==t.reward?null:function(e){return r.a.createElement("div",null,r.a.createElement("small",null,"\ud83c\udf81 ",kn(e.reward||{},"+")))}(t))}var Kr=function(){var e,t=ua((function(e){return e.world.alien.goalProgress})),n=ua((function(e){return e.world.alien.goals})),a=ua((function(e){return e.world.alien.workingReportCard}));return r.a.createElement("div",{className:"goals"},r.a.createElement("div",null,r.a.createElement("b",null,"Goals")),r.a.createElement("ul",null,n.map((function(e){return jr(t[e],ot[e])}))),r.a.createElement("div",null,r.a.createElement("b",null,"Report Card")),r.a.createElement("p",{className:"horizontal"},r.a.createElement("span",null,"Last Grade: ",r.a.createElement("b",null,"D")),r.a.createElement("span",null,"Next Grade in: ",r.a.createElement("b",null,"2 mo."))),r.a.createElement("p",null),r.a.createElement("table",{style:{margin:"auto"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\ud83c\udfaf Happiness"),r.a.createElement("td",null,a.Happiness),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects happy?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-left",colSpan:3},r.a.createElement("small",null,st.RubricDescription.Happiness))),r.a.createElement("tr",null,r.a.createElement("th",null,"\ud83c\udfaf Prosperity"),r.a.createElement("td",null,a.Prosperity),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects fed and healthy?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-left",colSpan:3},r.a.createElement("small",null,st.RubricDescription.Prosperity))),r.a.createElement("tr",null,r.a.createElement("th",null,"\ud83c\udfaf Stability"),r.a.createElement("td",null,a.Stability),r.a.createElement("td",null,r.a.createElement("small",{title:"Are your subjects sane and civil?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-left",colSpan:3},r.a.createElement("small",null,st.RubricDescription.Stability))),r.a.createElement("tr",null,r.a.createElement("th",null,"\ud83c\udfaf Dogma"),r.a.createElement("td",null,a.Dogma),r.a.createElement("td",null,r.a.createElement("small",{title:"Do your society's rules match your utopian ideals?"},"\u2754"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-left",colSpan:3},r.a.createElement("small",null,st.RubricDescription.Dogma))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("hr",null))),r.a.createElement("tr",null,r.a.createElement("th",null,"Avg. Grade"),r.a.createElement("td",null,mt((yt[(e=a).Happiness]+yt[e.Prosperity]+yt[e.Stability]+yt[e.Dogma])/20)),r.a.createElement("td",null)))))},Cr=function(){var e=ua((function(e){return e.world.alien})),t=sa();return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center"},r.a.createElement("strong",null,"\ud83c\udf0c Galactic \ud83d\ude28 Emotion \ud83d\udcb0 Market")),r.a.createElement("p",null,r.a.createElement("small",null,"The premier exchange for \u26a1\ufe0f, \ud83e\udd16,  and ",O.happiness,"!")),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",onClick:function(){return t(ra({amount:1}))},disabled:!bt(e,e.difficulty.cost.market.resource.energy)},"+1 \u26a1\ufe0f Energy",r.a.createElement(ur,{cost:e.difficulty.cost.market.resource.energy,qty:1})),r.a.createElement("button",{className:"card button",onClick:function(){return t(ra({amount:5}))},disabled:!bt(e,e.difficulty.cost.market.resource.energy,5)},"+5 \u26a1\ufe0f Energy",r.a.createElement(ur,{cost:e.difficulty.cost.market.resource.energy,qty:5}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",onClick:function(){return t(aa({amount:1}))},disabled:!bt(e,e.difficulty.cost.market.resource.bots)},"+1 \ud83e\udd16 Bot",r.a.createElement(ur,{cost:e.difficulty.cost.market.resource.bots,qty:1})),r.a.createElement("button",{className:"card button",onClick:function(){return t(aa({amount:5}))},disabled:!bt(e,e.difficulty.cost.market.resource.bots,5)},"+5 \ud83e\udd16 Bots",r.a.createElement(ur,{cost:e.difficulty.cost.market.resource.bots,qty:5}))),r.a.createElement("div",{className:"card-parent"},r.a.createElement("button",{className:"card button",onClick:function(){return t(la())},disabled:e.hedons.amount>=0||!bt(e,e.difficulty.cost.market.scrubHedons)},"Remove \ud83d\udca2 Negative Hedons",r.a.createElement(ur,{cost:e.difficulty.cost.market.scrubHedons,qty:1}))),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("i",null,"Current \ud83e\udde0 Traits for sale:"))),r.a.createElement("div",{className:"short-scroll"},r.a.createElement(Ir,{hedons:e.hedons.amount})))},Ir=function(e){var t=ua((function(e){return e.world.marketTraitsForSale})),n=sa();return r.a.createElement(r.a.Fragment,null,t.map((function(t,a){var i=H[t.trait],l="belief-name "+i.rarity;return r.a.createElement("div",{className:"card-parent",key:a},r.a.createElement("button",{className:"card button",onClick:function(){return n(ia({l:t}))},disabled:e.hedons<(t.cost.hedons||0)},r.a.createElement("span",{className:l},i.icon," ",i.noun),r.a.createElement(ur,{cost:t.cost})))})))},Mr=["able","acid","aged","also","area","army","away","baby","back","ball","band","bank","base","bath","bear","beat","been","beer","bell","belt","best","bill","bird","blow","blue","boat","body","bomb","bond","bone","book","boom","born","boss","both","bowl","bulk","burn","bush","busy","call","calm","came","camp","card","care","case","cash","cast","cell","chat","chip","city","club","coal","coat","code","cold","come","cook","cool","cope","copy","CORE","cost","crew","crop","dark","data","date","dawn","days","dead","deal","dean","dear","debt","deep","deny","desk","dial","dick","diet","disc","disk","does","done","door","dose","down","draw","drew","drop","drug","dual","duke","dust","duty","each","earn","ease","east","easy","edge","else","even","ever","evil","exit","face","fact","fail","fair","fall","farm","fast","fate","fear","feed","feel","feet","fell","felt","file","fill","film","find","fine","fire","firm","fish","five","flat","flow","food","foot","ford","form","fort","four","free","from","fuel","full","fund","gain","game","gate","gave","gear","gene","gift","girl","give","glad","goal","goes","gold","Golf","gone","good","gray","grew","grey","grow","gulf","hair","half","hall","hand","hang","hard","harm","hate","have","head","hear","heat","held","hell","help","here","hero","high","hill","hire","hold","hole","holy","home","hope","host","hour","huge","hung","hunt","hurt","idea","inch","into","iron","item","jack","jane","jean","john","join","jump","jury","just","keen","keep","kent","kept","kick","kill","kind","king","knee","knew","know","lack","lady","laid","lake","land","lane","last","late","lead","left","less","life","lift","like","line","link","list","live","load","loan","lock","logo","long","look","lord","lose","loss","lost","love","luck","made","mail","main","make","male","many","Mark","mass","matt","meal","mean","meat","meet","menu","mere","mike","mile","milk","mill","mind","mine","miss","mode","mood","moon","more","most","move","much","must","name","navy","near","neck","need","news","next","nice","nick","nine","none","nose","note","okay","once","only","onto","open","oral","over","pace","pack","page","paid","pain","pair","palm","park","part","pass","past","path","peak","pick","pink","pipe","plan","play","plot","plug","plus","poll","pool","poor","port","post","pull","pure","push","race","rail","rain","rank","rare","rate","read","real","rear","rely","rent","rest","rice","rich","ride","ring","rise","risk","road","rock","role","roll","roof","room","root","rose","rule","rush","ruth","safe","said","sake","sale","salt","same","sand","save","seat","seed","seek","seem","seen","self","sell","send","sent","sept","ship","shop","shot","show","shut","sick","side","sign","site","size","skin","slip","slow","snow","soft","soil","sold","sole","some","song","soon","sort","soul","spot","star","stay","step","stop","such","suit","sure","take","tale","talk","tall","tank","tape","task","team","tech","tell","tend","term","test","text","than","that","them","then","they","thin","this","thus","till","time","tiny","told","toll","tone","tony","took","tool","tour","town","tree","trip","true","tune","turn","twin","type","unit","upon","used","user","vary","vast","very","vice","view","vote","wage","wait","wake","walk","wall","want","ward","warm","wash","wave","ways","weak","wear","week","well","went","were","west","what","when","whom","wide","wife","wild","will","wind","wine","wing","wire","wise","wish","with","wood","word","wore","work","yard","yeah","year","your","zero","zone"];function Or(){for(var e="",t=0;t<4;t++){t>0&&(e+="-");var n=Math.random();e+=Mr[Math.floor(n*Mr.length)]}return e}var _r=function(e){var t=Object(a.useState)(!1),n=Object(Ct.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(!1),o=Object(Ct.a)(c,2),s=o[0],u=o[1],d=function(e){l(e)},m=function(){u(!0),setTimeout((function(){return u(!1)}),500)};Object(a.useEffect)((function(){return b.Dirty.subscribe(d),function(){return b.Dirty.unsubscribe(d)}})),Object(a.useEffect)((function(){return b.Saving.subscribe(m),function(){return b.Saving.unsubscribe(m)}}));return r.a.createElement("button",{disabled:!i||s},s?"\ud83d\udcbf":i?"\ud83d\udcbe":"\u2714\ufe0f")};var Br=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).bubbleSeed=0,a.onChange=function(e){var t=++a.bubbleSeed,n=e.change>0;a.setState({bubbles:a.state.bubbles.concat([{string:(n?"+":"")+e.change,id:t,className:n?"pos":"neg"}])}),setTimeout((function(){a.setState({bubbles:a.state.bubbles.filter((function(e){return e.id!=t}))})}),1500)},a.state={bubbles:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.changeEvent&&this.props.changeEvent.subscribe(this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.changeEvent&&this.props.changeEvent.unsubscribe(this.onChange)}},{key:"render",value:function(){var e=this,t=this.state.bubbles.map((function(t){return r.a.createElement("span",{key:t.id,className:[t.className,e.props.bubbleClass,"bubbler"].join(" ")},e.props.icon," ",t.string)}));return r.a.createElement("span",{className:"bubble-parent"},this.props.children,t)}}]),n}(r.a.Component),Ar=function(e){var t=function(e,t){var n=Object(a.useState)([]),r=Object(Ct.a)(n,2),i=r[0],l=r[1],c=0,o=function(e){var n=++c;l(i.concat([Object(A.a)({id:n},t(e))])),setTimeout((function(){l(i.filter((function(e){return e.id!=n})))}),1500)};return Object(a.useEffect)((function(){return e.subscribe(o),function(){return e.unsubscribe(o)}})),i}(e.changeEvent,(function(e){return{string:"Discovered ".concat(e.k,"!"),className:"seen-belief"}}));return r.a.createElement("span",{className:"bubble-parent"},e.children,t.map((function(t){return r.a.createElement("span",{key:t.id,className:[t.className,e.bubbleClass,"bubbler"].join(" ")},e.icon," ",t.string)})))},Pr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"render",value:function(){var e="capsule-label "+this.props.label||!1;return r.a.createElement("span",{className:e},r.a.createElement("span",{className:"capsule-icon"},this.props.icon),r.a.createElement("span",{className:"capsule-text"},this.props.label,":"),r.a.createElement("span",{className:"capsule-value"},this.props.children))}}]),n}(r.a.Component),Tr=function(){var e=ua((function(e){return e.world.alien.energy.amount}));return r.a.createElement("span",null,e.toFixed(1))},Gr=function(){var e=ua((function(e){return e.world.alien.bots.amount}));return r.a.createElement("span",null,e.toFixed(1))},Hr=function(){var e=ua((function(e){return e.world.alien.hedons.amount}));return r.a.createElement("span",null,e.toFixed(0))},Fr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={show:!1},a}return Object(o.a)(n,[{key:"getButton",value:function(){var e=this;return this.props.onClick?r.a.createElement("button",{type:"button",className:"done",onClick:function(){return e.props.onClick&&e.props.onClick()}},this.props.closeButtonText||"Done"):null}},{key:"render",value:function(){return this.props.show?r.a.createElement("div",{className:"modal"},this.props.children,this.getButton()):null}}]),n}(r.a.Component);var qr=function(){var e,t=ua((function(e){return e.world.date}));return r.a.createElement("span",null,"\xa0Year ",t.year,",\xa0",Zt[t.season]," ",t.day," ",(e=t.hour)<vn.Morning?"\ud83c\udf19":e<vn.Noon?"\ud83c\udf04":e<vn.Evening?"\u2600\ufe0f":"\ud83c\udf07")},Rr=(n(36),function(e){var t=ua((function(t){return ca(t.world,e.city.key)})),n=ua((function(e){return e.world.alien.scanned_bean})),a=sa();return r.a.createElement("div",{className:"social-graph"},r.a.createElement("div",{className:"social-graph-row"},t.map((function(t){return r.a.createElement("div",{key:t,className:"bean-node",onClick:function(){return a(ha({cityKey:e.city.key,beanKey:t}))}},r.a.createElement(tr,{beanKey:t,static:!0,sitStill:!0,cityKey:e.city.key}),n[t]?null:r.a.createElement("span",{className:"social-graph-unscanned prohibited-emoji"},"\ud83d\udef0\ufe0f"))}))),r.a.createElement("div",{className:"social-graph-row"},r.a.createElement(Za,{city:e.city,onClickBuilding:e.onClickBuilding})))}),Lr=(n(37),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"s-p-f button-group cylinder blue-orange"},"\u231b\ufe0f",r.a.createElement("button",{type:"button",className:0==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(0)}},"\u23f9"),r.a.createElement("button",{type:"button",className:1==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(1)}},"\u25b6\ufe0f"),r.a.createElement("button",{type:"button",className:2==this.props.timeScale?"active":"",onClick:function(){return e.props.setTimeScale(2)}},"\u23e9"))}}]),n}(r.a.Component)),zr=function(e){return r.a.createElement("div",{className:"s-p-f button-group cylinder blue-orange"},"\ud83d\udc41\ufe0f",r.a.createElement("button",{type:"button",className:"geo"==e.activeMain?"active":"",onClick:function(){return e.setActiveMain("geo")}},"\ud83c\udf0e"),r.a.createElement("button",{type:"button",className:"network"==e.activeMain?"active":"",onClick:function(){return e.setActiveMain("network")}},"\ud83c\udf10"))},Wr=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onEvent=function(e){a.setState({eventCount:a.state.eventCount+1}),window.setTimeout((function(){a.setState({eventCount:a.state.eventCount-1})}),3e3)},a.props.event.subscribe(a.onEvent),a.state={eventCount:0},a}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("span",null,this.state.eventCount<1?this.props.children:r.a.createElement("span",{className:this.props.eventClass},this.props.eventIcon))}}]),n}(r.a.Component),Ur=r.a.createContext(void 0),Jr=r.a.createContext(v),Vr=va,$r=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).previousTimeMS=0,a.logicTickAccumulatorMS=0,a.millisecondsSinceLastSave=0,a.saveAccumulatorMS=0,a.tick=function(e){var t=e-a.previousTimeMS;if(a.previousTimeMS=e,t>0){var n=t*a.state.timeScale;(function(e,t){var n=[];return e.ufos.allIDs.forEach((function(a){e.ufos.byID[a];Jt.Get("ufo",a).elapsed+=t,Jt.Get("ufo",a).elapsed>4e3&&n.push(Cn({ufoKey:a}))})),n})(Vr.getState().world,t).map((function(e){return Vr.dispatch(e)})),n>0&&(a.logicTickAccumulatorMS+=t,function(e,t){for(var n=e.pickups.allIDs,a=e.cities.byID[0],r=[],i=n.length-1;i>=0;i--){var l=n[i],c=a.pickupMagnetPoint,o=Object(A.a)({},v.Get("pickup",l).current||X);if(c)Y(o,c,E*t/1e3,k,w,g)&&r.push(qn({cityKey:a.key,pickupKey:l}));else Z(o,g);v.Get("pickup",l).publish(o)}return r}(Vr.getState().world,t).map((function(e){return Vr.dispatch(e)})),function(e,t){var n=[];return e.beans.allIDs.forEach((function(a){var r=e.beans.byID[a];if("alive"==r.lifecycle){var i=Jt.Get("bean",r.key);i.elapsed+=t;var l=Bt[r.action].act(r,e,i.elapsed,t);if(Array.isArray(l.action)?n.push.apply(n,Object(y.a)(l.action)):l.action&&n.push(l.action),l.newActivity){var c=Bt[r.action].exit(r,e.seed);c&&n.push(c),n.push(Wn({beanKey:a,newState:l.newActivity}));var o=Bt[l.newActivity.act].enter(r);o&&n.push(o)}}})),n}(Vr.getState().world,t).map((function(e){return Vr.dispatch(e)})),a.logicTickAccumulatorMS>2e3&&(Vr.dispatch(Kn()),a.logicTickAccumulatorMS=0)),a.millisecondsSinceLastSave+=t,b.Dirty.current&&a.millisecondsSinceLastSave>15e3&&(b.SaveGame(Vr.getState().world),a.millisecondsSinceLastSave=0)}window.requestAnimationFrame(a.tick)},a.cheatMode=!1,a.keyupHandler=function(e){" "===e.key?a.state.timeScale>0?a.setState({timeScale:0}):a.setState({timeScale:1}):"Escape"===e.key?("greeting"===a.state.activeModal&&Vr.dispatch(In({seed:a.state.newGameSeed})),a.setState({activeModal:null})):a.cheatMode&&"A"===e.key?Vr.dispatch(Qn()):a.cheatMode&&"Q"===e.key||a.cheatMode&&e.key,a.cheatMode=e.shiftKey&&"C"===e.key},a.onDeath=function(e){pn.play("death"),a.startSpotlight(e)},a.timescaleBeforeSpotlight=1,a.state={activeMain:"geo",activeModal:"mainmenu",activeRightPanel:"overview",timeScale:0,spotlightEvent:void 0,newGameSeed:Or()},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",this.keyupHandler,!1),window.requestAnimationFrame((function(t){e.previousTimeMS=t,window.requestAnimationFrame(e.tick)})),Vr.subscribe((function(){var t=Vr.getState();null==t.selected.selectedBeanKey&&null==t.selected.selectedBuildingKey&&null==t.selected.selectedHexKey||"overview"==e.state.activeRightPanel||e.setState({activeRightPanel:"overview"})}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyupHandler)}},{key:"startSpotlight",value:function(e){var t=this;this.timescaleBeforeSpotlight=this.state.timeScale,this.setState({spotlightEvent:e,timeScale:0},(function(){setTimeout((function(){return t.endSpotlight()}),5e3)}))}},{key:"endSpotlight",value:function(){this.setState({timeScale:this.timescaleBeforeSpotlight,spotlightEvent:void 0})}},{key:"getPanel",value:function(){var e=this;switch(this.state.activeRightPanel){case"overview":return r.a.createElement(Sr,{openBrainwash:function(){return e.setState({activeModal:"brainwash"})}});case"goals":return r.a.createElement(Kr,null);case"events":return r.a.createElement(Dr,null);case"market":return r.a.createElement(Cr,null)}}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{store:Vr},r.a.createElement(Ur.Provider,{value:pn},r.a.createElement(Jr.Provider,{value:v},r.a.createElement("div",{className:"canvas"},"network"===this.state.activeMain?r.a.createElement("div",{className:"canvas"},r.a.createElement(Rr,{city:Vr.getState().world.cities.byID[0],onClickBuilding:function(e){return Vr.dispatch(ba({cityKey:Vr.getState().world.cities.allIDs[0],buildingKey:e.key,hex:e.address}))},onClick:function(e){Vr.dispatch(ha({cityKey:e.cityKey,beanKey:e.key}))}})):r.a.createElement(m.b,{minScale:.65,centerZoomedOut:!0,centerOnInit:!0,limitToBounds:!0,wheel:{step:.05}},r.a.createElement(m.a,null,r.a.createElement("div",{className:"world"},Vr.getState().world.cities.allIDs.map((function(e){return r.a.createElement(cr,{cityKey:e,key:e,onClick:function(){}})}))))),r.a.createElement("div",{className:"overlay"},r.a.createElement(Fr,{show:"mainmenu"==this.state.activeModal},r.a.createElement(Ra,{startGame:function(){return e.setState({activeModal:"greeting"})},loadGame:function(t){var n=b.GetGame(t);null!=n.game&&(Vr.dispatch(Mn({newState:n.game})),e.setState({activeModal:null}))}})),r.a.createElement(Fr,{show:"loadgame"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Vr.dispatch(In({seed:e.state.newGameSeed}))}},r.a.createElement(qa,null)),r.a.createElement(Fr,{show:"escapemenu"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Vr.dispatch(In({seed:e.state.newGameSeed}))}},r.a.createElement(Aa,null)),r.a.createElement(Fr,{show:"greeting"==this.state.activeModal,onClick:function(){e.setState({activeModal:null}),Vr.dispatch(In({seed:e.state.newGameSeed}))}},r.a.createElement(Fa,{seed:this.state.newGameSeed,changeSeed:function(t){return e.setState({newGameSeed:t})}})),r.a.createElement(Fr,{show:"gov"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ta,null)),r.a.createElement(Fr,{show:"polisci"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ua,null)),r.a.createElement(Fr,{show:"campaign"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ia,null)),r.a.createElement(Fr,{show:"economy"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},"economy"==this.state.activeModal?r.a.createElement(Ba,null):""),r.a.createElement(Fr,{show:"traits"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ja,null)),r.a.createElement(Fr,{show:"brainwash"==this.state.activeModal,onClick:function(){return e.setState({activeModal:null})}},r.a.createElement(Ca,null)),r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"top"},r.a.createElement("span",null,"\ud83d\udc7d Alien \ud83c\udf0d Utopia \ud83d\udd2c Lab"),r.a.createElement(qr,null),r.a.createElement(Lr,{timeScale:this.state.timeScale,setTimeScale:function(t){e.setState({timeScale:t})}}),r.a.createElement(zr,{setActiveMain:function(t){return e.setState({activeMain:t})},activeMain:this.state.activeMain}),r.a.createElement(_r,null)),r.a.createElement("div",{className:"bottom"},r.a.createElement(Br,{changeEvent:ct.alienEnergy,icon:"\u26a1\ufe0f"},r.a.createElement(Pr,{icon:"\u26a1\ufe0f",label:"Energy"},r.a.createElement(Tr,null))),r.a.createElement(Br,{changeEvent:ct.alienBots,icon:"\ud83e\udd16"},r.a.createElement(Pr,{icon:"\ud83e\udd16",label:"Bots"},r.a.createElement(Gr,null))),r.a.createElement(Br,{changeEvent:ct.alienHedons,icon:"\ud83d\udc4d"},r.a.createElement(Pr,{icon:"\ud83d\udc4d",label:"Hedons"},r.a.createElement(Hr,null))),r.a.createElement("span",null,r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"economy"})}},"\ud83d\udcca State of the Utopia"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"gov"})}},"\ud83d\uddf3\ufe0f Gov"),r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"polisci"})}},"\ud83e\uddea Research"),r.a.createElement(Ar,{changeEvent:ct.newTraitSeen,icon:"\ud83e\udde0"},r.a.createElement("button",{type:"button",className:"callout",onClick:function(){return e.setState({activeModal:"traits"})}},"\ud83e\udde0 Traits"))))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"full-width-tabs"},r.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"overview"})}},"\ud83d\udcc8 Info"),r.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"market"}),Vr.dispatch(pa())}},"\ud83d\udecd\ufe0f Market"),r.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"events"}),Vr.dispatch(pa())}},r.a.createElement(Wr,{event:ct.events,eventIcon:"\ud83d\udea8",eventClass:"police-siren"},"\ud83d\udce3")," Events"),r.a.createElement("button",{onClick:function(){e.setState({activeRightPanel:"goals"}),Vr.dispatch(pa())}},"\ud83c\udfc6 Goals")),r.a.createElement("div",{className:"right-panel"},this.getPanel())))))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($r,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.92d9a4ca.chunk.js.map